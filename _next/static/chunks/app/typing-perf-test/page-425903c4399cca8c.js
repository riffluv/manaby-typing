(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[371],{97:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p});var n=t(5155),a=t(2115),l=t(6786);let i=(0,a.memo)(e=>{let{displayInfo:s,errorAnimation:t}=e,{romaji:l,typedLength:i,currentCharRomaji:o}=s,r=(0,a.useMemo)(()=>l.substring(0,i),[l,i]),d=(0,a.useMemo)(()=>l.substring(i,i+((null==o?void 0:o.length)||1)),[l,i,o]),c=(0,a.useMemo)(()=>l.substring(i+((null==o?void 0:o.length)||1)),[l,i,o]);return(0,n.jsxs)("div",{className:"typing-text",children:[(0,n.jsx)("span",{className:"typed",children:r}),(0,n.jsx)("span",{className:"current ".concat(t?"error-animation":""),children:d}),(0,n.jsx)("span",{className:"remaining",children:c})]})}),o=(0,a.memo)(e=>{let{progress:s}=e;return(0,n.jsx)("div",{className:"progress-container",children:(0,n.jsx)("div",{className:"progress-bar",style:{width:"".concat(s,"%")}})})}),r=(0,a.memo)(e=>{let{stats:s}=e;return(0,n.jsxs)("div",{className:"stats-display",children:[(0,n.jsxs)("div",{children:["速度: ",s.kpm||0," KPM"]}),(0,n.jsxs)("div",{children:["正解: ",s.correctKeyCount||0]}),(0,n.jsxs)("div",{children:["ミス: ",s.mistakeCount||0]})]})}),d=(0,a.memo)(e=>{let{initialProblem:s,playSound:t=!0,soundSystem:d=null,onComplete:c=()=>{},showDebug:u=!1}=e,[m,h]=(0,a.useState)({}),x=(0,a.useCallback)(e=>{c(e)},[c]),p=(0,l.j)({initialProblem:s,playSound:t,soundSystem:d,onProblemComplete:x,onDebugInfoUpdate:u?h:null});(0,a.useEffect)(()=>{let e=e=>{if(!p.handleInput)return;let s=p.handleInput(e.key);(null==s?void 0:s.success)&&e.preventDefault()};return window.addEventListener("keydown",e,{capture:!0}),()=>{window.removeEventListener("keydown",e,{capture:!0})}},[p]);let j=(0,a.useMemo)(()=>p.isInitialized?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i,{displayInfo:p.displayInfo,errorAnimation:p.errorAnimation}),(0,n.jsx)(o,{progress:p.progress}),(0,n.jsx)(r,{stats:p.stats}),u&&(0,n.jsxs)("div",{className:"debug-info",children:[(0,n.jsx)("h4",{children:"デバッグ情報"}),(0,n.jsx)("pre",{children:JSON.stringify(m,null,2)})]})]}):(0,n.jsx)("div",{className:"loading",children:"問題を読み込み中..."}),[p.isInitialized,p.displayInfo,p.errorAnimation,p.progress,p.stats,u,m]);return(0,n.jsx)("div",{className:"fast-typing-game",children:j})});var c=t(854),u=t(2610),m=t.n(u);let h=[{displayText:"タイピングゲームのパフォーマンス最適化",kanaText:"たいぴんぐげーむのぱふぉーまんすさいてきか"},{displayText:"キー入力をバッファで処理することでレスポンスを改善",kanaText:"きーにゅうりょくをばっふぁでしょりすることでれすぽんすをかいぜん"},{displayText:"requestAnimationFrameとuseRefを活用した実装",kanaText:"りくえすとあにめーしょんふれーむとゆーずれふをかつようしたじっそう"},{displayText:"高速連続キー入力にも対応できる最適化",kanaText:"こうそくれんぞくきーにゅうりょくにもたいおうできるさいてきか"},{displayText:"React.memoとuseMemoによる再レンダリング抑制",kanaText:"りあくとめもとゆーずめもによるさいれんだりんぐよくせい"}],x={playSound:e=>{console.log("[Sound] ".concat(e,"サウンド再生"))},ultraFastPlayTypingSound:e=>{console.log("[FastSound] ".concat(e,"サウンド再生"))}};function p(){let[e,s]=(0,a.useState)(0),[t,l]=(0,a.useState)(!0),[i,o]=(0,a.useState)(!0),[r,u]=(0,a.useState)({completedCount:0,totalKeyCount:0,totalTime:0,averageKPM:0}),{goBack:p}=(0,c.w)();return(0,n.jsxs)("div",{className:m().typing_game__wrapper,children:[(0,n.jsxs)("header",{className:m().demo_header,children:[(0,n.jsx)("h1",{children:"高速タイピングデモ"}),(0,n.jsxs)("div",{className:m().controls,children:[(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{type:"checkbox",checked:t,onChange:()=>l(!t)}),"効果音を有効にする"]}),(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{type:"checkbox",checked:i,onChange:()=>o(!i)}),"デバッグ情報を表示"]}),(0,n.jsx)("button",{onClick:p,className:m().back_button,children:"戻る"})]})]}),(0,n.jsxs)("div",{className:m().stats_panel,children:[(0,n.jsx)("h3",{children:"統計情報"}),(0,n.jsxs)("div",{children:["完了問題数: ",r.completedCount]}),(0,n.jsxs)("div",{children:["総キー入力数: ",r.totalKeyCount]}),(0,n.jsxs)("div",{children:["総タイピング時間: ",(r.totalTime/1e3).toFixed(1),"秒"]}),(0,n.jsxs)("div",{children:["平均速度: ",r.averageKPM," KPM"]})]}),(0,n.jsxs)("main",{className:m().typing_game__main,children:[(0,n.jsxs)("div",{className:m().problem_info,children:[(0,n.jsxs)("div",{children:["問題 ",e+1,"/",h.length]}),(0,n.jsx)("div",{children:h[e].displayText})]}),(0,n.jsx)(d,{initialProblem:h[e],playSound:t,soundSystem:x,onComplete:e=>{console.log("問題完了:",e),u(s=>{let t={completedCount:s.completedCount+1,totalKeyCount:s.totalKeyCount+e.problemKeyCount,totalTime:s.totalTime+e.problemElapsedMs,averageKPM:0};return t.totalTime>0&&(t.averageKPM=Math.round(t.totalKeyCount/t.totalTime*6e4)),t}),setTimeout(()=>{s(e=>(e+1)%h.length)},1e3)},showDebug:i})]}),(0,n.jsx)("footer",{className:m().demo_footer,children:(0,n.jsx)("p",{children:"この高速タイピングデモは、useRefとrequestAnimationFrameを使用してキー入力処理を 最適化しています。高速連続入力時でもスムーズなレスポンスを実現します。"})})]})}},7692:(e,s,t)=>{Promise.resolve().then(t.bind(t,97))}},e=>{var s=s=>e(e.s=s);e.O(0,[980,841,507,740,519,55,599,475,529,344,854,441,684,358],()=>s(7692)),_N_E=e.O()}]);