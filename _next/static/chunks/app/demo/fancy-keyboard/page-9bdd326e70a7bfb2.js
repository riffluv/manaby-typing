(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[928],{20:e=>{e.exports={container:"page_container__lhwNc",keyboardContainer:"page_keyboardContainer__pC9Av",keyboard:"page_keyboard__0sIOl",error:"page_error__2mrP9",shake:"page_shake__bIRze",instructions:"page_instructions__4FWuQ"}},1858:e=>{e.exports={fancyKeyboard:"FancyKeyboard_fancyKeyboard__p_hVQ",keyboardCanvas:"FancyKeyboard_keyboardCanvas__sYzBT"}},3182:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>h,dynamic:()=>c});var a=t(5155),n=t(2115),s=t(20),o=t.n(s),i=t(1858),l=t.n(i);let d=e=>{let{nextKey:r="",lastPressedKey:t="",isError:s=!1,className:o=""}=e,i=(0,n.useRef)(null),[d,c]=(0,n.useState)([]),h=(0,n.useRef)(null);return(0,n.useEffect)(()=>{c([["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["z","x","c","v","b","n","m"]].flatMap((e,a)=>e.map((e,n)=>({key:e,x:60*n+30*a,y:70*a,width:50,height:50,highlight:e===r,pressed:e===t,error:s&&e===t,animation:0}))))},[]),(0,n.useEffect)(()=>{c(e=>e.map(e=>({...e,highlight:e.key===r,pressed:e.key===t,error:s&&e.key===t,animation:e.key===t?1:e.animation})))},[r,t,s]),(0,n.useEffect)(()=>{let e=i.current;if(!e)return;let r=e.getContext("2d"),t=e.width,a=e.height,n=()=>{r.clearRect(0,0,t,a),r.strokeStyle="#3a4a6a22",r.lineWidth=.5;for(let e=0;e<t;e+=20)r.beginPath(),r.moveTo(e,0),r.lineTo(e,a),r.stroke();for(let e=0;e<a;e+=20)r.beginPath(),r.moveTo(0,e),r.lineTo(t,e),r.stroke();c(e=>e.map(e=>{let t=e.animation>.01?.95*e.animation:0,a=e.x,n=e.y,s=e.width,o=e.height;r.fillStyle=e.highlight?"#5e8bff":e.error?"#ff5e5e":"#2a3a5a",t>0?(r.shadowColor=e.error?"#ff0000":"#5e8bff",r.shadowBlur=20*t):r.shadowBlur=0;let i=3*!!e.pressed;r.beginPath(),r.roundRect(a,n+i,s,o,10),r.fill();let l=r.createLinearGradient(a,n,a,n+o);return l.addColorStop(0,"rgba(255, 255, 255, 0.2)"),l.addColorStop(1,"rgba(255, 255, 255, 0)"),r.fillStyle=l,r.beginPath(),r.roundRect(a,n+i,s,o/2,10),r.fill(),r.fillStyle="#ffffff",r.font="bold 24px sans-serif",r.textAlign="center",r.textBaseline="middle",r.fillText(e.key.toUpperCase(),a+s/2,n+o/2+i),t>0&&(r.strokeStyle=e.error?"#ff0000":"#5e8bff",r.lineWidth=3*t,r.beginPath(),r.roundRect(a-10*t,n-10*t+i,s+20*t,o+20*t,10),r.stroke()),{...e,animation:t}})),h.current=requestAnimationFrame(n)};return n(),()=>{h.current&&cancelAnimationFrame(h.current)}},[]),(0,a.jsx)("div",{className:"".concat(l().fancyKeyboard," ").concat(o),children:(0,a.jsx)("canvas",{ref:i,width:700,height:220,className:l().keyboardCanvas})})},c="force-dynamic";function h(e){let{searchParams:r}=e,[t,s]=(0,n.useState)("a"),[i,l]=(0,n.useState)(""),[c,h]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{r&&r.key&&s(r.key.charAt(0).toLowerCase())},[r]),(0,n.useEffect)(()=>{let e=e=>{let r=e.key.toLowerCase();l(r),r===t?(h(!1),s(String.fromCharCode(Math.floor(26*Math.random())+97))):h(!0)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t]),(0,a.jsxs)("div",{className:o().container,children:[(0,a.jsx)("h1",{children:"ファンシーキーボードデモ"}),(0,a.jsxs)("p",{children:["次のキーを押してください: ",(0,a.jsx)("strong",{children:t.toUpperCase()})]}),c&&(0,a.jsx)("p",{className:o().error,children:"間違いました！"}),(0,a.jsx)("div",{className:o().keyboardContainer,children:(0,a.jsx)(d,{nextKey:t,lastPressedKey:i,isError:c,className:o().keyboard})}),(0,a.jsxs)("div",{className:o().instructions,children:[(0,a.jsx)("h2",{children:"使い方"}),(0,a.jsx)("p",{children:"ハイライトされたキーを押して、アニメーションを確認してください。"}),(0,a.jsx)("p",{children:"間違ったキーを押すとエラーエフェクトが表示されます。"})]})]})}},7299:(e,r,t)=>{Promise.resolve().then(t.bind(t,3182))}},e=>{var r=r=>e(e.s=r);e.O(0,[199,441,684,358],()=>r(7299)),_N_E=e.O()}]);