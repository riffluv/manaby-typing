(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[874],{2579:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p});var r=t(5155),a=t(2115);let n=null,l=!1,c=null,i=new TextEncoder;async function o(){if(l)return!0;try{n=new WebAssembly.Memory({initial:1,maximum:100});let e=new Uint8Array([0,97,115,109,1,0,0,0,1,7,1,96,2,127,127,1,127,3,2,1,0,5,3,1,0,1,7,16,2,6,109,101,109,111,114,121,2,0,3,97,100,100,0,0,10,9,1,7,0,32,0,32,1,106,11]),s=await WebAssembly.compile(e);return c={...(await WebAssembly.instantiate(s,{env:{memory:n}})).exports,processChar:(e,s)=>{let t=new Uint8Array(n.buffer);return+(t[e]===t[s])},processInput:(e,s,t)=>{let r=new Uint8Array(n.buffer),a=0;for(let n=0;n<t;n++)r[e+n]===r[s+n]&&a++;return a},calculateTypingScore:(e,s,t)=>{let r=e+s>0?Math.floor(e/(e+s)*100):100,a=t>0?Math.floor(1e3*e/t):0;return 100*e+r+a}},l=!0,console.log("[WebAssembly] タイピングエンジンの初期化が完了しました"),window.wasmTypingModule={validateInput:(e,s)=>c.processChar(e,s),calculateScore:(e,s,t)=>c.calculateTypingScore(e,s,t)},!0}catch(e){return console.error("[WebAssembly] 初期化に失敗しました:",e),l=!0,c={add:(e,s)=>e+s,processChar:()=>1,processInput:(e,s,t)=>t,calculateTypingScore:(e,s,t)=>{let r=e+s>0?Math.floor(e/(e+s)*100):100,a=t>0?Math.floor(1e3*e/t):0;return 100*e+r+a}},console.log("[WebAssembly] フォールバック実装を使用します"),!0}}function h(e,s){if(!l)return console.warn("[WebAssembly] モジュールが初期化されていません"),1;let t=i.encode(e),r=i.encode(s),a=new Uint8Array(n.buffer),o=t.length;return a.set(t,0),a.set(r,o),c.processChar(0,o)}function d(e,s){if(!l){console.warn("[WebAssembly] モジュールが初期化されていません");let t=0,r=0,a=-1,n=Math.min(e.length,s.length);for(let l=0;l<n;l++)e[l]===s[l]?t++:(r++,-1===a&&(a=l));return e.length>s.length&&(r+=e.length-s.length),{correctCount:t,missCount:r,errorPosition:a}}let t=0,r=0,a=-1,n=Math.min(e.length,s.length);for(let l=0;l<n;l++)e[l]===s[l]?t++:(r++,-1===a&&(a=l));return e.length>s.length&&(r+=e.length-s.length),{correctCount:t,missCount:r,errorPosition:a}}new TextDecoder;var m=t(8058),u=t.n(m);function p(){let[e,s]=(0,a.useState)(!1),[t,n]=(0,a.useState)({charTest:null,stringTest:null,scoreTest:null}),[i,m]=(0,a.useState)(""),[p,x]=(0,a.useState)("a"),[b,g]=(0,a.useState)(""),[j,f]=(0,a.useState)("hello"),[_,v]=(0,a.useState)(100),[y,A]=(0,a.useState)(5),[w,C]=(0,a.useState)(6e4),[T,N]=(0,a.useState)(null);return(0,a.useEffect)(()=>{!async function(){try{let e=await o();s(e),console.log("WebAssembly初期化: ".concat(e?"成功":"失敗"))}catch(e){console.error("WebAssembly初期化エラー:",e),s(!1)}}()},[]),(0,r.jsxs)("main",{className:u().main,children:[(0,r.jsx)("h1",{children:"WebAssembly タイピングエンジンテスト"}),(0,r.jsxs)("div",{className:u().status,children:[(0,r.jsxs)("p",{children:["WebAssembly状態: ",(0,r.jsx)("strong",{children:e?"初期化済み":"未初期化"})]}),!e&&(0,r.jsx)("p",{className:u().warning,children:"WebAssemblyが初期化されていません。機能テストはできません。"})]}),(0,r.jsxs)("div",{className:u().testArea,children:[(0,r.jsx)("h2",{children:"1. 一文字入力テスト"}),(0,r.jsxs)("div",{className:u().testInputs,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"入力文字:"}),(0,r.jsx)("input",{type:"text",value:i,onChange:e=>m(e.target.value.charAt(0)),maxLength:1})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"期待文字:"}),(0,r.jsx)("input",{type:"text",value:p,onChange:e=>x(e.target.value.charAt(0)),maxLength:1})]}),(0,r.jsx)("button",{onClick:()=>{if(!e)return void alert("WebAssemblyが初期化されていません");let s=h(i,p);n({...t,charTest:{input:i,expected:p,result:s,message:s?"一致しました":"一致しませんでした"}})},disabled:!e,children:"テスト実行"})]}),t.charTest&&(0,r.jsxs)("div",{className:u().result,children:[(0,r.jsx)("h3",{children:"結果:"}),(0,r.jsxs)("p",{children:["入力: '",t.charTest.input,"'"]}),(0,r.jsxs)("p",{children:["期待: '",t.charTest.expected,"'"]}),(0,r.jsx)("p",{className:t.charTest.result?u().success:u().error,children:t.charTest.message})]})]}),(0,r.jsxs)("div",{className:u().testArea,children:[(0,r.jsx)("h2",{children:"2. 文字列入力テスト"}),(0,r.jsxs)("div",{className:u().testInputs,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"入力文字列:"}),(0,r.jsx)("input",{type:"text",value:b,onChange:e=>g(e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"期待文字列:"}),(0,r.jsx)("input",{type:"text",value:j,onChange:e=>f(e.target.value)})]}),(0,r.jsx)("button",{onClick:()=>{if(!e)return void alert("WebAssemblyが初期化されていません");let s=d(b,j);n({...t,stringTest:{input:b,expected:j,matchCount:s.matchCount,matchRatio:s.matchRatio,message:"一致文字数: ".concat(s.matchCount,"/").concat(Math.min(b.length,j.length)," (").concat((100*s.matchRatio).toFixed(1),"%)")}})},disabled:!e,children:"テスト実行"})]}),t.stringTest&&(0,r.jsxs)("div",{className:u().result,children:[(0,r.jsx)("h3",{children:"結果:"}),(0,r.jsxs)("p",{children:["入力: '",t.stringTest.input,"'"]}),(0,r.jsxs)("p",{children:["期待: '",t.stringTest.expected,"'"]}),(0,r.jsx)("p",{children:t.stringTest.message}),(0,r.jsx)("div",{className:u().matchBar,children:(0,r.jsx)("div",{className:u().matchFill,style:{width:"".concat(100*t.stringTest.matchRatio,"%")}})})]})]}),(0,r.jsxs)("div",{className:u().testArea,children:[(0,r.jsx)("h2",{children:"3. スコア計算テスト"}),(0,r.jsxs)("div",{className:u().testInputs,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"正解数:"}),(0,r.jsx)("input",{type:"number",value:_,onChange:e=>v(parseInt(e.target.value)||0)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"ミス数:"}),(0,r.jsx)("input",{type:"number",value:y,onChange:e=>A(parseInt(e.target.value)||0)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"経過時間(ms):"}),(0,r.jsx)("input",{type:"number",value:w,onChange:e=>C(parseInt(e.target.value)||0)})]}),(0,r.jsx)("button",{onClick:()=>{if(!e)return void alert("WebAssemblyが初期化されていません");let s=l?c.calculateTypingScore(_,y,w):(console.warn("[WebAssembly] モジュールが初期化されていません"),100*_+(_+y>0?Math.floor(_/(_+y)*100):100)+(w>0?Math.floor(1e3*_/w):0));n({...t,scoreTest:{correctCount:_,missCount:y,elapsedTime:w,score:s,message:"計算されたスコア: ".concat(s)}})},disabled:!e,children:"テスト実行"})]}),t.scoreTest&&(0,r.jsxs)("div",{className:u().result,children:[(0,r.jsx)("h3",{children:"結果:"}),(0,r.jsxs)("p",{children:["正解数: ",t.scoreTest.correctCount]}),(0,r.jsxs)("p",{children:["ミス数: ",t.scoreTest.missCount]}),(0,r.jsxs)("p",{children:["経過時間: ",t.scoreTest.elapsedTime,"ms"]}),(0,r.jsx)("p",{className:u().scoreResult,children:t.scoreTest.message})]})]}),(0,r.jsxs)("div",{className:u().testArea,children:[(0,r.jsx)("h2",{children:"4. パフォーマンステスト"}),(0,r.jsx)("button",{onClick:()=>{if(!e)return void alert("WebAssemblyが初期化されていません");let s=0,t=0;for(let e=0;e<100;e++)h("a","a");let r=performance.now();for(let e=0;e<1e4;e++)h("a","a");s=performance.now()-r;let a=performance.now();for(let e=0;e<1e4;e++);t=performance.now()-a;let n="Hello, WebAssembly performance test!",l=performance.now();for(let e=0;e<1e4;e++)d(n,n);let c=performance.now()-l,i=performance.now();for(let e=0;e<1e4;e++){let e=0;for(let e=0;e<n.length;e++)n[e],n[e];n.length}let o=performance.now()-i;N({iterations:1e4,charComparison:{wasm:s.toFixed(2),js:t.toFixed(2),diff:(t/s-1)*100,faster:s<t?"WebAssembly":"JavaScript"},stringProcessing:{wasm:c.toFixed(2),js:o.toFixed(2),diff:(o/c-1)*100,faster:c<o?"WebAssembly":"JavaScript"}})},disabled:!e,className:u().benchmarkButton,children:"ベンチマーク実行"}),T&&(0,r.jsxs)("div",{className:u().benchmarkResults,children:[(0,r.jsxs)("h3",{children:["ベンチマーク結果 (",T.iterations,"回実行):"]}),(0,r.jsxs)("div",{className:u().benchmarkItem,children:[(0,r.jsx)("h4",{children:"一文字比較:"}),(0,r.jsxs)("p",{children:["WebAssembly: ",T.charComparison.wasm,"ms"]}),(0,r.jsxs)("p",{children:["JavaScript: ",T.charComparison.js,"ms"]}),(0,r.jsxs)("p",{className:u().benchmarkDiff,children:[T.charComparison.faster," は",Math.abs(T.charComparison.diff).toFixed(2),"%",T.charComparison.diff>0?"速い":"遅い"]})]}),(0,r.jsxs)("div",{className:u().benchmarkItem,children:[(0,r.jsx)("h4",{children:"文字列処理:"}),(0,r.jsxs)("p",{children:["WebAssembly: ",T.stringProcessing.wasm,"ms"]}),(0,r.jsxs)("p",{children:["JavaScript: ",T.stringProcessing.js,"ms"]}),(0,r.jsxs)("p",{className:u().benchmarkDiff,children:[T.stringProcessing.faster," は",Math.abs(T.stringProcessing.diff).toFixed(2),"%",T.stringProcessing.diff>0?"速い":"遅い"]})]})]})]})]})}},6027:(e,s,t)=>{Promise.resolve().then(t.bind(t,2579))},8058:e=>{e.exports={main:"page_main__f7uPX",status:"page_status__M3gtE",warning:"page_warning__z3gSU",testArea:"page_testArea__ky8Gl",testInputs:"page_testInputs__7iGYM",result:"page_result__E1xjf",success:"page_success__d5tCN",error:"page_error__QC_Gz",scoreResult:"page_scoreResult__FFI7e",matchBar:"page_matchBar__kVajt",matchFill:"page_matchFill__J5lE0",benchmarkButton:"page_benchmarkButton__5biKJ",benchmarkResults:"page_benchmarkResults__KGKpU",benchmarkItem:"page_benchmarkItem__fHRLU",benchmarkDiff:"page_benchmarkDiff___kEip"}}},e=>{var s=s=>e(e.s=s);e.O(0,[822,441,684,358],()=>s(6027)),_N_E=e.O()}]);