(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{542:e=>{e.exports={typing_game__canvas_container:"CanvasGameScreen_typing_game__canvas_container__S5W4r"}},1774:e=>{e.exports={performance_monitor:"PerformanceMonitor_performance_monitor__7EyTc",monitor_header:"PerformanceMonitor_monitor_header___bPVQ",title:"PerformanceMonitor_title__ushy1",indicator_light:"PerformanceMonitor_indicator_light__KP4M2",pulse:"PerformanceMonitor_pulse__jMFgr",metrics_table:"PerformanceMonitor_metrics_table__7k8Wq",normal_value:"PerformanceMonitor_normal_value__HYoiu",warning_value:"PerformanceMonitor_warning_value__8ay3m",error_value:"PerformanceMonitor_error_value__4bgVI",details_section:"PerformanceMonitor_details_section__2CiYd",details_content:"PerformanceMonitor_details_content__yMDK8",hidden:"PerformanceMonitor_hidden__nkYSc",compact:"PerformanceMonitor_compact__xlGIq",fullscreen:"PerformanceMonitor_fullscreen__OFJ80"}},2219:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>m});let n={SETTINGS:"typingGameSettings",IS_ADMIN:"isAdmin",BACKGROUND_IMAGE:"savedBackgroundImage",BACKGROUND_STYLE:"savedBackgroundStyle",HIGH_SCORES:"highScores",SCREEN_BACKGROUNDS:"screenBackgrounds",USER_PREFERENCES:"userPreferences",USERNAME:"username",LAST_PLAYED_DATE:"lastPlayedDate",SCREEN_SIZE:"screenSize"},s=(e,t)=>{try{let a="object"==typeof t?JSON.stringify(t):t;return localStorage.setItem(e,a),!0}catch(t){return console.error("Storage save error for key [".concat(e,"]:"),t),!1}},r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{let a=localStorage.getItem(e);if(null===a)return t;try{return JSON.parse(a)}catch(e){return a}}catch(a){return console.error("Storage get error for key [".concat(e,"]:"),a),t}},o=()=>!0===r(n.IS_ADMIN,!1),i=()=>r(n.BACKGROUND_IMAGE,null),l=()=>r(n.BACKGROUND_STYLE,null),c=e=>r(n.SCREEN_BACKGROUNDS,{})[e]||null,d=async function(){let{targetSelector:e="#__next > div",delay:t=100}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!o())return!1;try{let a=i(),n=l();if(!a&&!n)return!1;await new Promise(e=>setTimeout(e,t));let s=document.querySelector(e);if(!s)return console.warn("背景を適用する要素が見つかりませんでした: ".concat(e)),!1;return n&&Object.entries(n).forEach(e=>{let[t,a]=e;"backgroundImage"!==t&&a&&(s.style[t]=a)}),a&&(s.style.backgroundImage="url(".concat(a,")"),s.style.backgroundSize="cover",s.style.backgroundPosition="center"),!0}catch(e){return console.error("背景適用中にエラーが発生しました:",e),!1}},u=async e=>{if(!o())return!1;let t=c(e);if(!t)return d();try{let a=document.querySelector("#__next > div");if(!a)return!1;return t.imageUrl&&(a.style.backgroundImage="url(".concat(t.imageUrl,")"),a.style.backgroundSize="cover",a.style.backgroundPosition="center"),t.styleObject&&Object.entries(t.styleObject).forEach(e=>{let[t,n]=e;"backgroundImage"!==t&&n&&(a.style[t]=n)}),console.log("".concat(e,"画面用の背景を適用しました")),!0}catch(e){return console.error("画面背景適用中にエラーが発生しました:",e),!1}},m={STORAGE_KEYS:n,saveToStorage:s,getFromStorage:r,removeFromStorage:e=>{try{return localStorage.removeItem(e),!0}catch(t){return console.error("Storage remove error for key [".concat(e,"]:"),t),!1}},saveGameSettings:e=>s(n.SETTINGS,e),getGameSettings:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(n.SETTINGS,e)},isAdminMode:o,setAdminMode:e=>s(n.IS_ADMIN,e),saveBackgroundImage:e=>s(n.BACKGROUND_IMAGE,e),saveBackgroundStyle:e=>s(n.BACKGROUND_STYLE,e),getBackgroundImage:i,getBackgroundStyle:l,saveScreenBackground:(e,t)=>{let a=r(n.SCREEN_BACKGROUNDS,{});return a[e]=t,s(n.SCREEN_BACKGROUNDS,a)},getScreenBackground:c,saveUsername:e=>s(n.USERNAME,e),getUsername:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"プレイヤー";return r(n.USERNAME,e)},saveHighScore:(e,t)=>{let a=r(n.HIGH_SCORES,{});return(!a[e]||t.kpm>a[e].kpm)&&(a[e]={...t,date:new Date().toISOString()}),s(n.HIGH_SCORES,a)},getHighScore:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=r(n.HIGH_SCORES,{});return e?t[e]||null:t},saveLastPlayedDate:()=>s(n.LAST_PLAYED_DATE,new Date().toISOString()),getLastPlayedDate:()=>r(n.LAST_PLAYED_DATE,null),saveScreenSize:e=>s(n.SCREEN_SIZE,e),getScreenSize:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{width:800,height:600};return r(n.SCREEN_SIZE,e)},applyBackgroundFromStorage:d,applyScreenBackground:u}},2574:e=>{e.exports={button:"Button_button__qCupi","button--disabled":"Button_button--disabled__LPoAO","button--primary":"Button_button--primary__uZOtY","button--secondary":"Button_button--secondary__O_Gm8","button--danger":"Button_button--danger__5vqLf","button--success":"Button_button--success__ZB9VJ","button--small":"Button_button--small__EwPRw","button--large":"Button_button--large__Xq3St","button--round":"Button_button--round___Izcj","button--active":"Button_button--active__NcvUE",button__icon:"Button_button__icon__u_LOV",toggle:"Button_toggle__lMu2e","toggle--on":"Button_toggle--on__idOhz","toggle--off":"Button_toggle--off__i_YR2","button--menu":"Button_button--menu__AXmIR","button--difficulty":"Button_button--difficulty__6mgjA","button--control":"Button_button--control__yI0zZ","button--back":"Button_button--back__VjTxq","button--loading":"Button_button--loading__2a2Vs",button__spinner:"Button_button__spinner__K8gfm",spinner:"Button_spinner__51Com",spin:"Button_spin__ezNAC"}},2610:e=>{e.exports={typing_game__wrapper:"GameScreen_typing_game__wrapper__t9Z_q",typing_game:"GameScreen_typing_game__KJGki",typing_game__header:"GameScreen_typing_game__header__Ga3yt",typing_game__level_display:"GameScreen_typing_game__level_display__Jfh1q",typing_game__status:"GameScreen_typing_game__status__1gf4s",typing_game__status_item:"GameScreen_typing_game__status_item___24z5",typing_game__display_toggle:"GameScreen_typing_game__display_toggle__7xDSb",typing_game__back_button:"GameScreen_typing_game__back_button__EaVM_",typing_game__main:"GameScreen_typing_game__main__4y7Pv",typing_game__content:"GameScreen_typing_game__content___sSj6",typing_game__problem:"GameScreen_typing_game__problem__5a191",typing_game__keyboard:"GameScreen_typing_game__keyboard__8Cyuw",typing_game__problem_text:"GameScreen_typing_game__problem_text__mobG0",typing_game__input:"GameScreen_typing_game__input__i3j2Q",typing_game__next_char:"GameScreen_typing_game__next_char__CJep4",typing_game__completed:"GameScreen_typing_game__completed__GsVwc",errorShake:"GameScreen_errorShake__mpCyv",typing_game__menu_button:"GameScreen_typing_game__menu_button__BeIuc",typing_game__corner:"GameScreen_typing_game__corner__ZNH9_",typing_game__corner_tech:"GameScreen_typing_game__corner_tech__D_p3y",typing_game__scanlines:"GameScreen_typing_game__scanlines__JHzVF",typing_game__dot_pattern:"GameScreen_typing_game__dot_pattern__T7ekH",typing_game__performance:"GameScreen_typing_game__performance__Gbm_q",gameContainer:"GameScreen_gameContainer__nTReN GameScreen_typing_game__KJGki",gameHeader:"GameScreen_gameHeader__ZGkP6 GameScreen_typing_game__header__Ga3yt",gameArea:"GameScreen_gameArea__eDsqs GameScreen_typing_game__main__4y7Pv",typingProblem:"GameScreen_typingProblem__sx0Q3 GameScreen_typing_game__problem_text__mobG0",simpleTypingText:"GameScreen_simpleTypingText__hNzyI GameScreen_typing_game__input__i3j2Q"}},2937:e=>{e.exports={resultContainer:"ResultScreen_resultContainer__v7Rr_",resultHeader:"ResultScreen_resultHeader__79lqO",resultTitle:"ResultScreen_resultTitle__8lPNA",escHint:"ResultScreen_escHint__E1hWu",pulse:"ResultScreen_pulse__GNsrL",resultSubtitle:"ResultScreen_resultSubtitle__Rc3FZ",resultContent:"ResultScreen_resultContent__CZiXS",rankDisplay:"ResultScreen_rankDisplay__qK1SC",rankValue:"ResultScreen_rankValue__5m3F7",rankLabel:"ResultScreen_rankLabel__V1cz3",rankBackdrop:"ResultScreen_rankBackdrop__A4PAd",statsContainer:"ResultScreen_statsContainer__sNIeF",statCard:"ResultScreen_statCard__MNuue",statValue:"ResultScreen_statValue__4_0Bz",statLabel:"ResultScreen_statLabel__9eivu",keyStatCard:"ResultScreen_keyStatCard__yJWh2",rankCard:"ResultScreen_rankCard__mBR9f",rankGlow:"ResultScreen_rankGlow__BEN_P",buttonContainer:"ResultScreen_buttonContainer__ncbc3",resultButton:"ResultScreen_resultButton__3bC6W",scanlines:"ResultScreen_scanlines__GxIwx",dotPattern:"ResultScreen_dotPattern__FQ_Xu",cornerDecoration:"ResultScreen_cornerDecoration__zhSBD",cornerTech:"ResultScreen_cornerTech__tD_Wc"}},2942:e=>{e.exports={error_boundary:"ErrorBoundary_error_boundary__OeuY9",error_container:"ErrorBoundary_error_container__wBl5s",pulse:"ErrorBoundary_pulse__4MFhF",error_title:"ErrorBoundary_error_title__316mE",error_message:"ErrorBoundary_error_message__evYyd",error_actions:"ErrorBoundary_error_actions__E128T",error_details:"ErrorBoundary_error_details__ZEgUX"}},5521:e=>{e.exports={toast:"Toast_toast__TFOz_","toast--top-right":"Toast_toast--top-right__4gLzo","toast--top-left":"Toast_toast--top-left__GXMzd","toast--bottom-right":"Toast_toast--bottom-right__BeJey","toast--bottom-left":"Toast_toast--bottom-left__RmffP",toast__content:"Toast_toast__content__HEigP",toast__icon:"Toast_toast__icon__hk1HK",toast__message:"Toast_toast__message__x01b5",toast__close_button:"Toast_toast__close_button__lWYh7",toast__progress:"Toast_toast__progress__kelfW","toast--success":"Toast_toast--success__CJsOd","toast--error":"Toast_toast--error__6nyYC","toast--warning":"Toast_toast--warning__buF5o","toast--info":"Toast_toast--info__Appi3"}},6144:e=>{e.exports={sound_settings:"SoundSettings_sound_settings__242MH","sound_settings--compact":"SoundSettings_sound_settings--compact__SztGN",sound_settings__section:"SoundSettings_sound_settings__section__pMinV",sound_settings__title:"SoundSettings_sound_settings__title__vgHfM",sound_settings__toggle:"SoundSettings_sound_settings__toggle__92jaU",sound_settings__volume_control:"SoundSettings_sound_settings__volume_control__IY_hg",sound_settings__volume_label:"SoundSettings_sound_settings__volume_label__8ha20",sound_settings__slider:"SoundSettings_sound_settings__slider__hESee",sound_settings__volume_value:"SoundSettings_sound_settings__volume_value__K2RFQ"}},6527:e=>{e.exports={modal:"Modal_modal__EMSm6",modal__overlay:"Modal_modal__overlay__uHy3L",modal__content:"Modal_modal__content__amxE3",modal__header:"Modal_modal__header__pc_vI",modal__body:"Modal_modal__body__t3NVI",modal__title:"Modal_modal__title__ze_zJ",modal__close_button:"Modal_modal__close_button__z82qy","modal--small":"Modal_modal--small__ShPD5","modal--large":"Modal_modal--large__wydrS"}},7117:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>tf});var n=a(5155),s=a(2115),r=a(8334),o=a.n(r);let i={GENERAL:"general",POSITIVE:"positive"},l={EASY:"easy",NORMAL:"normal",HARD:"hard",ALL:"all"},c=[{displayText:"笑顔",kanaText:"えがお",category:i.POSITIVE,tags:["感情","ポジティブ"]},{displayText:"希望",kanaText:"きぼう",category:i.POSITIVE,tags:["感情","ポジティブ"]},{displayText:"元気",kanaText:"げんき",category:i.POSITIVE,tags:["状態","ポジティブ"]},{displayText:"勇気",kanaText:"ゆうき",category:i.POSITIVE,tags:["感情","ポジティブ"]},{displayText:"夢",kanaText:"ゆめ",category:i.POSITIVE,tags:["概念","ポジティブ"]},{displayText:"愛",kanaText:"あい",category:i.POSITIVE,tags:["感情","ポジティブ"]},{displayText:"光",kanaText:"ひかり",category:i.POSITIVE,tags:["自然","ポジティブ"]},{displayText:"前進",kanaText:"ぜんしん",category:i.POSITIVE,tags:["行動","ポジティブ"]},{displayText:"成功",kanaText:"せいこう",category:i.POSITIVE,tags:["達成","ポジティブ"]},{displayText:"努力",kanaText:"どりょく",category:i.POSITIVE,tags:["行動","ポジティブ"]},{displayText:"信頼",kanaText:"しんらい",category:i.POSITIVE,tags:["関係","ポジティブ"]},{displayText:"感謝",kanaText:"かんしゃ",category:i.POSITIVE,tags:["感情","ポジティブ"]},{displayText:"挑戦",kanaText:"ちょうせん",category:i.POSITIVE,tags:["行動","ポジティブ"]},{displayText:"自信",kanaText:"じしん",category:i.POSITIVE,tags:["感情","ポジティブ"]},{displayText:"幸福",kanaText:"こうふく",category:i.POSITIVE,tags:["状態","ポジティブ"]},{displayText:"成長",kanaText:"せいちょう",category:i.POSITIVE,tags:["変化","ポジティブ"]},{displayText:"平和",kanaText:"へいわ",category:i.POSITIVE,tags:["状態","ポジティブ"]},{displayText:"安心",kanaText:"あんしん",category:i.POSITIVE,tags:["感情","ポジティブ"]},{displayText:"笑い",kanaText:"わらい",category:i.POSITIVE,tags:["感情","ポジティブ"]},{displayText:"喜び",kanaText:"よろこび",category:i.POSITIVE,tags:["感情","ポジティブ"]},{displayText:"友情",kanaText:"ゆうじょう",category:i.POSITIVE,tags:["関係","ポジティブ"]},{displayText:"愛情",kanaText:"あいじょう",category:i.POSITIVE,tags:["感情","ポジティブ"]},{displayText:"誠実",kanaText:"せいじつ",category:i.POSITIVE,tags:["特性","ポジティブ"]},{displayText:"忍耐",kanaText:"にんたい",category:i.POSITIVE,tags:["特性","ポジティブ"]},{displayText:"力",kanaText:"ちから",category:i.POSITIVE,tags:["特性","ポジティブ"]},{displayText:"知恵",kanaText:"ちえ",category:i.POSITIVE,tags:["特性","ポジティブ"]},{displayText:"未来",kanaText:"みらい",category:i.POSITIVE,tags:["時間","ポジティブ"]},{displayText:"信念",kanaText:"しんねん",category:i.POSITIVE,tags:["考え","ポジティブ"]}],d=[{displayText:"今日も一日頑張ろう",kanaText:"きょうもいちにちがんばろう",category:i.POSITIVE,tags:["励まし","日常"]},{displayText:"笑顔で過ごそう",kanaText:"えがおですごそう",category:i.POSITIVE,tags:["励まし","ポジティブ"]},{displayText:"自分を信じて",kanaText:"じぶんをしんじて",category:i.POSITIVE,tags:["励まし","自己肯定"]},{displayText:"夢に向かって進もう",kanaText:"ゆめにむかってすすもう",category:i.POSITIVE,tags:["励まし","目標"]},{displayText:"小さな幸せを大切に",kanaText:"ちいさなしあわせをたいせつに",category:i.POSITIVE,tags:["励まし","幸福"]},{displayText:"前向きな気持ちで",kanaText:"まえむきなきもちで",category:i.POSITIVE,tags:["励まし","ポジティブ"]},{displayText:"新しい挑戦を楽しもう",kanaText:"あたらしいちょうせんをたのしもう",category:i.POSITIVE,tags:["励まし","挑戦"]},{displayText:"失敗は成功のもと",kanaText:"しっぱいはせいこうのもと",category:i.POSITIVE,tags:["格言","励まし"]},{displayText:"努力は必ず報われる",kanaText:"どりょくはかならずむくわれる",category:i.POSITIVE,tags:["励まし","努力"]},{displayText:"一歩ずつ前進しよう",kanaText:"いっぽずつぜんしんしよう",category:i.POSITIVE,tags:["励まし","成長"]},{displayText:"心に太陽を持とう",kanaText:"こころにたいようをもとう",category:i.POSITIVE,tags:["励まし","ポジティブ"]},{displayText:"自分らしく生きよう",kanaText:"じぶんらしくいきよう",category:i.POSITIVE,tags:["励まし","自己肯定"]},{displayText:"感謝の気持ちを忘れずに",kanaText:"かんしゃのきもちをわすれずに",category:i.POSITIVE,tags:["励まし","感謝"]},{displayText:"仲間と共に歩もう",kanaText:"なかまとともにあゆもう",category:i.POSITIVE,tags:["励まし","協力"]},{displayText:"笑う門には福来る",kanaText:"わらうかどにはふくきたる",category:i.POSITIVE,tags:["格言","ポジティブ"]},{displayText:"明日は明日の風が吹く",kanaText:"あしたはあしたのかぜがふく",category:i.POSITIVE,tags:["格言","未来"]},{displayText:"七転び八起き",kanaText:"ななころびやおき",category:i.POSITIVE,tags:["格言","挑戦"]},{displayText:"継続は力なり",kanaText:"けいぞくはちからなり",category:i.POSITIVE,tags:["格言","努力"]},{displayText:"雨降って地固まる",kanaText:"あめふってじかたまる",category:i.POSITIVE,tags:["格言","希望"]},{displayText:"思い立ったが吉日",kanaText:"おもいたったがきちじつ",category:i.POSITIVE,tags:["格言","行動"]},{displayText:"夢を持ち続けよう",kanaText:"ゆめをもちつづけよう",category:i.POSITIVE,tags:["励まし","夢"]},{displayText:"自分のペースで進もう",kanaText:"じぶんのぺーすですすもう",category:i.POSITIVE,tags:["励まし","自己肯定"]},{displayText:"小さな一歩が大きな成果に",kanaText:"ちいさないっぽがおおきなせいかに",category:i.POSITIVE,tags:["励まし","成長"]},{displayText:"前向きな言葉を口にしよう",kanaText:"まえむきなことばをくちにしよう",category:i.POSITIVE,tags:["励まし","ポジティブ"]},{displayText:"心の声に耳を傾けよう",kanaText:"こころのこえにみみをかたむけよう",category:i.POSITIVE,tags:["励まし","自己理解"]},{displayText:"自分を大切にしよう",kanaText:"じぶんをたいせつにしよう",category:i.POSITIVE,tags:["励まし","自己肯定"]},{displayText:"新しい自分に出会おう",kanaText:"あたらしいじぶんにであおう",category:i.POSITIVE,tags:["励まし","成長"]},{displayText:"可能性は無限大",kanaText:"かのうせいはむげんだい",category:i.POSITIVE,tags:["励まし","可能性"]},{displayText:"変化を楽しもう",kanaText:"へんかをたのしもう",category:i.POSITIVE,tags:["励まし","変化"]},{displayText:"自分の道を信じて",kanaText:"じぶんのみちをしんじて",category:i.POSITIVE,tags:["励まし","自己肯定"]}],u=[{displayText:"失敗は成功のもと",kanaText:"しっぱいはせいこうのもと",category:i.POSITIVE,tags:["格言","励まし"]},{displayText:"継続は力なり",kanaText:"けいぞくはちからなり",category:i.POSITIVE,tags:["格言","努力"]},{displayText:"七転び八起き",kanaText:"ななころびやおき",category:i.POSITIVE,tags:["格言","挑戦"]},{displayText:"雨降って地固まる",kanaText:"あめふってじかたまる",category:i.POSITIVE,tags:["格言","希望"]},{displayText:"思い立ったが吉日",kanaText:"おもいたったがきちじつ",category:i.POSITIVE,tags:["格言","行動"]},{displayText:"笑う門には福来る",kanaText:"わらうかどにはふくきたる",category:i.POSITIVE,tags:["格言","ポジティブ"]},{displayText:"明日は明日の風が吹く",kanaText:"あしたはあしたのかぜがふく",category:i.POSITIVE,tags:["格言","未来"]},{displayText:"自分を信じて前に進もう",kanaText:"じぶんをしんじてまえにすすもう",category:i.POSITIVE,tags:["励まし","自己肯定"]},{displayText:"努力は必ず報われる",kanaText:"どりょくはかならずむくわれる",category:i.POSITIVE,tags:["励まし","努力"]},{displayText:"夢を持ち続けよう",kanaText:"ゆめをもちつづけよう",category:i.POSITIVE,tags:["励まし","夢"]},{displayText:"心の声に耳を傾けよう",kanaText:"こころのこえにみみをかたむけよう",category:i.POSITIVE,tags:["励まし","自己理解"]},{displayText:"自分の可能性を信じて",kanaText:"じぶんのかのうせいをしんじて",category:i.POSITIVE,tags:["励まし","可能性"]},{displayText:"新しい挑戦を恐れずに",kanaText:"あたらしいちょうせんをおそれずに",category:i.POSITIVE,tags:["励まし","挑戦"]},{displayText:"自分の道を信じて進もう",kanaText:"じぶんのみちをしんじてすすもう",category:i.POSITIVE,tags:["励まし","自己肯定"]},{displayText:"毎日を笑顔で過ごそう",kanaText:"まいにちをえがおですごそう",category:i.POSITIVE,tags:["励まし","ポジティブ"]},{displayText:"自分を褒めてあげよう",kanaText:"じぶんをほめてあげよう",category:i.POSITIVE,tags:["励まし","自己肯定"]},{displayText:"新しい自分を見つけよう",kanaText:"あたらしいじぶんをみつけよう",category:i.POSITIVE,tags:["励まし","成長"]},{displayText:"自分の可能性を広げよう",kanaText:"じぶんのかのうせいをひろげよう",category:i.POSITIVE,tags:["励まし","可能性"]},{displayText:"一歩ずつ夢に近づこう",kanaText:"いっぽずつゆめにちかづこう",category:i.POSITIVE,tags:["励まし","目標"]},{displayText:"自分の心に正直に",kanaText:"じぶんのこころにしょうじきに",category:i.POSITIVE,tags:["励まし","自己理解"]},{displayText:"毎日を楽しもう",kanaText:"まいにちをたのしもう",category:i.POSITIVE,tags:["励まし","ポジティブ"]},{displayText:"自分の人生を大切に",kanaText:"じぶんのじんせいをたいせつに",category:i.POSITIVE,tags:["励まし","自己肯定"]},{displayText:"新しい発見を楽しもう",kanaText:"あたらしいはっけんをたのしもう",category:i.POSITIVE,tags:["励まし","成長"]},{displayText:"自分の成長を感じよう",kanaText:"じぶんのせいちょうをかんじよう",category:i.POSITIVE,tags:["励まし","成長"]},{displayText:"未来は自分の手で切り開こう",kanaText:"みらいはじぶんのてできりひらこう",category:i.POSITIVE,tags:["励まし","未来"]},{displayText:"困難は成長のチャンス",kanaText:"こんなんはせいちょうのちゃんす",category:i.POSITIVE,tags:["励まし","成長"]},{displayText:"自分の夢を信じて進もう",kanaText:"じぶんのゆめをしんじてすすもう",category:i.POSITIVE,tags:["励まし","夢"]},{displayText:"小さな一歩が大きな成果に",kanaText:"ちいさないっぽがおおきなせいかに",category:i.POSITIVE,tags:["励まし","成長"]},{displayText:"自分の力を信じて挑戦しよう",kanaText:"じぶんのちからをしんじてちょうせんしよう",category:i.POSITIVE,tags:["励まし","挑戦"]},{displayText:"前向きな気持ちで毎日を過ごそう",kanaText:"まえむきなきもちでまいにちをすごそう",category:i.POSITIVE,tags:["励まし","ポジティブ"]},{displayText:"自分の価値を信じて生きよう",kanaText:"じぶんのかちをしんじていきよう",category:i.POSITIVE,tags:["励まし","自己肯定"]},{displayText:"新しい自分に出会う旅に出よう",kanaText:"あたらしいじぶんにであうたびにでよう",category:i.POSITIVE,tags:["励まし","成長"]},{displayText:"自分の可能性を信じて進もう",kanaText:"じぶんのかのうせいをしんじてすすもう",category:i.POSITIVE,tags:["励まし","可能性"]},{displayText:"毎日を大切に生きよう",kanaText:"まいにちをたいせつにいきよう",category:i.POSITIVE,tags:["励まし","日常"]},{displayText:"自分の夢を追いかけ続けよう",kanaText:"じぶんのゆめをおいかけつづけよう",category:i.POSITIVE,tags:["励まし","夢"]},{displayText:"心の中の光を信じて進もう",kanaText:"こころのなかのひかりをしんじてすすもう",category:i.POSITIVE,tags:["励まし","希望"]},{displayText:"自分の歩幅で前に進もう",kanaText:"じぶんのほはばでまえにすすもう",category:i.POSITIVE,tags:["励まし","自己肯定"]},{displayText:"毎日を笑顔で過ごすことを忘れずに",kanaText:"まいにちをえがおですごすことをわすれずに",category:i.POSITIVE,tags:["励まし","ポジティブ"]},{displayText:"自分を大切にすることを忘れずに",kanaText:"じぶんをたいせつにすることをわすれずに",category:i.POSITIVE,tags:["励まし","自己肯定"]},{displayText:"新しい挑戦を楽しもう",kanaText:"あたらしいちょうせんをたのしもう",category:i.POSITIVE,tags:["励まし","挑戦"]},{displayText:"自分の成長を喜ぼう",kanaText:"じぶんのせいちょうをよろこぼう",category:i.POSITIVE,tags:["励まし","成長"]},{displayText:"未来への一歩を踏み出そう",kanaText:"みらいへのいっぽをふみだそう",category:i.POSITIVE,tags:["励まし","行動"]},{displayText:"自分の可能性を信じて挑戦しよう",kanaText:"じぶんのかのうせいをしんじてちょうせんしよう",category:i.POSITIVE,tags:["励まし","挑戦"]},{displayText:"毎日を楽しむことを忘れずに",kanaText:"まいにちをたのしむことをわすれずに",category:i.POSITIVE,tags:["励まし","ポジティブ"]},{displayText:"自分の夢を追い続けよう",kanaText:"じぶんのゆめをおいつづけよう",category:i.POSITIVE,tags:["励まし","夢"]},{displayText:"心の声に従って生きよう",kanaText:"こころのこえにしたがっていきよう",category:i.POSITIVE,tags:["励まし","自己理解"]},{displayText:"自分の人生を自分らしく生きよう",kanaText:"じぶんのじんせいをじぶんらしくいきよう",category:i.POSITIVE,tags:["励まし","自己肯定"]},{displayText:"新しい自分を見つける旅に出よう",kanaText:"あたらしいじぶんをみつけるたびにでよう",category:i.POSITIVE,tags:["励まし","成長"]},{displayText:"自分の可能性を信じて未来へ進もう",kanaText:"じぶんのかのうせいをしんじてみらいへすすもう",category:i.POSITIVE,tags:["励まし","可能性"]},{displayText:"毎日を笑顔で過ごすことを心がけよう",kanaText:"まいにちをえがおですごすことをこころがけよう",category:i.POSITIVE,tags:["励まし","ポジティブ"]},{displayText:"自分を信じて前に進む勇気を持とう",kanaText:"じぶんをしんじてまえにすすむゆうきをもとう",category:i.POSITIVE,tags:["励まし","勇気"]}],m=[...c,...d,...u],_=e=>{switch(e){case l.EASY:return c;case l.NORMAL:return d;case l.HARD:return u;default:return m}},g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=_(e);a&&(n=n.filter(e=>e.category===a));let s=[...n].sort(()=>Math.random()-.5);return t&&t>0&&t<s.length?s.slice(0,t):s};var p=a(9529),h=a(2219);let y=(0,s.createContext)(),f=()=>{let e=(0,s.useContext)(y);if(!e)throw Error("useGameContext must be used within a GameProvider");return e},x={MAIN_MENU:"MAIN_MENU",GAME:"GAME",SETTINGS:"SETTINGS",CREDITS:"CREDITS",RESULT:"RESULT",RANKING:"RANKING"},b={difficulty:l.NORMAL,soundEnabled:!0,bgmEnabled:!0,bgmVolume:.5,sfxEnabled:!0,sfxVolume:1,requiredProblemCount:8,highPerformanceMode:!0,useRefactoredGameScreen:!1},S={level:1,solvedCount:0,currentProblemIndex:0,typingProgress:"",mistakes:0,isGameOver:!1,isGameClear:!1,playerName:"プレイヤー",correctKeyCount:0,startTime:null,endTime:null,hasStartedTyping:!1,problemKPMs:[],currentProblemStartTime:null,currentProblemKeyCount:0},v=e=>{let{children:t}=e,[a,r]=(0,s.useState)(x.MAIN_MENU),[o,i]=(0,s.useState)(b),[c,d]=(0,s.useState)([]),[u,m]=(0,s.useState)({...S});(0,s.useEffect)(()=>{try{let e=h.Ay.getGameSettings(b);i(e);let t=h.Ay.getUsername();t&&m(e=>({...e,playerName:t}));let a=g(e.difficulty);d(a),h.Ay.applyBackgroundFromStorage(),h.Ay.saveLastPlayedDate(),console.log("[GameContext] サウンドシステムの初期化を実行..."),p.A.initializeAllSounds().then(e=>{e&&console.log("[GameContext] 効果音の先行ロード完了")}),console.log("[GameContext] 初期化完了")}catch(e){console.error("[GameContext] 初期化エラー:",e)}},[]),(0,s.useEffect)(()=>{try{h.Ay.saveGameSettings(o);let e=g(o.difficulty);d(e),console.log("[GameContext] 難易度「".concat(o.difficulty,"」に更新"))}catch(e){console.error("[GameContext] 難易度更新エラー:",e)}},[o.difficulty]),(0,s.useEffect)(()=>{try{let e=o.soundEnabled;p.A.setSfxEnabled(e&&o.sfxEnabled),p.A.setSfxVolume(o.sfxVolume),p.A.setBgmEnabled(e&&o.bgmEnabled),p.A.setBgmVolume(o.bgmVolume),console.log("[GameContext] サウンド設定更新: SFX=".concat(e&&o.sfxEnabled,", BGM=").concat(e&&o.bgmEnabled))}catch(e){console.error("[GameContext] サウンド設定更新エラー:",e)}},[o.soundEnabled,o.sfxEnabled,o.sfxVolume,o.bgmEnabled,o.bgmVolume]),(0,s.useEffect)(()=>{try{h.Ay.isAdminMode()&&(h.Ay.applyScreenBackground(a),console.log("[GameContext] 画面背景更新: ".concat(a)))}catch(e){console.error("[GameContext] 背景更新エラー:",e)}},[a]);let _=(0,s.useCallback)(()=>{try{let e=o.requiredProblemCount||b.requiredProblemCount;console.log("[GameContext] ゲームリセット - 難易度設定:",{設定難易度:o.difficulty,問題数:e});let t=g(o.difficulty,e);d(t);let a=t&&t.length>0?t[0]:null;if(!a)return void console.error("[ERROR] 初期問題を設定できません。問題データが不足しています。");let n={...S,currentProblem:a,problems:t,requiredProblemCount:e,playerName:h.Ay.getUsername()||S.playerName,difficulty:o.difficulty,category:"all"};m(n),console.log("[GameContext] ゲームリセット完了",n)}catch(e){console.error("[GameContext] ゲームリセットエラー:",e)}},[o.difficulty,o.requiredProblemCount]),f=(0,s.useCallback)(e=>{Object.values(x).includes(e)?(e===x.GAME&&_(),r(e),console.log("[GameContext] 画面遷移: ".concat(e))):console.error("[ERROR] 無効な画面: ".concat(e))},[_]),v=(0,s.useCallback)(()=>c[u.currentProblemIndex]||null,[c,u.currentProblemIndex]),k=(0,s.useCallback)(e=>{e&&"string"==typeof e&&(m(t=>({...t,playerName:e})),h.Ay.saveUsername(e),console.log("[GameContext] ユーザー名を設定: ".concat(e)))},[]),T=(0,s.useCallback)(e=>{try{let t={...o,...e};i(t),h.Ay.saveGameSettings(t),console.log("[GameContext] 設定を更新しました")}catch(e){console.error("[GameContext] 設定更新エラー:",e)}},[o]),P=(0,s.useCallback)(e=>{try{if(e&&e.kpm)return h.Ay.saveHighScore(o.difficulty,e),console.log("[GameContext] ゲーム結果保存: KPM=".concat(e.kpm)),!0;return!1}catch(e){return console.error("[GameContext] ゲーム結果保存エラー:",e),!1}},[o.difficulty]),E=(0,s.useCallback)(e=>{Object.values(l).includes(e)?(T({difficulty:e}),console.log("[GameContext] 難易度変更: ".concat(e))):console.error("[ERROR] 無効な難易度: ".concat(e))},[T]),C={currentScreen:a,navigateTo:f,settings:o,setSettings:T,gameState:u,setGameState:m,resetGame:_,problems:c,getCurrentProblem:v,setUsername:k,saveGameResult:P,changeDifficulty:E,isAdminMode:h.Ay.isAdminMode};return(0,n.jsx)(y.Provider,{value:C,children:t})};var k=a(5561),T=a(760);let P={SOUND_ENABLED:"sound_soundEnabled",BGM_ENABLED:"sound_bgmEnabled",BGM_VOLUME:"sound_bgmVolume",SFX_ENABLED:"sound_sfxEnabled",SFX_VOLUME:"sound_sfxVolume"},E={soundEnabled:!0,bgmEnabled:!0,bgmVolume:.5,sfxEnabled:!0,sfxVolume:1},C=(0,s.createContext)(null),N=()=>{let e=(0,s.useContext)(C);if(!e)throw Error("useSoundContext must be used within a SoundProvider");return e},I=e=>{let{children:t}=e,[a,r]=(0,s.useState)(E),o=(0,s.useCallback)(()=>{if(!window.localStorage)return E;try{let e={soundEnabled:"true"===localStorage.getItem(P.SOUND_ENABLED),bgmEnabled:"true"===localStorage.getItem(P.BGM_ENABLED),bgmVolume:parseFloat(localStorage.getItem(P.BGM_VOLUME)||"0.5"),sfxEnabled:"true"===localStorage.getItem(P.SFX_ENABLED),sfxVolume:parseFloat(localStorage.getItem(P.SFX_VOLUME)||"1.0")},t={soundEnabled:null!==localStorage.getItem(P.SOUND_ENABLED)?e.soundEnabled:E.soundEnabled,bgmEnabled:null!==localStorage.getItem(P.BGM_ENABLED)?e.bgmEnabled:E.bgmEnabled,bgmVolume:isNaN(e.bgmVolume)?E.bgmVolume:Math.max(0,Math.min(1,e.bgmVolume)),sfxEnabled:null!==localStorage.getItem(P.SFX_ENABLED)?e.sfxEnabled:E.sfxEnabled,sfxVolume:isNaN(e.sfxVolume)?E.sfxVolume:Math.max(0,Math.min(1,e.sfxVolume))};return console.log("[SoundContext] 設定を読み込みました:",t),t}catch(e){return console.error("[SoundContext] 設定の読み込みに失敗しました:",e),E}},[]),i=(0,s.useCallback)(e=>{if(!window.localStorage)return!1;try{return localStorage.setItem(P.SOUND_ENABLED,e.soundEnabled),localStorage.setItem(P.BGM_ENABLED,e.bgmEnabled),localStorage.setItem(P.BGM_VOLUME,e.bgmVolume),localStorage.setItem(P.SFX_ENABLED,e.sfxEnabled),localStorage.setItem(P.SFX_VOLUME,e.sfxVolume),console.log("[SoundContext] 設定を保存しました:",e),!0}catch(e){return console.error("[SoundContext] 設定の保存に失敗しました:",e),!1}},[]);(0,s.useEffect)(()=>{let e=o();r(e),p.A.setSfxEnabled(e.soundEnabled&&e.sfxEnabled),p.A.setSfxVolume(e.sfxVolume),p.A.setBgmEnabled(e.soundEnabled&&e.bgmEnabled),p.A.setBgmVolume(e.bgmVolume),console.log("[SoundContext] SoundUtilsに設定を適用しました"),p.A.initializeAllSounds().then(e=>{e?console.log("[SoundContext] 基本効果音のプリロードに成功しました"):(console.warn("[SoundContext] 一部の効果音のロードに失敗しました"),setTimeout(()=>{Promise.all([p.A.loadSound("success",p.A.soundPresets.success),p.A.loadSound("error",p.A.soundPresets.error)]).catch(e=>console.warn("[SoundContext] タイピング音声の再ロードも失敗:",e))},2e3))}).catch(e=>{console.error("[SoundContext] 効果音の初期化中にエラーが発生しました:",e)})},[o]);let l=(0,s.useCallback)(e=>{r(t=>{let a={...t,...e};return("soundEnabled"in e||"sfxEnabled"in e)&&p.A.setSfxEnabled(a.soundEnabled&&a.sfxEnabled),"sfxVolume"in e&&p.A.setSfxVolume(a.sfxVolume),("soundEnabled"in e||"bgmEnabled"in e)&&p.A.setBgmEnabled(a.soundEnabled&&a.bgmEnabled),"bgmVolume"in e&&p.A.setBgmVolume(a.bgmVolume),i(a),a})},[i]),c=(0,s.useCallback)(()=>{l({soundEnabled:!a.soundEnabled})},[a.soundEnabled,l]),d=(0,s.useCallback)(()=>{l({bgmEnabled:!a.bgmEnabled})},[a.bgmEnabled,l]),u=(0,s.useCallback)(()=>{l({sfxEnabled:!a.sfxEnabled})},[a.sfxEnabled,l]),m=(0,s.useCallback)(e=>{l({bgmVolume:Math.max(0,Math.min(1,e))})},[l]),_=(0,s.useCallback)(e=>{l({sfxVolume:Math.max(0,Math.min(1,e))})},[l]),g=(0,s.useCallback)(()=>{a.soundEnabled&&a.sfxEnabled&&p.A.playSound("button")},[a.soundEnabled,a.sfxEnabled]),h={soundEnabled:a.soundEnabled,bgmEnabled:a.bgmEnabled,bgmVolume:a.bgmVolume,sfxEnabled:a.sfxEnabled,sfxVolume:a.sfxVolume,toggleSound:c,toggleBGM:d,toggleSFX:u,setBGMVolume:m,setSFXVolume:_,updateSoundSettings:l,playButtonSound:g,soundSystem:p.A};return(0,n.jsx)(C.Provider,{value:h,children:t})};var M=a(9254),j=a.n(M),A=a(6766),w=a(6527),R=a.n(w);let B=e=>{let{isOpen:t,onClose:a,title:r,children:o,size:i="medium",disableEscKey:l=!1,disableOverlayClick:c=!1,className:d=""}=e,u={base:R().modal,size:"medium"!==i?R()["modal--".concat(i)]:"",custom:d},m=(0,s.useCallback)(e=>{"Escape"===e.key&&t&&!l&&(e.preventDefault(),a())},[t,a,l]),_=(0,s.useCallback)(e=>{c||a()},[a,c]);return(0,s.useEffect)(()=>(t&&(document.addEventListener("keydown",m),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",m),document.body.style.overflow=""}),[t,m]),(0,n.jsx)(T.N,{children:t&&(0,n.jsx)("div",{className:[u.base,u.size,u.custom].filter(Boolean).join(" "),role:"dialog","aria-labelledby":"modal-title","aria-modal":"true",children:(0,n.jsx)(k.P.div,{className:R().modal__overlay,onClick:_,...{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2}},children:(0,n.jsxs)(k.P.div,{className:R().modal__content,onClick:e=>{e.stopPropagation()},...{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:400,damping:30,mass:1}},children:[(0,n.jsxs)("div",{className:R().modal__header,children:[(0,n.jsx)("h2",{className:R().modal__title,id:"modal-title",children:r}),(0,n.jsx)("button",{className:R().modal__close_button,onClick:a,"aria-label":"閉じる",children:"✕"})]}),(0,n.jsx)("div",{className:R().modal__body,children:o})]})})})})};var G=a(2574),O=a.n(G);let L={whileTap:{scale:.95},whileHover:{scale:1.05},transition:{type:"spring",stiffness:400,damping:25}},F=e=>{let{isOn:t,onToggle:a,disabled:r=!1,className:o="",onText:i="ON",offText:l="OFF"}=e,c=(0,s.useMemo)(()=>{let e=t?"toggle--on":"toggle--off";return[O().button,O().toggle,O()[e],r?O()["button--disabled"]:"",o].filter(Boolean).join(" ")},[t,r,o]);return(0,n.jsx)(k.P.button,{className:c,onClick:a,disabled:r,whileTap:r?void 0:L.whileTap,whileHover:r?void 0:L.whileHover,transition:L.transition,style:{},"aria-pressed":t,role:"switch",children:t?i:l})},D=e=>{let{variant:t="default",size:a="medium",round:r=!1,active:o=!1,icon:i,onClick:l,disabled:c=!1,className:d="",loading:u,children:m,..._}=e,g=(0,s.useMemo)(()=>{let e=["button"];return"default"!==t&&e.push("button--".concat(t)),"medium"!==a&&e.push("button--".concat(a)),r&&e.push("button--round"),o&&e.push("button--active"),u&&e.push("button--loading"),e.map(e=>O()[e]).filter(Boolean).concat(d).join(" ")},[t,a,r,o,d,u]),p=c||u,h={..._};return delete h.loading,(0,n.jsxs)(k.P.button,{className:g,onClick:l,disabled:p,whileTap:p?void 0:L.whileTap,whileHover:p?void 0:L.whileHover,transition:L.transition,style:{},...h,children:[u&&(0,n.jsx)("span",{className:O().button__spinner,children:(0,n.jsx)("span",{className:O().spinner})}),i&&(0,n.jsx)("span",{className:O().button__icon,children:i}),m]})};var V=a(6144),K=a.n(V);let z=e=>{let{className:t="",showMasterToggle:a=!0,compact:r=!1,idPrefix:o=""}=e,{soundEnabled:i,bgmEnabled:l,bgmVolume:c,sfxEnabled:d,sfxVolume:u,toggleSound:m,toggleBGM:_,toggleSFX:g,setBGMVolume:p,setSFXVolume:h,playButtonSound:y}=N(),f=(0,s.useCallback)(()=>{y()},[y]),x=(0,s.useCallback)(()=>{y()},[y]),b=(0,s.useCallback)(e=>{p(parseFloat(e.target.value))},[p]),S=(0,s.useCallback)(e=>{h(parseFloat(e.target.value))},[h]),v="".concat(K().sound_settings," ").concat(t," ").concat(r?K()["sound_settings--compact"]:""),k=K().sound_settings__section,T=K().sound_settings__title,P=K().sound_settings__toggle,E=K().sound_settings__volume_control,C=K().sound_settings__volume_label,I=K().sound_settings__slider,M=K().sound_settings__volume_value;return(0,n.jsxs)("div",{className:v,"data-testid":"sound-settings",children:[a&&(0,n.jsxs)("div",{className:k,children:[(0,n.jsx)("h3",{className:T,id:"".concat(o,"sound-title"),children:"サウンド"}),(0,n.jsx)("div",{className:P,children:(0,n.jsx)(F,{isOn:i,onToggle:m,"aria-labelledby":"".concat(o,"sound-title")})})]}),(0,n.jsxs)("div",{className:k,children:[(0,n.jsx)("h3",{className:T,id:"".concat(o,"bgm-title"),children:"BGM"}),(0,n.jsx)("div",{className:P,children:(0,n.jsx)(F,{isOn:l,onToggle:_,disabled:!i,"aria-labelledby":"".concat(o,"bgm-title")})}),(0,n.jsxs)("div",{className:E,children:[(0,n.jsx)("span",{className:C,id:"".concat(o,"bgm-volume-label"),children:"音量:"}),(0,n.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:null!=c?c:.5,onChange:b,onMouseUp:x,onTouchEnd:x,className:I,disabled:!i||!l,"aria-labelledby":"".concat(o,"bgm-volume-label"),"aria-valuenow":Math.round((null!=c?c:.5)*100),"aria-valuemin":0,"aria-valuemax":100}),(0,n.jsxs)("span",{className:M,children:[Math.round((null!=c?c:.5)*100),"%"]})]})]}),(0,n.jsxs)("div",{className:k,children:[(0,n.jsx)("h3",{className:T,id:"".concat(o,"sfx-title"),children:"効果音"}),(0,n.jsx)("div",{className:P,children:(0,n.jsx)(F,{isOn:d,onToggle:g,disabled:!i,"aria-labelledby":"".concat(o,"sfx-title")})}),(0,n.jsxs)("div",{className:E,children:[(0,n.jsx)("span",{className:C,id:"".concat(o,"sfx-volume-label"),children:"音量:"}),(0,n.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:null!=u?u:1,onChange:S,onMouseUp:f,onTouchEnd:f,className:I,disabled:!i||!d,"aria-labelledby":"".concat(o,"sfx-volume-label"),"aria-valuenow":Math.round((null!=u?u:1)*100),"aria-valuemin":0,"aria-valuemax":100}),(0,n.jsxs)("span",{className:M,children:[Math.round((null!=u?u:1)*100),"%"]})]})]})]})};var U=a(8637),H=a.n(U);let q=e=>{let{credits:t,showAcknowledgements:a=!1,creditSectionClass:s,sectionTitleClass:r,creditTextClass:o,creditsListClass:i,creditsItemClass:l}=e,c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[t.development&&(0,n.jsxs)(k.P.div,{className:s,initial:"hidden",animate:"visible",variants:c,transition:{duration:.5,delay:.1},children:[(0,n.jsx)("h3",{className:r,children:t.development.title}),t.development.credits.map((e,t)=>(0,n.jsx)("p",{className:o,children:e},"dev-".concat(t)))]}),t.design&&(0,n.jsxs)(k.P.div,{className:s,initial:"hidden",animate:"visible",variants:c,transition:{duration:.5,delay:.2},children:[(0,n.jsx)("h3",{className:r,children:t.design.title}),t.design.credits.map((e,t)=>(0,n.jsx)("p",{className:o,children:e},"design-".concat(t)))]}),t.technology&&(0,n.jsxs)(k.P.div,{className:s,initial:"hidden",animate:"visible",variants:c,transition:{duration:.5,delay:.3},children:[(0,n.jsx)("h3",{className:r,children:t.technology.title}),t.technology.credits.map((e,t)=>(0,n.jsx)("p",{className:o,children:e},"tech-".concat(t)))]}),t.resources&&(0,n.jsxs)(k.P.div,{className:s,initial:"hidden",animate:"visible",variants:c,transition:{duration:.5,delay:.4},children:[(0,n.jsx)("h3",{className:r,children:t.resources.title}),(0,n.jsx)("ul",{className:i,children:t.resources.listItems.map((e,t)=>(0,n.jsx)("li",{className:l,children:e},"resource-".concat(t)))})]}),a&&t.acknowledgements&&(0,n.jsxs)(k.P.div,{className:s,initial:"hidden",animate:"visible",variants:c,transition:{duration:.5,delay:.5},children:[(0,n.jsx)("h3",{className:r,children:t.acknowledgements.title}),(0,n.jsx)("p",{className:o,children:t.acknowledgements.text})]}),t.license&&(0,n.jsxs)(k.P.div,{className:s,initial:"hidden",animate:"visible",variants:c,transition:{duration:.5,delay:.6},style:{marginTop:"10px"},children:[(0,n.jsx)("h3",{className:r,children:t.license.title}),(0,n.jsx)("p",{className:o,children:t.license.text})]})]})};q.propTypes={credits:H().shape({development:H().shape({title:H().string.isRequired,credits:H().arrayOf(H().string).isRequired}),design:H().shape({title:H().string.isRequired,credits:H().arrayOf(H().string).isRequired}),technology:H().shape({title:H().string.isRequired,credits:H().arrayOf(H().string).isRequired}),resources:H().shape({title:H().string.isRequired,listItems:H().arrayOf(H().string).isRequired}),acknowledgements:H().shape({title:H().string.isRequired,text:H().string.isRequired}),license:H().shape({title:H().string.isRequired,text:H().string.isRequired})}).isRequired,showAcknowledgements:H().bool,creditSectionClass:H().string,sectionTitleClass:H().string,creditTextClass:H().string,creditsListClass:H().string,creditsItemClass:H().string};let J={development:{title:"企画・開発",credits:["カフェイン中毒","Google大先生"]},license:{title:"ライセンス",text:"\xa9 2024 Manaby Typing Game. All Rights Reserved."}};var Y=a(9344),Z=a(3055),W=a(2201);let X=()=>{let[e,t]=(0,s.useState)(!1),a=(0,s.useCallback)(()=>{t(!0)},[]),n=(0,s.useCallback)(()=>{t(!1)},[]);return{showSettingsModal:e,setShowSettingsModal:t,openSettingsModal:a,closeSettingsModal:n}},Q=()=>{let{settings:e,setSettings:t}=f(),{soundSystem:a,soundEnabled:r,sfxEnabled:o,bgmEnabled:i}=N(),{goToScreen:l,isTransitioning:c}=e0(),d=(0,s.useRef)(null),{isActive:u,recordUXElement:m,recordGameEvent:_}=(0,Y.Rz)(),[g,p]=(0,s.useState)(!1),{showSettingsModal:h,setShowSettingsModal:y,openSettingsModal:b,closeSettingsModal:S}=X();(0,s.useEffect)(()=>{u&&m({type:"component-mount",componentName:"MainMenu",timestamp:Date.now()}),a.initializeAllSounds().then(()=>{u&&_({type:"sound-system-initialized",status:"success"})}).catch(e=>{console.error("効果音の初期ロードに失敗:",e),u&&_({type:"sound-system-error",errorMessage:e.message})}),r&&i?(a.playBgm("lobby",!0),console.log("[MainMenu] BGM再生開始: soundEnabled="+r+", bgmEnabled="+i)):(a.stopBgm(),console.log("[MainMenu] BGM再生停止: soundEnabled="+r+", bgmEnabled="+i));let e=setInterval(()=>{let e=document.querySelector(".".concat(j().mainContainer));e&&setTimeout(()=>{e.classList.add(j().scanlineEffect),setTimeout(()=>{e.classList.remove(j().scanlineEffect)},1500)},3e3*Math.random())},8e3);return()=>{u&&m({type:"component-unmount",componentName:"MainMenu",timestamp:Date.now(),duration:Date.now()-performance.now()}),clearInterval(e),Z.A&&"function"==typeof Z.A.reset&&(console.log("[MainMenu] コンポーネントのアンマウント時にWorkerをリセットします"),Z.A.reset().catch(e=>{console.warn("[MainMenu] Worker終了中にエラーが発生しました:",e)}))}},[a,r,i,u,m,_]);let v=(0,s.useCallback)(()=>{r&&o&&a.playSound("button")},[r,o,a]),T=(0,s.useCallback)(a=>{v(),u&&_({type:"difficulty-changed",previousDifficulty:e.difficulty,newDifficulty:a}),t({...e,difficulty:a})},[v,u,_,e,t]),P=(0,s.useCallback)(()=>{c||(u&&_({type:"game-started",difficulty:e.difficulty,timestamp:Date.now()}),l(x.GAME))},[c,u,_,e.difficulty,l]),E=(0,s.useCallback)(()=>{v(),u&&m({type:"modal-open",modalName:"settings",timestamp:Date.now()}),b()},[v,u,m,b]),C=(0,s.useCallback)(()=>{v(),u&&m({type:"modal-open",modalName:"credits",timestamp:Date.now()}),p(!0)},[v,u,m]),I=(0,s.useCallback)(()=>{v(),u&&m({type:"modal-close",modalName:g?"credits":"settings",timestamp:Date.now()}),p(!1),h&&S()},[v,u,m,g,S,h]),M={easy:"やさしい",normal:"ふつう",hard:"むずかしい"},[w,R]=(0,s.useState)(!1);(0,s.useCallback)(()=>{v(),R(!w),u&&m({type:"menu-toggle",menuName:"difficulty-selector",state:w?"closed":"open",timestamp:Date.now()})},[v,w,u,m]),(0,s.useCallback)(e=>{v(),T(e),R(!1),u&&m({type:"menu-select",menuName:"difficulty-selector",selectedValue:e,timestamp:Date.now()})},[v,T,u,m]),(0,s.useEffect)(()=>{let e=e=>{w&&!e.target.closest(".".concat(j().difficultySelector))&&(R(!1),u&&m({type:"menu-close",menuName:"difficulty-selector",reason:"outside-click",timestamp:Date.now()}))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[w,u,m]);let G={hidden:{y:20,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",stiffness:300}}},O=(0,s.useCallback)(()=>(0,n.jsxs)("div",{className:j().settingsContainer,children:[(0,n.jsxs)("div",{className:j().settingsSection,children:[(0,n.jsxs)("div",{className:j().sectionHeader,children:[(0,n.jsx)("div",{className:j().sectionDecoration}),(0,n.jsx)("h3",{className:j().sectionTitle,children:"音声設定"})]}),(0,n.jsx)("div",{className:j().settingsPanel,children:(0,n.jsx)(z,{className:j().enhancedSoundSettings,showVolumeIndicator:!0,showEffects:!0})})]}),(0,n.jsxs)("div",{className:j().settingsSection,children:[(0,n.jsx)("h3",{className:j().settingsSectionTitle,children:"パフォーマンス設定"}),(0,n.jsxs)("div",{className:j().settingsRow,children:[(0,n.jsxs)("label",{className:j().settingsLabel,children:["高パフォーマンスモード",(0,n.jsx)("small",{className:j().settingsSubLabel,children:"（入力レスポンスを最適化します）"})]}),(0,n.jsxs)("div",{className:j().settingsControl,children:[(0,n.jsx)("input",{type:"checkbox",checked:!0,disabled:!0,className:j().settingsCheckbox}),(0,n.jsx)("span",{className:j().checkboxLabel,children:"常に有効"})]})]})]}),(0,n.jsxs)("div",{className:j().keyboardShortcuts,children:[(0,n.jsxs)("div",{className:j().shortcutsHeader,children:[(0,n.jsx)("div",{className:j().shortcutsDecoration}),(0,n.jsx)("span",{children:"キーボードショートカット"})]}),(0,n.jsxs)("div",{className:j().shortcutsList,children:[(0,n.jsxs)("div",{className:j().shortcutItem,children:[(0,n.jsx)("kbd",{children:"Space"}),(0,n.jsx)("span",{children:"ゲーム開始"})]}),(0,n.jsxs)("div",{className:j().shortcutItem,children:[(0,n.jsx)("kbd",{children:"S"}),(0,n.jsx)("span",{children:"設定を開く"})]}),(0,n.jsxs)("div",{className:j().shortcutItem,children:[(0,n.jsx)("kbd",{children:"R"}),(0,n.jsx)("span",{children:"ランキング表示"})]}),(0,n.jsxs)("div",{className:j().shortcutItem,children:[(0,n.jsx)("kbd",{children:"ESC"}),(0,n.jsx)("span",{children:"メニューに戻る"})]})]})]})]}),[e.difficulty,t,T]),L=(0,s.useCallback)(()=>(0,n.jsx)(q,{credits:J,showAcknowledgements:!1,creditSectionClass:j().creditSection,sectionTitleClass:j().sectionTitle,creditTextClass:j().creditText,creditsListClass:j().creditsList,creditsItemClass:j().creditsItem}),[]);return(0,s.useEffect)(()=>{let e=e=>{if(h||g)return"Escape"===e.key?void I():void 0;!c&&(" "===e.key||"Space"===e.code?(e.preventDefault(),v(),u&&m({type:"keyboard-shortcut",key:"Space",action:"start-game",timestamp:Date.now()}),l(x.GAME)):"s"!==e.key&&"S"!==e.key||e.ctrlKey||e.metaKey?"c"!==e.key&&"C"!==e.key||e.ctrlKey||e.metaKey?"r"!==e.key&&"R"!==e.key||e.ctrlKey||e.metaKey||(e.preventDefault(),v(),u&&m({type:"keyboard-shortcut",key:"R",action:"open-ranking",timestamp:Date.now()}),l(x.RANKING)):(e.preventDefault(),v(),u&&m({type:"keyboard-shortcut",key:"C",action:"open-credits",timestamp:Date.now()}),p(!0)):(e.preventDefault(),v(),u&&m({type:"keyboard-shortcut",key:"S",action:"open-settings",timestamp:Date.now()}),b()))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[c,h,g,v,u,m,l,b,I]),(0,n.jsxs)("div",{className:j().mainContainer,ref:d,children:[(0,n.jsx)(()=>(0,n.jsx)(n.Fragment,{}),{})," ",(0,n.jsxs)("div",{className:j().shipIdBadge,children:[(0,n.jsx)("div",{className:j().shipIdLabel,children:"MANABY SPACE CREW"}),(0,n.jsx)("div",{className:j().shipIdValue,children:"SRX-2025"})]}),(0,n.jsx)("div",{className:j().cornerButtons,children:(0,n.jsx)("button",{className:j().iconButton,onClick:E,"aria-label":"設定",children:(0,n.jsx)("div",{className:j().gearIcon,children:(0,n.jsx)("div",{className:j().gearInner})})})}),(0,n.jsx)(k.P.div,{className:j().mascotContainer,initial:{x:-100,opacity:0},animate:{x:0,opacity:1},transition:{type:"spring",delay:.5,duration:1},onAnimationComplete:()=>{u&&m({type:"animation-complete",elementName:"mascot",timestamp:Date.now()})},children:(0,n.jsx)("img",{src:(0,W.aF)("/images/manabymario.png"),alt:"Manaby Mario Mascot",className:j().mascotImage})}),(0,n.jsxs)(k.P.div,{className:j().menuContainer,variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1,delayChildren:.3}}},initial:"hidden",animate:"show",children:[(0,n.jsxs)(k.P.div,{className:j().titleContainer,variants:G,children:[(0,n.jsx)("h1",{className:"screen-title ".concat(j().title),children:"manaby typing"}),(0,n.jsxs)("div",{className:j().subTitleContainer,children:[(0,n.jsx)("span",{className:j().subTitle,children:"SPACE CREW TYPING MISSION"}),(0,n.jsx)("div",{className:j().titleDecoration})]})]}),(0,n.jsx)(k.P.div,{className:j().logoContainer,variants:G,whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,n.jsx)("button",{className:j().startButton,onClick:P,"aria-label":"ゲームを開始する",children:(0,n.jsx)(A.default,{src:(0,W.aF)("/images/manabylogodot.png"),alt:"Start Game",width:200,height:200,className:j().logoImage,priority:!0,unoptimized:!0})})}),(0,n.jsx)(k.P.div,{className:j().difficultyToggleGroup,variants:G,children:Object.keys(M).map(t=>(0,n.jsx)("button",{className:"".concat(j().difficultyToggleButton," ").concat(e.difficulty===t?j().active:""),onClick:()=>T(t),"aria-pressed":e.difficulty===t,children:(0,n.jsx)("span",{className:j().btnText,children:M[t]})},t))}),(0,n.jsx)(k.P.div,{className:j().instructions,variants:G,children:(0,n.jsx)("div",{className:j().instructionText,children:"ロゴをクリックまたはSPACEキーでスタート！"})})]})," ",(0,n.jsx)("div",{className:j().earlyAccessBadge,"aria-label":"アーリーアクセスバージョン",children:"Early Access v0.9"}),(0,n.jsx)("button",{className:j().creditButton,onClick:C,"aria-label":"クレジット",children:(0,n.jsx)("div",{className:j().infoIcon,children:"ⓘ"})}),(0,n.jsx)(B,{isOpen:h,onClose:I,title:"設定",children:O()})," ",(0,n.jsx)(B,{isOpen:g,onClose:I,title:"クレジット",disableEscKey:!1,disableOverlayClick:!1,children:L()}),!1," "]})};var $=a(2610),ee=a.n($),et=a(542),ea=a.n(et),en=a(2942),es=a.n(en);class er extends s.Component{static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?this.props.fallback?this.props.fallback({error:this.state.error,resetError:this.resetErrorState}):(0,n.jsx)("div",{className:es().error_boundary,children:(0,n.jsxs)("div",{className:es().error_container,children:[(0,n.jsx)("h2",{className:es().error_title,children:"予期せぬエラーが発生しました"}),(0,n.jsx)("p",{className:es().error_message,children:"申し訳ありません。プログラムの実行中に問題が発生しました。"}),(0,n.jsxs)("div",{className:es().error_actions,children:[(0,n.jsx)(D,{onClick:this.resetErrorState,variant:"primary",children:"再試行"}),this.props.onReturnToMenu&&(0,n.jsx)(D,{onClick:this.props.onReturnToMenu,variant:"secondary",children:"メニューに戻る"})]}),!1]})}):this.props.children}constructor(e){super(e),this.resetErrorState=()=>{this.setState({hasError:!1,error:null,errorInfo:null})},this.state={hasError:!1,error:null,errorInfo:null}}}function eo(e){let{children:t,fallback:a}=e,{goToScreen:s}=f();return(0,n.jsx)(er,{fallback:a,onReturnToMenu:()=>{s(x.MAIN_MENU)},children:t})}var ei=a(1774),el=a.n(ei),ec=a(8826),ed=a.n(ec);let eu=Object.freeze({width:800,height:600,fontFamily:"'SF Mono', Monaco, Consolas, monospace",fontSize:24,backgroundColor:"#1a1a1a",textColor:"#ffffff",typedColor:"#88FF88",highlightColor:"#FFB41E",errorColor:"#ff3333",nextCharColor:"#88FF88",keyboardHeight:200,animationDuration:150,showErrorHighlight:!1,useOffscreenCanvas:!0,useImageCaching:!0,preRenderChars:!0,useRequestAnimationFrame:!0});class em{initialize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||!(e instanceof HTMLCanvasElement))throw Error("有効なcanvas要素が必要です");return this.canvas=e,this.ctx=e.getContext("2d",{alpha:!1,desynchronized:!0}),this.gameState=t,this._setupCanvasSize(),this.settings.useOffscreenCanvas&&this._setupOffscreenCanvas(),this.render(),this}_setupCanvasSize(){let{width:e,height:t}=this.settings,a=window.devicePixelRatio||1;this.canvas.width=e*a,this.canvas.height=t*a,this.canvas.style.width="".concat(e,"px"),this.canvas.style.height="".concat(t,"px"),this.ctx.scale(a,a),this.ctx.textBaseline="middle",this.ctx.textAlign="left",this.ctx.imageSmoothingEnabled=!1,document.fonts.ready.then(()=>{this.render()})}_setupOffscreenCanvas(){this.offscreenCanvas=document.createElement("canvas");let e=window.devicePixelRatio||1;this.offscreenCanvas.width=this.settings.width*e,this.offscreenCanvas.height=this.settings.height*e,this.offscreenCtx=this.offscreenCanvas.getContext("2d",{alpha:!0,desynchronized:!0}),this.offscreenCtx.scale(e,e),this.offscreenCtx.textBaseline="middle",this.offscreenCtx.textAlign="left",this.offscreenCtx.imageSmoothingEnabled=!1}startAnimation(){return this.isAnimating||(this.isAnimating=!0,this.lastRenderTime=performance.now(),this._needsRender=!0,this.animationFrameId=requestAnimationFrame(this._renderFrame)),this}stopAnimation(){return this.isAnimating&&(this.isAnimating=!1,this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)),this}updateGameState(e){let t=this.gameState?{...this.gameState}:{};if(this.gameState={...this.gameState,...e},this.gameState&&void 0!==this.gameState.currentInput&&(this.partialKeys=this.gameState.currentInput||"",this.gameState.romaji&&void 0!==this.partialKeys)){let e=(this.gameState.typedLength||0)+this.partialKeys.length;e<this.gameState.romaji.length?this.currentFocus=this.gameState.romaji[e]:this.currentFocus=""}(t.romaji!==this.gameState.romaji||t.typedLength!==this.gameState.typedLength||t.isError!==this.gameState.isError||t.nextKey!==this.gameState.nextKey)&&(this._needsRender=!0)}recordKeyPress(){let e=performance.now();return this.performanceMetrics.lastKeyPressTime=e,this.performanceMetrics.keyPressHistory=this.performanceMetrics.keyPressHistory||[],this.performanceMetrics.keyPressHistory.length>10&&this.performanceMetrics.keyPressHistory.shift(),this.performanceMetrics.keyPressHistory.push({timestamp:e,renderTime:0,latency:0}),e}getPerformanceMetrics(){return{...this.performanceMetrics}}handleKeyInput(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],a=performance.now();if(this.performanceMetrics.lastKeyPressTime=a,t?(this.partialKeys+=e,this.gameState&&(this.gameState.isError=!1)):this.gameState&&(this.gameState.isError=!0),e&&this.gameState&&this.gameState.romaji){let e=(this.gameState.typedLength||0)+this.partialKeys.length;e<this.gameState.romaji.length?this.currentFocus=this.gameState.romaji[e]:this.currentFocus=""}let n=performance.now()-a;this.performanceMetrics.lastInputProcessTime=n,this._needsRender=!0}resetPartialInput(){if(this.partialKeys="",this.gameState&&this.gameState.romaji){let e=this.gameState.typedLength||0;e<this.gameState.romaji.length?this.currentFocus=this.gameState.romaji[e]:this.currentFocus=""}this.gameState&&(this.gameState.isError=!1),this._needsRender=!0}resetErrorState(){this.gameState&&(this.gameState.isError=!1,this._needsRender=!0)}render(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._needsRender=!0,!this.isAnimating&&e&&(this.animationFrameId=requestAnimationFrame(this._renderFrame)),this}_renderFrame(e){let t=performance.now();this.performanceMetrics.renderStartTime=t,this.frameCount++;let a=e-this.lastRenderTime;a>=1e3&&(this.fps=Math.round(1e3*this.frameCount/a),this.frameCount=0,this.lastRenderTime=e);let n=this.settings.useOffscreenCanvas?this.offscreenCtx:this.ctx;n.fillStyle=this.settings.backgroundColor,n.fillRect(0,0,this.settings.width,this.settings.height),this._renderProblem(n),this._renderTypingText(n),this._renderKeyboard(n),this.settings.useOffscreenCanvas&&this.offscreenCanvas&&this.ctx.drawImage(this.offscreenCanvas,0,0);let s=performance.now()-t;if(this._updatePerformanceMetrics(s),this.performanceMetrics.lastKeyPressTime>0){let e=t-this.performanceMetrics.lastKeyPressTime;this.performanceMetrics.keyPressToRenderLatency=e,this.performanceMetrics.inputToRenderDelays.push(e),this.performanceMetrics.inputToRenderDelays.length>10&&this.performanceMetrics.inputToRenderDelays.shift();let a=this.performanceMetrics.inputToRenderDelays.reduce((e,t)=>e+t,0);this.performanceMetrics.averageInputLatency=a/this.performanceMetrics.inputToRenderDelays.length,this.performanceMetrics.lastKeyPressTime=0}this._needsRender=!1,this.isAnimating&&(this.animationFrameId=requestAnimationFrame(this._renderFrame))}_updatePerformanceMetrics(e){let t=this.performanceMetrics;t.lastRenderDuration=e,t.totalFrames++,t.averageRenderTime=.95*t.averageRenderTime+.05*e,e>16.67&&t.droppedFrames++}getPerformanceMetrics(){return{...this.performanceMetrics,fps:this.fps}}_renderProblem(e){if(!this.gameState||!this.gameState.currentProblem)return;let{currentProblem:t}=this.gameState,a=t.displayText||"";if(!a)return;e.font="".concat(this.settings.fontSize,"px ").concat(this.settings.fontFamily),e.fillStyle=this.settings.textColor,e.textAlign="center",e.textBaseline="middle";let n=a.split("\n"),s=1.5*this.settings.fontSize;n.forEach((t,a)=>{e.fillText(t,this.settings.width/2,80+a*s,this.settings.width-40)})}_renderTypingText(e){if(!this.gameState)return;let{romaji:t="",typedLength:a=0,isError:n=!1,currentInput:s=""}=this.gameState;if(!t)return;e.font="".concat(this.settings.fontSize,"px ").concat(this.settings.fontFamily);let r=.6*this.settings.fontSize,o=t.length*r,i=(this.settings.width-o)/2;if(a>0){e.fillStyle="#88FF88";for(let n=0;n<a;n++){let a=t[n];e.fillText(a,i+n*r,160)}}if(this.partialKeys&&this.partialKeys.length>0){e.fillStyle="#88FF88";for(let t=0;t<this.partialKeys.length;t++){let n=this.partialKeys[t],s=a+t;e.fillText(n,i+s*r,160)}}let l=a+(this.partialKeys?this.partialKeys.length:0);if(l<t.length){var c;e.fillStyle=!(this.partialKeys.length>0)&&(n||(null==(c=this.gameState)?void 0:c.isError))&&this.settings.showErrorHighlight?this.settings.errorColor:"#FFB41E";let a=t[l];if(e.fillText(a,i+l*r,160),l+1<t.length){e.fillStyle=this.settings.textColor;for(let a=l+1;a<t.length;a++){let n=t[a];e.fillText(n,i+a*r,160)}}}else t.length>0&&a>=t.length&&(e.fillStyle="#88FF88",e.fillText("✓",i+t.length*r,160))}_renderKeyboard(e){if(!this.gameState)return;let{nextKey:t="",lastPressedKey:a=""}=this.gameState,n=this.settings.height-240;[["1","2","3","4","5","6","7","8","9","0","-","^","\\"],["q","w","e","r","t","y","u","i","o","p","@","["],["a","s","d","f","g","h","j","k","l",";",":","]"],["z","x","c","v","b","n","m",",",".","/","\\"],[" "]].forEach((a,s)=>{let r=40*a.length-4,o=(this.settings.width-r)/2;a.forEach((a,s)=>{let r=" "===a?216:36,i=o+40*s,l=n;e.fillStyle="#333",a===t&&(e.fillStyle="#FFB41E"),this._roundRect(e,i,l,r,36,4),e.fillStyle="#fff",e.font="16px sans-serif",e.textAlign="center",e.textBaseline="middle",e.fillText(" "===a?"SPACE":a,i+r/2,l+18)}),n+=40})}_roundRect(e,t,a,n,s,r){e.beginPath(),e.moveTo(t+r,a),e.lineTo(t+n-r,a),e.quadraticCurveTo(t+n,a,t+n,a+r),e.lineTo(t+n,a+s-r),e.quadraticCurveTo(t+n,a+s,t+n-r,a+s),e.lineTo(t+r,a+s),e.quadraticCurveTo(t,a+s,t,a+s-r),e.lineTo(t,a+r),e.quadraticCurveTo(t,a,t+r,a),e.closePath(),e.fill()}constructor(e={}){this.settings={...eu,...e},this.canvas=null,this.ctx=null,this.offscreenCanvas=null,this.offscreenCtx=null,this.animationFrameId=null,this.isAnimating=!1,this.lastRenderTime=0,this.frameCount=0,this.fps=0,this.performanceMetrics={lastRenderDuration:0,averageRenderTime:0,keyPressToRenderLatency:0,lastKeyPressTime:0,renderStartTime:0,lastInputProcessTime:0,lastRenderAfterInputTime:0,keyPressHistory:[],totalFrames:0,droppedFrames:0,inputToRenderDelays:[],averageInputLatency:0},this.gameState=null,this.partialKeys="",this.currentFocus="",this._needsRender=!0,this._lastRenderTime=0,this._renderFrame=this._renderFrame.bind(this),this.render=this.render.bind(this)}}let e_=e=>{var t,a,r,o,i,l,c,d,u,m,_;let{typing:g,currentProblem:p,lastPressedKey:h="",className:y=""}=e,f=(0,s.useRef)(null),x=(0,s.useRef)(null),[b,S]=(0,s.useState)({romaji:"",typedLength:0,currentCharIndex:0,hasError:!1,lastUpdated:Date.now()}),[v,k]=(0,s.useState)({fps:0,renderTime:0,inputLatency:0}),T=(0,s.useRef)({romaji:"",typedLength:0,isError:!1,nextKey:"",lastPressedKey:"",progress:0,score:0,kpm:0,currentProblem:null}),P=function(e){for(var t=arguments.length,a=Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n]};(0,s.useEffect)(()=>{if(!f.current)return;let e=new em({width:f.current.clientWidth,height:f.current.clientHeight,fontSize:24,backgroundColor:"#1a1a1a",textColor:"#ffffff",typedColor:"#88FF88",highlightColor:"#FFB41E",errorColor:"#ff3333",nextCharColor:"#88FF88",showErrorHighlight:!1,useOffscreenCanvas:!0,useImageCaching:!0,preRenderChars:!0,useRequestAnimationFrame:!0});return e.initialize(f.current,T.current),e.startAnimation(),x.current=e,()=>{x.current&&(x.current.stopAnimation(),x.current=null)}},[]),(0,s.useEffect)(()=>{if(!g)return void P("typingオブジェクトがありません");if(!g.displayInfo)return void P("表示情報が見つかりません");try{var e,t,a;let{romaji:n="",typedLength:s=0,currentCharIndex:r=0,currentInput:o="",currentCharRomaji:i="",expectedNextChar:l=""}=g.displayInfo,c="string"==typeof n;P("表示データ更新:",{romaji:c?n.substring(0,20)+(n.length>20?"...":""):"<無効>",typedLength:s,currentCharIndex:r,currentInput:o,expectedNextChar:l,valid:c});let d={romaji:n||"",typedLength:s||0,currentCharIndex:r||0,currentInput:o||"",currentCharRomaji:i||"",expectedNextChar:l||"",hasError:!1,lastUpdated:Date.now()};S(d),T.current={romaji:n||"",typedLength:s||0,isError:g.errorAnimation||!1,nextKey:l||"",lastPressedKey:h||"",progress:(null==(e=g.stats)?void 0:e.progressPercentage)||0,score:(null==(t=g.stats)?void 0:t.score)||0,kpm:(null==(a=g.stats)?void 0:a.kpm)||0,currentProblem:p||null,currentInput:o||"",expectedNextChar:l||""},x.current&&x.current.updateGameState(T.current)}catch(e){console.error("[CanvasTypingArea] 表示データ更新エラー:",e),S(t=>({...t,hasError:!0,errorMessage:e.message,lastUpdated:Date.now()}))}},[null==g||null==(t=g.displayInfo)?void 0:t.romaji,null==g||null==(a=g.displayInfo)?void 0:a.typedLength,null==g||null==(r=g.displayInfo)?void 0:r.currentCharIndex,null==g||null==(o=g.displayInfo)?void 0:o.currentInput,null==g||null==(i=g.displayInfo)?void 0:i.currentCharRomaji,null==g||null==(l=g.displayInfo)?void 0:l.expectedNextChar,null==g?void 0:g.errorAnimation,null==g||null==(c=g.stats)?void 0:c.progressPercentage,null==g||null==(d=g.stats)?void 0:d.score,null==g||null==(u=g.stats)?void 0:u.kpm,p,h]),(0,s.useEffect)(()=>{let e=setInterval(()=>{if(x.current){let e=x.current.getPerformanceMetrics();k({fps:Math.round(1e3/(e.lastRenderDuration||16.67)),renderTime:e.lastRenderDuration||0,inputLatency:e.keyPressToRenderLatency||0})}},1e3);return()=>clearInterval(e)},[]),(0,s.useEffect)(()=>{let e=e=>{let t=performance.now();if(1===e.key.length&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&x.current&&g){var a;x.current.recordKeyPress();let n=e.key,s=(null==g||null==(a=g.displayInfo)?void 0:a.expectedNextChar)||"";if(s&&1===n.length){let a=n.toLowerCase()===s.toLowerCase();x.current.handleKeyInput(n,a),a&&e.preventDefault(),window.requestIdleCallback&&window.requestIdleCallback(()=>{k(e=>({...e,inputLatency:performance.now()-t}))})}}};return window.addEventListener("keydown",e,{passive:!1,capture:!0}),()=>{window.removeEventListener("keydown",e,{capture:!0})}},[null==g||null==(m=g.displayInfo)?void 0:m.expectedNextChar]);let E=(0,s.useRef)(0);(0,s.useEffect)(()=>{var e;let t=(null==g||null==(e=g.displayInfo)?void 0:e.typedLength)||0;E.current!==t&&x.current&&(x.current.resetPartialInput(),E.current=t)},[null==g||null==(_=g.displayInfo)?void 0:_.typedLength]);let C=(0,s.useRef)(!1);return((0,s.useEffect)(()=>{var e,t;if((null==g?void 0:g.errorAnimation)!==C.current&&(C.current=(null==g?void 0:g.errorAnimation)||!1,(null==(t=x.current)?void 0:t.gameState)&&(x.current.gameState.isError=(null==g?void 0:g.errorAnimation)||!1,x.current.render())),(null==g?void 0:g.errorAnimation)===!0&&(null==(e=x.current)?void 0:e.gameState)){let e=setTimeout(()=>{var e;(null==(e=x.current)?void 0:e.gameState)&&(x.current.gameState.isError=!1,x.current.render())},300);return()=>clearTimeout(e)}},[null==g?void 0:g.errorAnimation]),g)?p?(0,n.jsxs)("div",{className:"".concat(ed().canvas_typing_area," ").concat(y||""),children:[(0,n.jsx)("canvas",{ref:f,className:ed().typing_canvas,width:"800",height:"600"}),null]}):(P("問題データがありません"),(0,n.jsx)("div",{className:"".concat(ed().canvas_typing_area," ").concat(y||""),children:(0,n.jsx)("div",{className:ed().typing_loading,children:"問題を読み込み中..."})})):(P("typingオブジェクトがありません"),(0,n.jsx)("div",{className:"".concat(ed().canvas_typing_area," ").concat(y||""),children:(0,n.jsx)("div",{className:ed().typing_loading,children:"読み込み中..."})}))};var eg=a(7785),ep=a.n(eg);let eh=s.memo(e=>{let{solvedCount:t=0,requiredCount:a=5,typingStats:r={},className:o="",scoreInfo:i={}}=e,{score:l=0,combo:c=0,maxCombo:d=0,rank:u="F"}=(0,s.useMemo)(()=>i||{},[i]),m=c>=2;return(0,s.useMemo)(()=>m?1+Math.min(c/20,.5):1,[c,m]),(0,s.useMemo)(()=>{var e;switch((null==u||null==(e=u.toUpperCase)?void 0:e.call(u))||"F"){case"SSS":return ep().rank_sss;case"SS":return ep().rank_ss;case"S+":case"S":return ep().rank_s;case"A+":case"A":return ep().rank_a;case"B+":case"B":return ep().rank_b;case"C+":case"C":return ep().rank_c;case"D+":case"D":return ep().rank_d;default:return""}},[u]),(0,n.jsx)("header",{className:"".concat(ep().status_bar," ").concat(o," ").concat(ep().empty_bar," ").concat(ep().fade_in),children:(0,n.jsx)("div",{className:ep().logo_container,children:(0,n.jsx)("img",{src:(0,W.aF)("/images/manaby01_.png"),alt:"manaby ロゴ",className:"".concat(ep().manaby_logo," ").concat(ep().logo_animation),title:"manaby - 就労支援",loading:"eager",width:35,height:35})})})});eh.displayName="GameStatusBar";var ey=a(1427);let ef=new Set;function ex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{difficulty:t=l.ALL,category:a=null,excludeRecent:n=[],useMemory:s=!0}=e;console.log("[ProblemSelector] 問題選択:",{指定された難易度:t,カテゴリ:a||"指定なし",除外数:n.length,難易度設定値チェック:{ALL:l.ALL,EASY:l.EASY,NORMAL:l.NORMAL,HARD:l.HARD,入力値との一致:{ALL:t===l.ALL,EASY:t===l.EASY,NORMAL:t===l.NORMAL,HARD:t===l.HARD}}});let r=[];(t===l.EASY||t===l.ALL)&&(r=r.concat(c),console.log("[ProblemSelector] EASY問題を追加:",c.length)),(t===l.NORMAL||t===l.ALL)&&(r=r.concat(d),console.log("[ProblemSelector] NORMAL問題を追加:",d.length)),(t===l.HARD||t===l.ALL)&&(r=r.concat(u),console.log("[ProblemSelector] HARD問題を追加:",u.length)),console.log("[ProblemSelector] 難易度「".concat(t,"」の選択可能な問題数:"),r.length),a&&"all"!==a&&(r=r.filter(e=>e.category===a));let o=new Set(n);s&&ef.forEach(e=>o.add(e));let i=r.filter(e=>!o.has(e.displayText));if(0===i.length)return console.warn("候補問題がないため、全問題から選択します"),eb(r)||eS();let m=eb(i)||eS();if(s&&m){if(ef.size>=15){let e=Array.from(ef)[0];ef.delete(e)}ef.add(m.displayText)}return m}function eb(e){if(!e||0===e.length)return null;let t=Math.floor(Math.random()*e.length);return e[t]}function eS(){return{displayText:"問題を読み込めません",kanaText:"もんだいをよみこめません",category:i.GENERAL}}var ev=a(9980);let ek=()=>{var e;let{gameState:t}=f(),{goToScreen:a}=e0(),r=(0,s.useRef)(null),[o,i]=(0,s.useState)({}),[l,c]=(0,s.useState)(""),{typing:d,typingRef:u,performanceMetrics:m,getNextKey:_,gameState:g,scoreInfo:h}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{onDebugInfoUpdate:t=null,onLastPressedKeyChange:a=null,goToScreen:n}=e||{},r=(0,s.useCallback)(function(e){for(var t=arguments.length,a=Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n]},[!1]),{gameState:o}=f(),[i,l]=(0,s.useState)({score:0,combo:0,maxCombo:0,rank:"F"}),[c,d]=(0,s.useState)(null);(0,s.useRef)({solvedCount:0,requiredProblemCount:0,lastUpdated:Date.now()});let u=(0,s.useRef)({lastKeyPressTime:0,inputLatency:0,frameDrops:0,totalKeyPresses:0}),m=(0,s.useRef)(null);(0,s.useRef)(!1);let{setGameState:_}=f(),g=(0,s.useCallback)(e=>{var t,a,s,r,i,l,u,m,g,p,y,f,b,S,v,k,T,P,E,C,N,I;let M=o.solvedCount+1;if(M>=o.requiredProblemCount){let e=Date.now(),c=o.startTime||(null==(s=h.typingStats)||null==(a=s.statsRef)||null==(t=a.current)?void 0:t.startTime)||e,d=e-c,v=0,k=[...o.problemKPMs||[],(null==h||null==(i=h.typingStats)||null==(r=i.displayStats)?void 0:r.kpm)||0].filter(e=>e>0);v=k&&k.length>0?k.reduce((e,t)=>e+t,0)/k.length:Math.floor(((null==h||null==(S=h.typingStats)||null==(b=S.statsRef)||null==(f=b.current)?void 0:f.correctKeyCount)||0)/(d/6e4));let T=(null==h||null==(m=h.typingStats)||null==(u=m.statsRef)||null==(l=u.current)?void 0:l.correctKeyCount)||0,P=(null==h||null==(y=h.typingStats)||null==(p=y.statsRef)||null==(g=p.current)?void 0:g.mistakeCount)||0,E=(o.totalCorrectKeys||0)+T,C=(o.totalMissKeys||0)+P,N=E+C,I=N>0?Math.round(E/N*100):100;_(t=>({...t,solvedCount:M,isGameClear:!0,problemKPMs:k,startTime:c,endTime:e,totalCorrectKeys:E,totalMissKeys:C,stats:{kpm:Math.round(10*v)/10,correctCount:E,missCount:C,accuracy:I,rank:ev.A.getRank(v)||"F",problemKPMs:k,elapsedTimeMs:d,totalTime:d/1e3,solvedProblems:M}})),window.lastResultTransition=Date.now(),setTimeout(()=>{n(x.RESULT,{playSound:!0,soundType:"result",gameState:{}})},300)}else{let e=(null==h||null==(k=h.typingStats)||null==(v=k.displayStats)?void 0:v.kpm)||0,t=(null==h||null==(E=h.typingStats)||null==(P=E.statsRef)||null==(T=P.current)?void 0:T.correctKeyCount)||0,a=(null==h||null==(I=h.typingStats)||null==(N=I.statsRef)||null==(C=N.current)?void 0:C.mistakeCount)||0,n=[...o.problemKPMs||[],e].filter(e=>e>0);_(e=>({...e,solvedCount:M,problemKPMs:n,totalCorrectKeys:(e.totalCorrectKeys||0)+t,totalMissKeys:(e.totalMissKeys||0)+a})),queueMicrotask(()=>{try{let e=ex({difficulty:o.difficulty,category:o.category,excludeRecent:[null==c?void 0:c.displayText]});d(e),(null==h?void 0:h.setProblem)&&h.setProblem(e)}catch(e){console.error("[GameController] 問題設定エラー:",e)}})}},[o,c,_,n]),h=(0,ey.z)({initialProblem:c,playSound:!0,soundSystem:p.A,onProblemComplete:g,onDebugInfoUpdate:t});m.current=h,(0,s.useEffect)(()=>{if(!h||!h.typingSession)return;let e=setInterval(()=>{try{var e,t,a,n,s;let r=null==h?void 0:h.typingSession,o=(null==r||null==(e=r.getCombo)?void 0:e.call(r))||0,i=(null==r||null==(t=r.getMaxCombo)?void 0:t.call(r))||0,c=(null==h?void 0:h.scoreData)||{},d=(null==c?void 0:c.score)||0,u=(null==h||null==(a=h.displayStats)?void 0:a.rank)||(null==h||null==(s=h.typingStats)||null==(n=s.displayStats)?void 0:n.rank)||"F";l({score:d,combo:o,maxCombo:i,rank:u})}catch(e){console.error("[GameController] スコア情報更新エラー:",e)}},50);return()=>{clearInterval(e)}},[h,!1,r]);let y=(0,s.useCallback)(e=>{if(null==e?void 0:e.key){if("Escape"===e.key)return void n(x.MAIN_MENU,{playSound:!0,soundType:"button"});if(a&&queueMicrotask(()=>{a(e.key)}),!h||!h.typingSession)return void r("タイピングセッションがありません - 入力を無視します");try{let t=h.handleInput(e.key);queueMicrotask(()=>{u.current.totalKeyPresses++,u.current.lastKeyPressTime=Date.now()}),(null==t?void 0:t.success)&&e.preventDefault()}catch(e){}}},[h,n,a]),b=(0,s.useCallback)(()=>{var e;return(null==h||null==(e=h.typingSession)?void 0:e.getCurrentExpectedKey())||""},[h]);return(0,s.useEffect)(()=>(window.addEventListener("keydown",y),()=>{window.removeEventListener("keydown",y),Z.A&&"function"==typeof Z.A.reset&&(console.log("[GameController] コンポーネントのアンマウント時にWorkerをリセットします"),Z.A.reset().catch(e=>{console.warn("[GameController] Worker終了中にエラーが発生しました:",e)}))}),[y]),(0,s.useEffect)(()=>{if(!c){let e=ex({difficulty:o.difficulty,category:o.category});d(e),e&&(null==h?void 0:h.setProblem)&&setTimeout(()=>{h.setProblem(e)},20)}},[o.difficulty,o.category,c,h]),{typing:h,typingRef:m,currentProblem:c,gameState:o,gameState:{currentProblem:c},scoreInfo:i,getNextKey:b,performanceMetrics:{get inputLatency(){return u.current.inputLatency},get lastKeyPressTime(){return u.current.lastKeyPressTime}}}}({onDebugInfoUpdate:null,onLastPressedKeyChange:c,goToScreen:a});!function(e,t,a){(0,s.useEffect)(()=>{if(!0===e.isGameClear){let e=window.lastResultTransition||0,a=Date.now();a-e>500&&(window.lastResultTransition=a,setTimeout(()=>{t(x.RESULT,{playSound:!0,gameState:{}})},250))}},[e,t,a])}(t,a,u);let y=(0,s.useCallback)(()=>{a(x.MAIN_MENU,{playSound:!0,soundType:"button"})},[a]);return((0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&y()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[y]),(0,s.useEffect)(()=>{r.current&&r.current.focus()},[]),!0===t.isGameClear)?null:(0,n.jsx)(eo,{children:(0,n.jsx)("div",{className:ee().typing_game__wrapper,children:(0,n.jsxs)("div",{className:ee().typing_game,children:[(0,n.jsx)(eh,{solvedCount:t.solvedCount,requiredCount:t.requiredProblemCount||5,typingStats:(null==d?void 0:d.stats)||{},scoreInfo:h}),(0,n.jsxs)("main",{className:ee().typing_game__main,ref:r,tabIndex:0,children:[(0,n.jsx)("div",{className:ea().typing_game__canvas_container,children:(0,n.jsx)(e_,{typing:d,currentProblem:(null==d||null==(e=d.typingSession)?void 0:e.problem)||(null==g?void 0:g.currentProblem)||t.currentProblem,lastPressedKey:l,className:ee().typing_game__typing_area})}),!1]}),(0,n.jsxs)("button",{onClick:y,className:ee().typing_game__menu_button,children:[(0,n.jsx)("span",{children:"Esc:"})," メニュー"]})]})})})};var eT=a(2937),eP=a.n(eT);let eE=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let t=eC(),a=e.kpm||0,n=ev.A.getRank?ev.A.getRank(a):"F",s={username:e.username||"Anonymous",kpm:parseFloat(a)||0,rank:n,accuracy:parseFloat(e.accuracy)||0,correctCount:e.correctCount||0,missCount:e.missCount||0,difficulty:e.difficulty||"normal",date:e.timestamp?new Date(e.timestamp).toISOString():new Date().toISOString()};t.unshift(s);let r=t.slice(0,10);return localStorage.setItem("typingGameRecords",JSON.stringify(r)),console.log("ゲーム記録を保存しました。残り記録数: ".concat(r.length,"/10")),eN(s),!0}catch(e){return console.error("記録の保存中にエラーが発生しました:",e),!1}},eC=()=>{try{let e=localStorage.getItem("typingGameRecords");return e?JSON.parse(e):[]}catch(e){return console.error("記録の取得中にエラーが発生しました:",e),[]}},eN=e=>{try{var t,a;let n=eI(),s=e.difficulty,r=!1;e.kpm>((null==(t=n[s])?void 0:t.kpm)||0)&&(n[s]={...n[s],kpm:e.kpm,date:e.date},r=!0),e.accuracy>((null==(a=n[s])?void 0:a.accuracy)||0)&&(n[s]={...n[s],accuracy:e.accuracy,date:e.date},r=!0),r&&localStorage.setItem("typingGameHighScores",JSON.stringify(n))}catch(e){console.error("ハイスコア更新中にエラーが発生しました:",e)}},eI=()=>{try{let e=localStorage.getItem("typingGameHighScores");return e?JSON.parse(e):{}}catch(e){return console.error("ハイスコアの取得中にエラーが発生しました:",e),{}}},eM=e=>{let{stats:t,onClickRetry:a,onClickMenu:r,onClickRanking:o,playSound:i=!0}=e,{goToScreen:l}=e0(),{gameState:c}=f();(0,s.useEffect)(()=>{console.log("ResultScreen: 受け取ったstats",t),console.log("ResultScreen: gameStateからのstats",null==c?void 0:c.stats);let e=t||(null==c?void 0:c.stats);if(console.log("ResultScreen: 使用する統計情報",e),e&&void 0!==e.kpm&&0!==e.kpm||console.warn("ResultScreen: statsデータが不足しているか、KPMが0です",e),e&&e.kpm>0)try{eE({username:"Player",kpm:e.kpm,correctCount:e.correctCount||0,missCount:e.missCount||0,accuracy:e.accuracy||0,timestamp:Date.now()}),console.log("ResultScreen: ローカルランキングにスコアを保存しました")}catch(e){console.error("ResultScreen: ランキング保存でエラーが発生しました:",e)}else console.log("ResultScreen: スコアデータが無いためランキング保存をスキップします")},[t,c]);let d=(0,s.useCallback)(()=>{console.log("メニューに戻ります"),"function"==typeof r?r():l(x.MAIN_MENU,{playSound:!0})},[r,l]);(0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&(console.log("ResultScreen: Escキーが押されました: メニューに戻ります"),e.preventDefault(),e.stopPropagation(),d())};return window.addEventListener("keydown",e,{capture:!0}),()=>{window.removeEventListener("keydown",e,{capture:!0})}},[d]),(0,s.useEffect)(()=>{if(i)try{console.log("ResultScreen: 結果画面の効果音を再生します"),p.A.sfxBuffers.complete?p.A.play("complete"):p.A.loadSound("complete",(0,W.aF)("/sounds/resultsound.mp3")).then(()=>p.A.play("complete")).catch(e=>console.error("効果音のロードに失敗しました:",e))}catch(e){console.error("効果音の再生に失敗しました:",e)}else console.log("ResultScreen: playSoundがfalseのため効果音をスキップします")},[i]);let u=e=>null==e?(console.warn("formatDecimal: 値が未定義です"),"0.0"):Number(e).toFixed(1),m={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}},_=(0,s.useMemo)(()=>{let e=t||(null==c?void 0:c.stats);return(console.log("ResultScreen: 統計データ処理:",e),e&&"object"==typeof e)?(console.log("ResultScreen: 詳細なステータスデータ",{入力されたcorrectCount:e.correctCount,入力されたmissCount:e.missCount,入力されたaccuracy:e.accuracy,解答した問題数:e.solvedProblems,残りのデータ:e}),{kpm:e.kpm||0,correctCount:"number"==typeof e.correctCount?e.correctCount:0,missCount:"number"==typeof e.missCount?e.missCount:0,accuracy:e.accuracy||0,totalTime:e.totalTime||0,elapsedTimeMs:e.elapsedTimeMs||0,rank:e.rank||"F",problemKPMs:e.problemKPMs||[],solvedProblems:e.solvedProblems}):{kpm:0,correctCount:0,missCount:0,accuracy:0,totalTime:0,elapsedTimeMs:0,rank:"F",problemKPMs:[]}},[t,null==c?void 0:c.stats]),g=(0,s.useMemo)(()=>{let e=ev.A.getRankColor(_.rank||"F"),t=_.kpm?u(_.kpm):"0.0",a=_.accuracy?u(_.accuracy):"0.0";return{totalTime:_.totalTime?u(_.totalTime):"0.0",accuracy:a,kpm:t,correctCount:_.correctCount||0,missCount:_.missCount||0,rank:_.rank||"-",rankColor:e,problemKPMs:_.problemKPMs||[]}},[_]);return(0,n.jsxs)(k.P.div,{className:eP().resultContainer,initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{delayChildren:.3,staggerChildren:.2}}},children:[(0,n.jsx)(k.P.div,{className:eP().resultHeader,variants:m,children:(0,n.jsx)("h1",{className:"screen-title ".concat(eP().resultTitle),children:"RESULT"})}),(0,n.jsxs)(k.P.div,{className:eP().resultContent,variants:m,children:[(0,n.jsxs)(k.P.div,{className:eP().rankDisplay,variants:{hidden:{scale:0,opacity:0},visible:{scale:1,opacity:1,transition:{type:"spring",stiffness:300,damping:10,delay:.5}}},children:[(0,n.jsx)("h2",{className:eP().rankValue,style:{color:g.rankColor},children:g.rank}),(0,n.jsx)("p",{className:eP().rankLabel,children:"YOUR RANK"}),(0,n.jsx)("div",{className:eP().rankBackdrop})]}),(0,n.jsxs)(k.P.div,{className:eP().statsContainer,variants:m,children:[(0,n.jsxs)(k.P.div,{className:"".concat(eP().statCard," ").concat(eP().keyStatCard),whileHover:{scale:1.05},transition:{type:"spring",stiffness:300,damping:15},children:[(0,n.jsx)("div",{className:eP().statLabel,children:"KPM"}),(0,n.jsx)("div",{className:eP().statValue,children:g.kpm})]}),(0,n.jsxs)(k.P.div,{className:"".concat(eP().statCard," ").concat(eP().keyStatCard),whileHover:{scale:1.05},transition:{type:"spring",stiffness:300,damping:15},children:[(0,n.jsx)("div",{className:eP().statLabel,children:"Accuracy"}),(0,n.jsxs)("div",{className:eP().statValue,children:[g.accuracy,"%"]})]})," ",(0,n.jsxs)(k.P.div,{className:eP().statCard,whileHover:{scale:1.03},children:[(0,n.jsx)("div",{className:eP().statLabel,children:"Correct"}),(0,n.jsx)("div",{className:eP().statValue,children:g.correctCount})]}),(0,n.jsxs)(k.P.div,{className:eP().statCard,whileHover:{scale:1.03},children:[(0,n.jsx)("div",{className:eP().statLabel,children:"Miss"}),(0,n.jsx)("div",{className:eP().statValue,children:g.missCount})]}),void 0!==g.solvedProblems&&(0,n.jsxs)(k.P.div,{className:eP().statCard,whileHover:{scale:1.03},children:[(0,n.jsx)("div",{className:eP().statLabel,children:"Problems"}),(0,n.jsx)("div",{className:eP().statValue,children:g.solvedProblems})]})]})]}),(0,n.jsxs)(k.P.div,{className:eP().buttonContainer,variants:m,children:[(0,n.jsx)(k.P.button,{className:eP().resultButton,onClick:e=>{e.preventDefault(),console.log("ランキングボタンがクリックされました"),"function"==typeof o?o():l(x.RANKING,{playSound:!0,gameState:t})},whileHover:{scale:1.05},whileTap:{scale:.95},children:"ランキング"}),(0,n.jsx)(k.P.button,{className:eP().resultButton,onClick:e=>{e.preventDefault(),console.log("リトライボタンがクリックされました"),"function"==typeof a?a():console.error("onClickRetry関数が提供されていません")},whileHover:{scale:1.05},whileTap:{scale:.95},children:"リトライ"}),(0,n.jsx)(k.P.button,{className:eP().resultButton,onClick:e=>{e.preventDefault(),console.log("メニューボタンがクリックされました"),d()},whileHover:{scale:1.05},whileTap:{scale:.95},children:"メニューへ"})]})]})};var ej=a(8618),eA=a.n(ej),ew=a(3915),eR=a(1115),eB=a(6864);let eG={apiKey:"AIzaSyBB6UAYtMbTbf2pMlIAmz79MXPzLYx6ohg",authDomain:"manaby-typing.firebaseapp.com",databaseURL:"https://manaby-typing-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"manaby-typing",storageBucket:"manaby-typing.firebasestorage.app",messagingSenderId:"58110409261",appId:"1:58110409261:web:1f23739378545fab9196a4",measurementId:"G-FSD7ECC1B0"},eO=null,eL=null,eF=()=>{if(!eO)try{return eO=(0,ew.Wp)(eG),eL=(0,eR.C3)(eO),(0,eB.P5)(eO),console.log("Firebase initialized successfully"),!0}catch(e){return console.error("Firebase initialization failed:",e),!1}return!!eO},eD=async(e,t,a,n,s,r,o)=>{if(!eF()||!eL)return console.error("Firebase not initialized"),null;try{let i,l=Math.floor(t),c=parseFloat(a.toFixed(1)),d=new Date().toISOString(),u=o||(void 0!==ev.A?ev.A.getKPMRank(l):""),m=(0,eR.KR)(eL,"scores"),_=await (0,eR.Jt)(m),g=null,p=null;if(_.exists()&&_.forEach(t=>{let a=t.val();a.playerName===e&&a.difficulty===r&&(g=t.key,p=a)}),g&&l>0){if(i=(0,eR.jf)(m,g),!p||!(l>p.kpm)&&(l!==p.kpm||!(c>p.accuracy)))return console.log("既存のエントリーの方が良いスコアなので更新しません"),g;console.log("既存のエントリーを更新します:",g)}else i=(0,eR.VC)(m);let h={score:l,stats:{kpm:l,accuracy:c,mistakes:s||0},timestamp:d,username:e||"Anonymous",playerName:e||"Anonymous",kpm:l,accuracy:c,time:n||0,mistakes:s||0,difficulty:r||"normal",date:d,timestamp_num:Date.now(),rank:u};return await (0,eR.hZ)(i,h),console.log("オンラインランキングを保存しました - KPM: ".concat(l,", ランク: ").concat(u,", 正解率: ").concat(c,"%")),i.key}catch(e){return console.error("Error saving online ranking:",e),null}},eV=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"normal",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;if(!eF()||!eL)return console.error("Firebase not initialized"),[];try{let a=(0,eR.KR)(eL,"scores"),n=await (0,eR.Jt)(a);if(console.log("Firebase data retrieved for difficulty ".concat(e,":"),n.exists()),!n.exists())return console.log("No data available in Firebase"),[];let s=[];n.forEach(e=>{let t=e.val();s.push({id:e.key,...t})});let r=s.filter(t=>t.difficulty&&t.difficulty===e||t.gameMode===e||!t.difficulty&&!t.gameMode&&"normal"===e);console.log("Retrieved ".concat(s.length," total records, filtered to ").concat(r.length," records for difficulty: ").concat(e));let o={};return r.forEach(e=>{var t;let a=e.playerName||e.username||"Anonymous",n=void 0!==e.kpm?e.kpm:e.score||0,s=void 0!==e.accuracy?e.accuracy:(null==(t=e.stats)?void 0:t.accuracy)!==void 0?e.stats.accuracy:0;(!o[a]||n>o[a].kpm||n===o[a].kpm&&s>o[a].accuracy)&&(o[a]=e)}),Object.values(o).sort((e,t)=>{let a=void 0!==e.kpm?e.kpm:e.score||0,n=void 0!==t.kpm?t.kpm:t.score||0;if(n!==a)return n-a;{var s,r;let a=void 0!==e.accuracy?e.accuracy:(null==(s=e.stats)?void 0:s.accuracy)!==void 0?e.stats.accuracy:0;return(void 0!==t.accuracy?t.accuracy:(null==(r=t.stats)?void 0:r.accuracy)!==void 0?t.stats.accuracy:0)-a}}).slice(0,t)}catch(e){return console.error("Error fetching rankings:",e),[]}},eK=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!eF()||!eL)return console.error("Firebase not initialized"),[];try{let a=(0,eR.KR)(eL,"scores"),n=await (0,eR.Jt)(a);if(console.log("Recent Firebase data retrieved:",n.exists()),!n.exists())return console.log("No recent data available in Firebase"),[];let s=[];n.forEach(e=>{s.push({id:e.key,...e.val()})}),console.log("Retrieved ".concat(s.length," recent records"));let r=t?s.filter(e=>e.difficulty&&e.difficulty===t||e.gameMode===t||!e.difficulty&&!e.gameMode&&"normal"===t):s;console.log("Filtered to ".concat(r.length," records for difficulty: ").concat(t||"all"));let o={};return r.forEach(e=>{let t=e.playerName||e.username||"Anonymous",a=e.timestamp_num||(e.timestamp?new Date(e.timestamp).getTime():e.date?new Date(e.date).getTime():0);(!o[t]||a>o[t].timestamp)&&(o[t]={...e,timestamp:a})}),Object.values(o).sort((e,t)=>t.timestamp-e.timestamp).slice(0,e)}catch(e){return console.error("Error fetching recent rankings:",e),[]}},ez=async()=>{if(!eF()||!eL)return console.error("Firebase not initialized"),[];try{let e=(0,eR.KR)(eL,"scores"),t=await (0,eR.Jt)(e);if(console.log("DEBUG: Firebase connection test result:",t.exists()),!t.exists())return console.log("DEBUG: No data available in scores node"),[];let a=[];return t.forEach(e=>{a.push({id:e.key,...e.val()})}),console.log("DEBUG: Found ".concat(a.length," total records in database")),console.log("DEBUG: Sample record:",a.length>0?a[0]:"No records"),a}catch(e){return console.error("DEBUG: Error checking database:",e),[]}},eU=e=>({MAIN_MENU:"メインメニュー",GAME:"ゲーム画面",RESULT:"リザルト画面",RANKING:"ランキング画面",SETTINGS:"設定画面",CREDITS:"クレジット画面",ALL:"全画面"})[e]||e,eH={saveBackgroundToFirebase:async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(!eF()||!eL)return console.error("Firebase not initialized"),null;try{let r=(0,eR.KR)(eL,"backgrounds"),o=(0,eR.VC)(r),i=new Date().toISOString(),l=Date.now(),c=s;if(!c)try{let e=document.querySelector("#__next > div");if(e){let t=window.getComputedStyle(e);c={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,borderStyle:t.borderStyle,boxShadow:t.boxShadow,backgroundImage:""}}}catch(e){console.error("背景スタイル情報の取得に失敗しました:",e)}let d={playerName:e||"Anonymous",title:a||"".concat(e||"Anonymous","が保存した背景"),imageData:t,cssStyleInfo:c,metadata:{...n,createdAt:i},timestamp:i,timestamp_num:l};return await (0,eR.hZ)(o,d),console.log("背景画像とスタイル情報を保存しました - 保存者: ".concat(e,", タイトル: ").concat(a)),o.key}catch(e){return console.error("Error saving background to Firebase:",e),null}},getBackgroundsFromFirebase:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;if(!eF()||!eL)return console.error("Firebase not initialized"),[];try{let t=(0,eR.KR)(eL,"backgrounds"),a=await (0,eR.Jt)(t);if(!a.exists())return console.log("保存された背景画像データがありません"),[];let n=[];return a.forEach(e=>{n.push({id:e.key,...e.val()})}),n.sort((e,t)=>t.timestamp_num-e.timestamp_num).slice(0,e)}catch(e){return console.error("Error fetching backgrounds from Firebase:",e),[]}},deleteBackgroundFromFirebase:async e=>{if(!eF()||!eL)return console.error("Firebase not initialized"),!1;try{let t=(0,eR.KR)(eL,"backgrounds/".concat(e));return await (0,eR.hZ)(t,null),console.log("背景画像を削除しました - ID: ".concat(e)),!0}catch(e){return console.error("Error deleting background from Firebase:",e),!1}},saveScreenBackgroundToFirebase:async function(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(!eF()||!eL)return console.error("Firebase not initialized"),null;try{let r=(0,eR.KR)(eL,"backgrounds"),o=(0,eR.VC)(r),i=new Date().toISOString(),l=Date.now(),c=e||"ALL",d=s;if(!d)try{let e=document.querySelector("#__next > div");if(e){let t=window.getComputedStyle(e);d={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,borderStyle:t.borderStyle,boxShadow:t.boxShadow,backgroundImage:""}}}catch(e){console.error("背景スタイル情報の取得に失敗しました:",e)}let u=n||"".concat(t||"Anonymous","の").concat(eU(c),"用背景"),m={playerName:t||"Anonymous",title:u,imageData:a,cssStyleInfo:d,screenId:c,metadata:{createdAt:i,type:"screen-specific-background",targetScreen:c},timestamp:i,timestamp_num:l};return await (0,eR.hZ)(o,m),console.log("画面「".concat(eU(c),"」用の背景を保存しました - 保存者: ").concat(t,", タイトル: ").concat(u)),o.key}catch(e){return console.error("Error saving screen background to Firebase:",e),null}},getScreenBackgroundsFromFirebase:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;if(!eF()||!eL)return console.error("Firebase not initialized"),[];try{let a=(0,eR.KR)(eL,"backgrounds"),n=await (0,eR.Jt)(a);if(!n.exists())return console.log("保存された背景画像データがありません"),[];let s=[];return n.forEach(t=>{var a;let n=t.val();e&&n.screenId!==e&&"ALL"!==n.screenId&&(null==(a=n.metadata)?void 0:a.targetScreen)!==e&&n.screenId||s.push({id:t.key,...n})}),s.sort((e,t)=>t.timestamp_num-e.timestamp_num).slice(0,t)}catch(e){return console.error("Error fetching screen backgrounds from Firebase:",e),[]}},deleteRankingsByDifficulty:async e=>{if(!eF()||!eL)return console.error("Firebase not initialized"),!1;try{let t=(0,eR.KR)(eL,"scores"),a=await (0,eR.Jt)(t);if(!a.exists())return console.log("削除対象のランキングデータがありません"),!0;let n=[];return a.forEach(t=>{let a=t.val();if((a.difficulty||a.gameMode||"normal")===e){let e=(0,eR.KR)(eL,"scores/".concat(t.key));n.push((0,eR.hZ)(e,null))}}),n.length>0&&await Promise.all(n),console.log("難易度「".concat(e,"」のランキングデータを").concat(n.length,"件削除しました")),!0}catch(t){return console.error("難易度「".concat(e,"」のランキング削除中にエラーが発生しました:"),t),!1}},deleteAllRankings:async()=>{if(!eF()||!eL)return console.error("Firebase not initialized"),!1;try{let e=(0,eR.KR)(eL,"scores");return await (0,eR.hZ)(e,null),console.log("すべてのランキングデータを削除しました"),!0}catch(e){return console.error("ランキングデータの削除中にエラーが発生しました:",e),!1}}};var eq=a(5695);let eJ={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}},exit:{opacity:0,transition:{duration:.3}}},eY={hidden:{y:20,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",stiffness:300,damping:20}},exit:{opacity:0,y:20,transition:{duration:.2}}},eZ=()=>{(0,eq.useRouter)();let{goToScreen:e}=e0(),{gameState:t}=f(),[a,r]=(0,s.useState)(!1),[o,i]=(0,s.useState)(!1),[l,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)({difficulty:"normal"}),[m,_]=(0,s.useState)("normal");(0,s.useEffect)(()=>{console.log("RankingScreen: 受け取ったゲーム状態データ:",t)},[t]);let[g,h]=(0,s.useState)([]),[y,b]=(0,s.useState)({}),[S,v]=(0,s.useState)([]),[T,P]=(0,s.useState)(!0),[E,C]=(0,s.useState)(!1),[N,I]=(0,s.useState)(!1),[M,j]=(0,s.useState)(""),[A,w]=(0,s.useState)({success:!1,message:""}),[R,B]=(0,s.useState)([]),[G,O]=(0,s.useState)(!1),[L,F]=(0,s.useState)(x.MAIN_MENU);(0,s.useEffect)(()=>{window.history.state&&window.history.state.options&&window.history.state.options.from?F(window.history.state.options.from):F(x.MAIN_MENU),p.A.resume(),eF(),K(),_(d.difficulty);let e=localStorage.getItem("playerName");e&&j(e),V()},[]);let V=()=>{if(t)try{var e,a,n;let s=JSON.parse(sessionStorage.getItem("registeredGames")||"[]"),r=0;if(t.stats&&void 0!==t.stats.kpm)r=Math.floor(t.stats.kpm);else if(t.stats&&t.stats.problemStats&&t.stats.problemStats.length>0)r=Math.floor(ev.A.calculateAverageKPM(t.stats.problemStats));else if(t.problemKPMs&&t.problemKPMs.length>0){let e=t.problemKPMs.filter(e=>e>0);e.length>0&&(r=Math.floor(e.reduce((e,t)=>e+t,0)/e.length))}let o=(null==(e=t.stats)?void 0:e.accuracy)||t.accuracy||(t.correctKeyCount&&(t.mistakes||0===t.mistakes)?t.correctKeyCount/(t.correctKeyCount+t.mistakes)*100:0),i=(null==(a=t.stats)?void 0:a.missCount)||t.mistakes||0,l=(null==(n=t.stats)?void 0:n.elapsedTimeMs)||t.playTime||0,d="".concat(r,"-").concat(o.toFixed(1),"-").concat(i,"-").concat(l);s.includes(d)&&(c(!0),console.log("このスコアは既に登録済みです"))}catch(e){console.error("登録済みゲーム確認エラー:",e)}};(0,s.useEffect)(()=>{T?z():K()},[T,m]);let K=()=>{h([...eC()].sort((e,t)=>t.kpm!==e.kpm?t.kpm-e.kpm:t.accuracy!==e.accuracy?t.accuracy-e.accuracy:e.mistakes-t.mistakes)),b(eI())},z=async()=>{C(!0);try{let e=await eV(m,20);console.log("Loaded ".concat(e.length," online rankings for difficulty: ").concat(m)),v(e)}catch(e){console.error("オンラインランキングの取得に失敗しました:",e)}finally{C(!1)}},U=()=>{p.A.playSound("Button");let e=!T;P(e),e?console.log("オンラインモードに切り替えました"):console.log("ローカルモードに切り替えました")},H=e=>{p.A.playSound("Button"),_(e)},q=()=>[...g].filter(e=>e.difficulty===m).sort((e,t)=>t.kpm-e.kpm).slice(0,20),J=e=>{let t=new Date(e);return"".concat(t.getMonth()+1,"/").concat(t.getDate()," ").concat(String(t.getHours()).padStart(2,"0"),":").concat(String(t.getMinutes()).padStart(2,"0"))},Y=()=>{p.A.playSound("Button"),I(!1)},Z=async()=>{if(!l&&!E){if(!t)return void w({success:!1,message:"登録するスコアがありません。プレイ後に再度お試しください。"});if(!M.trim())return void w({success:!1,message:"名前を入力してください。"});C(!0);try{localStorage.setItem("playerName",M);let e=0;if(t.stats&&void 0!==t.stats.kpm)e=Math.floor(t.stats.kpm);else if(t.stats&&t.stats.problemStats&&t.stats.problemStats.length>0)e=Math.floor(ev.A.calculateAverageKPM(t.stats.problemStats));else if(t.problemKPMs&&t.problemKPMs.length>0){let a=t.problemKPMs.filter(e=>e>0);a.length>0&&(e=Math.floor(a.reduce((e,t)=>e+t,0)/a.length))}else if(t.startTime&&t.endTime&&t.correctKeyCount){let a=t.endTime-t.startTime;e=Math.floor(t.correctKeyCount/(a/6e4))}let a=t.correctKeyCount||t.stats&&t.stats.correctCount||0;e<=0&&a>0&&(e=1);let n=ev.A.getRank(e),s=0;if(t.stats&&"number"==typeof t.stats.accuracy)s=t.stats.accuracy;else if("number"!=typeof t.accuracy||isNaN(t.accuracy)){if((t.correctKeyCount>=0||t.stats&&t.stats.correctCount>=0)&&(t.mistakes>=0||0===t.mistakes||t.stats&&(t.stats.missCount>=0||0===t.stats.missCount))){let e=t.correctKeyCount||t.stats&&t.stats.correctCount||0,a=t.mistakes||t.stats&&t.stats.missCount||0,n=e+a;n>0&&(s=e/n*100)}}else s=t.accuracy;console.log("送信する統計データ:",{kpm:e,accuracy:s,rank:n}),t.correctKeyCount||t.stats&&t.stats.correctCount;let r=t.mistakes||t.stats&&t.stats.missCount||0,o=t.playTime||t.stats&&t.stats.elapsedTimeMs||0;if(await eD(M,e,s,o,r,d.difficulty||"normal",n)){c(!0),w({success:!0,message:"ランキングに登録しました！"});try{let t="".concat(e,"-").concat(s.toFixed(1),"-").concat(r,"-").concat(o),a=JSON.parse(sessionStorage.getItem("registeredGames")||"[]");a.push(t),sessionStorage.setItem("registeredGames",JSON.stringify(a))}catch(e){console.error("登録済みゲームの保存に失敗:",e)}P(!0),await z()}else throw Error("登録に失敗しました")}catch(e){console.error("スコア登録エラー:",e),w({success:!1,message:"ランキング登録中にエラーが発生しました。ネットワーク接続を確認してください。"})}finally{C(!1)}}},W=async()=>{console.log("Testing Firebase connection..."),C(!0);try{let e=await ez();B(e),O(!0),console.log("Debug data loaded:",e)}catch(e){console.error("Debug error:",e)}finally{C(!1)}},X=()=>{O(!1)};return(0,s.useEffect)(()=>{let t=t=>{"Escape"===t.key&&(t.preventDefault(),G?(p.A.playSound("Button"),X()):N?(p.A.playSound("Button"),Y()):o||a||(p.A.playSound("Button"),r(!0),setTimeout(()=>{e(L,{playSound:!1})},300)))};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[N,G,o,a]),(0,s.useEffect)(()=>(r(!1),i(!1),()=>{r(!1),i(!1)}),[]),(0,n.jsxs)("div",{className:eA().rankingContainer,children:[(0,n.jsx)("div",{className:eA().cornerDecoration,style:{top:10,left:10},children:(0,n.jsx)("div",{className:eA().cornerTech})}),(0,n.jsx)("div",{className:eA().cornerDecoration,style:{top:10,right:10,transform:"scaleX(-1)"},children:(0,n.jsx)("div",{className:eA().cornerTech})}),(0,n.jsx)("div",{className:eA().cornerDecoration,style:{bottom:10,left:10,transform:"scaleY(-1)"},children:(0,n.jsx)("div",{className:eA().cornerTech})}),(0,n.jsx)("div",{className:eA().cornerDecoration,style:{bottom:10,right:10,transform:"scale(-1)"},children:(0,n.jsx)("div",{className:eA().cornerTech})}),(0,n.jsx)("div",{className:eA().scanlines}),(0,n.jsx)("div",{className:eA().dotPattern}),(0,n.jsx)(k.P.div,{className:eA().rankingHeader,initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:-50,opacity:0},transition:{type:"spring",damping:20,duration:.8},children:(0,n.jsx)("h1",{className:"screen-title ".concat(eA().rankingTitle),children:"RANKING"})}),(0,n.jsxs)("div",{className:eA().onlineModeToggle,style:{display:"flex",justifyContent:"center",gap:"10px",marginBottom:"15px",zIndex:10,position:"relative"},children:[(0,n.jsx)(D,{variant:T?"default":"primary",active:!T,onClick:()=>{T&&U()},size:"small",children:"ローカル"}),(0,n.jsx)(D,{variant:T?"primary":"default",active:T,onClick:()=>{T||U()},size:"small",children:"オンライン"})]}),(0,n.jsxs)("div",{className:eA().difficultyNav,children:[(0,n.jsx)(D,{className:"button--difficulty",active:"easy"===m,variant:"easy"===m?"primary":"default",onClick:()=>H("easy"),children:"やさしい"}),(0,n.jsx)(D,{className:"button--difficulty",active:"normal"===m,variant:"normal"===m?"primary":"default",onClick:()=>H("normal"),children:"普通"}),(0,n.jsx)(D,{className:"button--difficulty",active:"hard"===m,variant:"hard"===m?"primary":"default",onClick:()=>H("hard"),children:"むずかしい"})]}),(0,n.jsx)("div",{className:eA().rankingContent,children:E?(0,n.jsx)("div",{className:eA().loadingSpinner,children:"読み込み中..."}):T?(0,n.jsxs)(k.P.div,{className:eA().tableContainer,variants:eJ,initial:"hidden",animate:a?"exit":"show",exit:"exit",children:[(0,n.jsxs)("table",{className:eA().rankingTable,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"順位"}),(0,n.jsx)("th",{children:"プレイヤー"}),(0,n.jsx)("th",{children:"KPM"}),(0,n.jsx)("th",{children:"ランク"}),(0,n.jsx)("th",{children:"正解率"}),(0,n.jsx)("th",{children:"ミス"}),(0,n.jsx)("th",{children:"日付"})]})}),(0,n.jsx)("tbody",{children:S.map((e,t)=>{var a,s;return(0,n.jsxs)(k.P.tr,{variants:eY,children:[(0,n.jsx)("td",{children:t+1}),(0,n.jsx)("td",{children:e.playerName||e.username||"Anonymous"}),(0,n.jsx)("td",{children:Math.floor(e.kpm)===e.kpm?Math.floor(e.kpm):e.kpm.toFixed(1)}),(0,n.jsx)("td",{style:{color:ev.A.getRankColor(e.rank||ev.A.getRank(e.kpm))},children:e.rank||ev.A.getRank(e.kpm)}),(0,n.jsxs)("td",{children:[(void 0!==e.accuracy?e.accuracy:(null==(a=e.stats)?void 0:a.accuracy)!==void 0?e.stats.accuracy:0).toFixed(1),"%"]}),(0,n.jsx)("td",{children:e.mistakes||(null==(s=e.stats)?void 0:s.mistakes)||0}),(0,n.jsx)("td",{children:J(e.date||e.timestamp||new Date().toISOString())})]},e.id||t)})})]}),0===S.length&&(0,n.jsx)("div",{className:eA().noRecords,children:"オンラインの記録がありません"})]}):(0,n.jsxs)(k.P.div,{className:eA().tableContainer,variants:eJ,initial:"hidden",animate:a?"exit":"show",exit:"exit",children:[(0,n.jsxs)("table",{className:eA().rankingTable,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"順位"}),(0,n.jsx)("th",{children:"KPM"}),(0,n.jsx)("th",{children:"ランク"}),(0,n.jsx)("th",{children:"正解率"}),(0,n.jsx)("th",{children:"ミス"}),(0,n.jsx)("th",{children:"日付"})]})}),(0,n.jsx)("tbody",{children:q().map((e,t)=>(0,n.jsxs)(k.P.tr,{variants:eY,children:[(0,n.jsx)("td",{children:t+1}),(0,n.jsx)("td",{children:Math.floor(e.kpm)===e.kpm?Math.floor(e.kpm):e.kpm.toFixed(1)}),(0,n.jsx)("td",{style:{color:ev.A.getRankColor(e.rank||ev.A.getRank(e.kpm))},children:e.rank||ev.A.getRank(e.kpm)}),(0,n.jsxs)("td",{children:[e.accuracy.toFixed(1),"%"]}),(0,n.jsx)("td",{children:e.mistakes}),(0,n.jsx)("td",{children:J(e.date)})]},t))})]}),0===q().length&&(0,n.jsx)("div",{className:eA().noRecords,children:"記録がありません"})]})}),(0,n.jsxs)(k.P.div,{className:eA().buttonContainer,initial:{opacity:0,y:30},animate:{opacity:+!a,y:50*!!a},exit:{opacity:0,y:50},transition:{delay:.6*!a,duration:.5},children:[(0,n.jsx)(k.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:17},children:(0,n.jsx)(D,{variant:"primary",size:"medium",onClick:()=>{p.A.playSound("Button"),I(!0),w({success:!1,message:""})},disabled:!t||!t.correctKeyCount&&!t.stats||l,children:l?"すでに登録済み":"ランキング登録"})}),(0,n.jsx)(k.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:17},children:(0,n.jsx)(D,{variant:"default",size:"medium",onClick:()=>{console.log("戻るボタンがクリックされました"),a||o||(p.A.playSound("Button"),r(!0),i(!0),setTimeout(()=>{r(!1),i(!1),e(L||x.MAIN_MENU,{playSound:!1})},300))},children:"戻る"})}),(0,n.jsx)(k.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:17},children:(0,n.jsx)(D,{variant:"default",size:"medium",onClick:()=>{console.log("メインメニューボタンがクリックされました"),a||o||(p.A.playSound("Button"),r(!0),i(!0),setTimeout(()=>{r(!1),i(!1),e(x.MAIN_MENU,{playSound:!1})},300))},children:"メインメニュー"})}),(0,n.jsx)(k.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:17},children:(0,n.jsx)(D,{variant:"default",size:"medium",onClick:W,disabled:E,children:"接続確認"})})]}),N&&(0,n.jsx)("div",{className:eA().modalOverlay,children:(0,n.jsxs)(k.P.div,{className:eA().modalContent,initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:400,damping:30},children:[(0,n.jsx)("div",{className:eA().cornerDecoration,style:{top:10,left:10},children:(0,n.jsx)("div",{className:eA().cornerTech})}),(0,n.jsx)("div",{className:eA().cornerDecoration,style:{top:10,right:10,transform:"scaleX(-1)"},children:(0,n.jsx)("div",{className:eA().cornerTech})}),(0,n.jsx)("div",{className:eA().cornerDecoration,style:{bottom:10,left:10,transform:"scaleY(-1)"},children:(0,n.jsx)("div",{className:eA().cornerTech})}),(0,n.jsx)("div",{className:eA().cornerDecoration,style:{bottom:10,right:10,transform:"scale(-1)"},children:(0,n.jsx)("div",{className:eA().cornerTech})}),(0,n.jsx)("div",{className:eA().scanlines}),(0,n.jsx)("div",{className:eA().dotPattern}),(0,n.jsxs)("div",{className:eA().modalHeader,children:[(0,n.jsx)("h2",{className:eA().modalTitle,children:"オンラインランキング登録"}),(0,n.jsx)(D,{variant:"default",size:"small",onClick:Y,className:eA().closeButton,children:"✕"})]}),(0,n.jsxs)("div",{className:eA().modalBody,children:[(0,n.jsx)("p",{children:"名前を入力してオンラインランキングに登録しましょう！"}),A.message&&(0,n.jsx)("div",{className:"".concat(eA().statusMessage," ").concat(A.success?eA().successMessage:eA().errorMessage),children:A.message}),(0,n.jsxs)("div",{className:eA().inputGroup,children:[(0,n.jsx)("label",{htmlFor:"playerName",children:"プレイヤー名："}),(0,n.jsx)("input",{id:"playerName",type:"text",value:M,onChange:e=>{j(e.target.value)},maxLength:20,placeholder:"名前を入力（最大20文字）",disabled:E,className:eA().nameInput})]}),t&&(0,n.jsxs)("div",{className:eA().scorePreview,children:[(0,n.jsxs)("div",{className:eA().previewItem,children:[(0,n.jsx)("span",{children:"難易度:"}),(0,n.jsx)("span",{children:"easy"===d.difficulty?"やさしい":"normal"===d.difficulty?"普通":"むずかしい"})]}),(0,n.jsxs)("div",{className:eA().previewItem,children:[(0,n.jsx)("span",{children:"KPM:"}),(0,n.jsx)("span",{children:t.stats&&"number"==typeof t.stats.kpm?Math.floor(t.stats.kpm):t.problemKPMs&&t.problemKPMs.length>0?Math.floor(t.problemKPMs.filter(e=>e>0).reduce((e,t)=>e+t,0)/t.problemKPMs.filter(e=>e>0).length):0})]}),(0,n.jsxs)("div",{className:eA().previewItem,children:[(0,n.jsx)("span",{children:"ランク:"}),(0,n.jsx)("span",{style:{color:ev.A.getRankColor(ev.A.getRank(t.stats&&"number"==typeof t.stats.kpm?Math.floor(t.stats.kpm):t.problemKPMs&&t.problemKPMs.length>0?Math.floor(t.problemKPMs.filter(e=>e>0).reduce((e,t)=>e+t,0)/t.problemKPMs.filter(e=>e>0).length):0))},children:ev.A.getRank(t.stats&&"number"==typeof t.stats.kpm?Math.floor(t.stats.kpm):t.problemKPMs&&t.problemKPMs.length>0?Math.floor(t.problemKPMs.filter(e=>e>0).reduce((e,t)=>e+t,0)/t.problemKPMs.filter(e=>e>0).length):0)})]}),(0,n.jsxs)("div",{className:eA().previewItem,children:[(0,n.jsx)("span",{children:"正解率:"}),(0,n.jsx)("span",{children:t.stats&&"number"==typeof t.stats.accuracy?t.stats.accuracy.toFixed(1):t.accuracy?t.accuracy.toFixed(1):t.correctKeyCount&&(t.mistakes||0===t.mistakes)?(t.correctKeyCount/(t.correctKeyCount+t.mistakes)*100).toFixed(1):0})]})]})]}),(0,n.jsx)("div",{className:eA().modalFooter,children:(0,n.jsx)(D,{variant:"primary",size:"medium",onClick:Z,loading:E,disabled:E||l||A.success,className:"".concat(eA().registerButton," ").concat(l||A.success?eA().disabledButton:""),children:A.success?"登録完了":l?"すでに登録済み":"登録"})})]})}),G&&(0,n.jsx)("div",{className:eA().modalOverlay,children:(0,n.jsxs)(k.P.div,{className:eA().modalContent,initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:400,damping:30},children:[(0,n.jsx)("div",{className:eA().cornerDecoration,style:{top:10,left:10},children:(0,n.jsx)("div",{className:eA().cornerTech})}),(0,n.jsx)("div",{className:eA().cornerDecoration,style:{top:10,right:10,transform:"scaleX(-1)"},children:(0,n.jsx)("div",{className:eA().cornerTech})}),(0,n.jsx)("div",{className:eA().cornerDecoration,style:{bottom:10,left:10,transform:"scaleY(-1)"},children:(0,n.jsx)("div",{className:eA().cornerTech})}),(0,n.jsx)("div",{className:eA().cornerDecoration,style:{bottom:10,right:10,transform:"scale(-1)"},children:(0,n.jsx)("div",{className:eA().cornerTech})}),(0,n.jsx)("div",{className:eA().scanlines}),(0,n.jsx)("div",{className:eA().dotPattern}),(0,n.jsxs)("div",{className:eA().modalHeader,children:[(0,n.jsx)("h2",{className:eA().modalTitle,children:"デバッグ情報"}),(0,n.jsx)(D,{variant:"default",size:"small",onClick:X,className:eA().closeButton,children:"✕"})]}),(0,n.jsx)("div",{className:eA().modalBody,children:(0,n.jsx)("pre",{className:eA().debugInfo,children:JSON.stringify(R,null,2)})}),(0,n.jsx)("div",{className:eA().modalFooter,children:(0,n.jsx)(D,{variant:"primary",size:"medium",onClick:X,className:eA().closeButton,children:"閉じる"})})]})})]})},eW={fade:{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.05},transition:{type:"spring",stiffness:350,damping:25,duration:.4}},gameComplete:{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1,transition:{type:"spring",stiffness:450,damping:25,duration:.4}},exit:{opacity:0,scale:1.05,transition:{duration:.2}}},menuReveal:{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",stiffness:500,damping:30,duration:.6}}},eX=(e,t)=>t===x.RESULT?eW.gameComplete:t===x.MAIN_MENU?eW.menuReveal:eW.fade,eQ=e=>{let{isActive:t}=e;return(0,n.jsx)(k.P.div,{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.12)",zIndex:10,pointerEvents:"none"},initial:{opacity:0},animate:{opacity:.3*!!t},exit:{opacity:0},transition:{duration:.1}})},e$=null,e0=()=>{let{navigateTo:e}=f(),[t,a]=(0,s.useState)(!1);return{goToScreen:function(n){var s;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{playSound:!0,soundType:"button",immediate:!1,gameState:null};if(t&&!r.immediate)return;let o=(null==(s=window.history.state)?void 0:s.screen)||x.MAIN_MENU;if(n===x.SETTINGS){try{p.A.context&&"suspended"===p.A.context.state&&p.A.context.resume(),!1!==r.playSound&&p.A.play(r.soundType||"button")}catch(e){console.error("音声再生でエラーが発生しました:",e)}e(x.MAIN_MENU),setTimeout(()=>{e$&&e$.openSettingsModal()},100);return}try{p.A.context&&"suspended"===p.A.context.state&&p.A.context.resume(),!1!==r.playSound&&n!==x.RESULT&&(r.from!==x.GAME||n!==x.MAIN_MENU)&&p.A.play(r.soundType||"button"),console.log("画面遷移を実行します:",n,"サウンド:",!1!==r.playSound?"有効 (".concat(r.soundType||"button",")"):"無効","遷移元:",r.from||o)}catch(e){console.error("音声再生でエラーが発生しました:",e)}a(!0);let i={screen:n,options:{...r,from:r.from||o}};window.history.replaceState(i,"",window.location.pathname);let l=20;(n===x.RESULT||r.immediate)&&(l=0),n===x.MAIN_MENU&&r.from===x.RESULT&&(console.log("ResultScreenからメインメニューへの遷移を優先処理します"),l=0,a(!1)),setTimeout(()=>{r.gameState&&n===x.RANKING?(console.log("ランキング画面に遷移するためのゲーム状態データ:",r.gameState),e(n,r.gameState)):e(n),setTimeout(()=>{a(!1)},200)},l)},isTransitioning:t}},e1=()=>{let{currentScreen:e,navigateTo:t,gameState:a}=f(),[r,o]=(0,s.useState)(null),[i,l]=(0,s.useState)(!1),{goToScreen:c}=e0(),[d,u]=(0,s.useState)(!1),m=N(),{soundEnabled:_,bgmEnabled:g,sfxEnabled:p}=m||{};null==m||m.soundSystem,e$=X(),(0,s.useEffect)(()=>{if(e===x.SETTINGS&&r!==x.SETTINGS&&(t(x.MAIN_MENU),setTimeout(()=>{e$?(e$.openSettingsModal(),console.log("設定モーダルを開きました")):console.warn("設定モーダルコントローラが見つかりません")},100)),r!==e){l(!0);let t=setTimeout(()=>{l(!1)},200);return o(e),()=>clearTimeout(t)}},[e,r,t]),(0,s.useEffect)(()=>{null===r&&l(!1)},[r]);let h=eX(r,e);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eQ,{isActive:i}),(0,n.jsx)(T.N,{mode:"wait",children:(0,n.jsx)(k.P.div,{initial:"initial",animate:"animate",exit:"exit",variants:h,style:{width:"100%",height:"100%"},children:(()=>{let{settings:t}=f();switch(e){case x.GAME:return(0,n.jsx)(ek,{});case x.SETTINGS:return(0,n.jsx)(Q,{});case x.RESULT:let s=a.stats||{};return console.log("TransitionManager: ResultScreenに渡す統計データ",s),(0,n.jsx)(eM,{stats:s,onClickRetry:()=>c(x.GAME,{playSound:!0}),onClickMenu:()=>c(x.MAIN_MENU,{playSound:!0}),onClickRanking:()=>c(x.RANKING,{playSound:!0,gameState:{stats:s}}),playSound:!0});case x.RANKING:return(0,n.jsx)(eZ,{});case x.MAIN_MENU:default:return(0,n.jsx)(Q,{})}})()},e)})]})};var e2=a(1368),e5=a(5521),e3=a.n(e5);let e4=e=>{let{type:t="info",message:a,visible:r,onClose:o,duration:i=3e3,showIcon:l=!0,position:c="top-right"}=e,d=(0,s.useMemo)(()=>{switch(t){case"success":return{icon:"✓",className:"toast--success",ariaRole:"status",ariaLive:"polite"};case"error":return{icon:"✕",className:"toast--error",ariaRole:"alert",ariaLive:"assertive"};case"warning":return{icon:"!",className:"toast--warning",ariaRole:"status",ariaLive:"polite"};default:return{icon:"i",className:"toast--info",ariaRole:"status",ariaLive:"polite"}}},[t]),u=(0,s.useMemo)(()=>"toast--".concat(c),[c]);(0,s.useEffect)(()=>{if(r&&i>0){let e=setTimeout(o,i);return()=>clearTimeout(e)}},[r,i,o]);let m={topVariants:{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20}},bottomVariants:{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20}},transition:{type:"spring",stiffness:500,damping:30,mass:1}},_=c.includes("top")?m.topVariants:m.bottomVariants;return(0,n.jsx)(T.N,{children:r&&(0,n.jsxs)(k.P.div,{className:"".concat(e3().toast," ").concat(e3()[d.className]," ").concat(e3()[u]),role:d.ariaRole,"aria-live":d.ariaLive,initial:_.initial,animate:_.animate,exit:_.exit,transition:m.transition,children:[(0,n.jsxs)("div",{className:e3().toast__content,children:[l&&(0,n.jsx)("div",{className:e3().toast__icon,"aria-hidden":"true",children:(0,n.jsx)("span",{children:d.icon})}),(0,n.jsx)("div",{className:e3().toast__message,children:a}),(0,n.jsx)("button",{className:e3().toast__close_button,onClick:o,"aria-label":"通知を閉じる",children:"✕"})]}),i>0&&(0,n.jsx)(k.P.div,{className:e3().toast__progress,initial:{width:"100%"},animate:{width:0},transition:{duration:i/1e3,ease:"linear"},"aria-hidden":"true"})]})})},e8=(0,s.createContext)(),e6=e=>{let{children:t}=e,[a,r]=(0,s.useState)([]),o=(0,s.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,n=(0,e2.A)(),s={id:n,message:e,type:t,duration:a,visible:!0};return r(e=>[...e,s]),n},[]),i=(0,s.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;return o(e,"success",t)},[o]),l=(0,s.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;return o(e,"error",t)},[o]),c=(0,s.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;return o(e,"warning",t)},[o]),d=(0,s.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;return o(e,"info",t)},[o]),u=(0,s.useCallback)(e=>{r(t=>t.filter(t=>t.id!==e))},[]),m=(0,s.useCallback)(e=>{r(t=>t.map(t=>t.id===e?{...t,visible:!1}:t)),setTimeout(()=>{u(e)},300)},[u]),_=(0,s.useCallback)(()=>{r([])},[]);return(0,n.jsxs)(e8.Provider,{value:{addToast:o,showSuccess:i,showError:l,showWarning:c,showInfo:d,closeToast:m,clearAllToasts:_},children:[t,(0,n.jsx)("div",{className:"toast-container",children:a.map(e=>(0,n.jsx)(e4,{type:e.type,message:e.message,visible:e.visible,duration:e.duration,onClose:()=>m(e.id)},e.id))})]})};function e9(e){let{children:t}=e;return(0,s.useEffect)(()=>{let e=p.A.getAudioContext();console.log("[AudioInitializer] AudioContextの初期状態:",e?e.state:"unavailable");let t=async()=>{try{e&&"suspended"===e.state&&(await e.resume(),console.log("[AudioInitializer] AudioContextを再開しました:",e.state)),await p.A.initializeAllSounds(),console.log("[AudioInitializer] 重要な効果音をプリロードしました");let a=e.createBuffer(1,1,22050),n=e.createBufferSource();n.buffer=a,n.connect(e.destination),n.start(0),document.removeEventListener("click",t),document.removeEventListener("keydown",t),document.removeEventListener("touchstart",t)}catch(e){console.error("[AudioInitializer] 音声システムの初期化エラー:",e)}};document.addEventListener("click",t,{once:!0}),document.addEventListener("keydown",t,{once:!0}),document.addEventListener("touchstart",t,{once:!0}),console.log("[AudioInitializer] 音声システムの初期化準備完了")},[]),(0,n.jsx)(e6,{children:(0,n.jsx)(I,{children:(0,n.jsx)(v,{children:t})})})}var e7=a(7643),te=a.n(e7),tt=a(2699),ta=a.n(tt);let tn=(e,t)=>{},ts=(e,t)=>{console.error(e,t)},tr=e=>{let{isOpen:t,onClose:r,backgroundRef:o}=e,{gameState:i,setGameState:l,currentScreen:c}=f(),[d,u]=(0,s.useState)(5),[m,_]=(0,s.useState)("settings");(0,s.useEffect)(()=>{t&&i&&i.requiredProblemCount&&(u(i.requiredProblemCount),tn("[管理者設定] 現在のお題数を読み込みました:",i.requiredProblemCount))},[t,i]);let[g,p]=(0,s.useState)(!1),[h,y]=(0,s.useState)(!1),[x,b]=(0,s.useState)(""),[S,v]=(0,s.useState)([]),[k,T]=(0,s.useState)(!1),[P,E]=(0,s.useState)(!1),[C,N]=(0,s.useState)("ALL"),[I,M]=(0,s.useState)("spa"),[j,A]=(0,s.useState)("normal"),[w,R]=(0,s.useState)(!1),[B,G]=(0,s.useState)(!1),O=[{id:"ALL",name:"全ての画面"},{id:"MAIN_MENU",name:"メインメニュー"},{id:"GAME",name:"ゲーム画面"},{id:"RESULT",name:"リザルト画面"},{id:"RANKING",name:"ランキング画面"},{id:"SETTINGS",name:"設定画面"},{id:"CREDITS",name:"クレジット画面"}],L=(0,s.useCallback)(()=>{let e=document.querySelector("body > div")||document.querySelector("#__next > div")||document.querySelector("main")||document.body;if(!e)throw Error("メインコンテナ要素が見つかりません");return e},[]),F=(0,s.useCallback)(()=>{try{tn("内部背景要素を検索中..."),tn("現在の選択画面: ".concat(C));let e={MAIN_MENU:['[class*="MainMenu_mainContainer"]',".MainMenu_mainContainer",'[class*="mainContainer"]',".mainContainer","#main-menu"],GAME:['[class*="GameScreen_gameContainer"]',".GameScreen_gameContainer",'[class*="gameContainer"]',".gameContainer","#game-screen"],RESULT:['[class*="ResultScreen_container"]',".ResultScreen_container","#result-screen"],RANKING:['[class*="RankingScreen_container"]',".RankingScreen_container","#ranking-screen"],SETTINGS:['[class*="SettingsScreen_container"]',".SettingsScreen_container","#settings-screen"],CREDITS:['[class*="CreditsScreen_container"]',".CreditsScreen_container","#credits-screen"]}[C]||[],t=null;for(let a of e){let e=Array.from(document.querySelectorAll(a));if(tn('セレクタ "'.concat(a,'" で ').concat(e.length," 個の要素が見つかりました")),e.length>0){let a=e.filter(e=>{let t=e.getBoundingClientRect(),a=window.getComputedStyle(e);return"none"!==a.display&&"hidden"!==a.visibility&&t.width>50&&t.height>50&&t.top>=0&&t.left>=0&&t.bottom<=window.innerHeight&&t.right<=window.innerWidth});if(a.length>0){t=a[0],tn("表示中の要素を発見しました",t);break}t||(t=e[0],tn("非表示状態の要素を発見しました",t))}}if(!t)for(let e of(tn("特定の要素が見つからなかったため、汎用セレクタを試します"),['[class*="menu"]','[class*="container"]','[class*="content"]','[class*="screen"]','[class*="wrapper"]','[class*="page"]',".container",".main",".content",".app-container","main","#__next > div","body > div"])){let a=Array.from(document.querySelectorAll(e));if(a.length>0){let e=a.filter(e=>{let t=e.getBoundingClientRect(),a=window.getComputedStyle(e);return"none"!==a.display&&"hidden"!==a.visibility&&t.width>100&&t.height>100});if(e.length>0){t=e.sort((e,t)=>{let a=e.getBoundingClientRect(),n=t.getBoundingClientRect();return n.width*n.height-a.width*a.height})[0],tn("汎用セレクタから要素を発見しました",t);break}t||(t=a[0],tn("汎用セレクタから非表示要素を発見しました",t))}}if(!t&&"MAIN_MENU"===C){let e=Array.from(document.body.querySelectorAll("*")).filter(e=>{let t=e.getBoundingClientRect(),a=window.getComputedStyle(e),n=e.parentNode===document.body||e.parentNode.parentNode===document.body,s=t.width>200&&t.height>200,r="none"!==a.display&&"hidden"!==a.visibility;return n&&s&&r}).sort((e,t)=>{let a=e.getBoundingClientRect(),n=t.getBoundingClientRect();return n.width*n.height-a.width*a.height});e.length>0&&(t=e[0],tn("最終手段: サイズの大きな要素を発見しました",t))}if(!t){tn("物理的なDOM要素を探索します");let e=[];document.querySelectorAll('h1, h2, [class*="title"]').forEach(t=>{let a=t.textContent.toLowerCase();if(a.includes("manaby typing")||a.includes("typing game")||a.includes("タイピングゲーム")){let a=t.parentElement;for(;a&&a!==document.body;){let t=a.getBoundingClientRect();if(t.width>300&&t.height>300){e.push(a);break}a=a.parentElement}}}),document.querySelectorAll("img").forEach(t=>{let a=t.src.toLowerCase();if(a.includes("logo")||a.includes("manaby")||a.includes("icon")){let a=t.parentElement;for(;a&&a!==document.body;){let t=a.getBoundingClientRect();if(t.width>300&&t.height>300){e.push(a);break}a=a.parentElement}}}),e.length>0&&(t=e.sort((e,t)=>{let a=e.getBoundingClientRect(),n=t.getBoundingClientRect();return n.width*n.height-a.width*a.height})[0],tn("コンテンツマーカーから親要素を発見しました",t))}return t||(t=L(),tn("内部要素は見つからなかったため、メインコンテナを使用します",t)),t}catch(e){throw ts("内部背景要素の検索中にエラーが発生しました:",e),alert("内部背景要素の検出に問題が発生しました。別のキャプチャモードをお試しください。"),Error("内部背景要素の検出に失敗しました")}},[C,L]),D=(0,s.useCallback)(e=>{e(!0),setTimeout(()=>{e(!1)},3e3)},[]);(0,s.useEffect)(()=>{let e=i.requiredProblemCount||5;tn("[管理者モード] 現在のお題数設定:",e),u(e),N(c||"ALL")},[i,t,c]),(0,s.useEffect)(()=>{t&&"gallery"===m&&C&&V()},[t,m,C]);let V=async()=>{T(!0);try{let e=await eH.getScreenBackgroundsFromFirebase(C,20);tn("".concat(K(C),"用の背景を取得しました:"),e.length),v(e)}catch(e){ts("背景の取得中にエラーが発生しました:",e)}finally{T(!1)}},K=(0,s.useCallback)(e=>{let t=O.find(t=>t.id===e);return t?t.name:e},[O]),z=(0,s.useCallback)(e=>{"Escape"===e.key&&t&&r()},[t,r]);(0,s.useEffect)(()=>(t&&document.addEventListener("keydown",z),()=>{document.removeEventListener("keydown",z)}),[t,z]);let U=e=>{switch(e){case"spa":return"SPA画面全体";case"container":return"オレンジドット背景";case"spa-background":return"SPA内部背景";default:return e}},H=async()=>{try{let e;switch(p(!0),I){case"container":if(null==o?void 0:o.current)e=o.current,tn("外側ドット背景をキャプチャします:",e);else throw Error("外側ドット背景要素の参照が取得できません");break;case"spa-background":try{e=F(),tn("SPA内部背景をキャプチャします:",e)}catch(e){throw ts("SPA内部背景の取得に失敗しました:",e),alert("現在の画面(".concat(K(C),")から内部背景を特定できませんでした。別の画面に切り替えるか、別のキャプチャモードを選択してください。")),e}break;default:e=L(),tn("SPA画面全体をキャプチャします:",e)}let t=(await ta()(e,{useCORS:!0,allowTaint:!0,backgroundColor:null,logging:!1})).toDataURL("image/png"),a=U(I),n="".concat(x||"管理者","の").concat(K(C),"用").concat(a),s=await eH.saveScreenBackgroundToFirebase(C,x||"管理者",t,n,{captureMode:I});s&&(tn("背景を保存しました！ ID:",s),D(y),"gallery"===m&&V())}catch(e){ts("背景の保存中にエラーが発生しました:",e),alert("背景の保存に失敗しました: ".concat(e.message))}finally{p(!1)}},q=e=>{try{var t;let a=(null==(t=e.cssStyleInfo)?void 0:t.captureMode)||"spa",n=e.screenId||"ALL",s=e.imageData;switch(a){case"container":if(null==o?void 0:o.current){let e=o.current;e.style.backgroundImage="url(".concat(s,")"),e.style.backgroundSize="cover",e.style.backgroundPosition="center",tn("外側ドット背景を適用しました")}else throw Error("外側ドット背景要素の参照が取得できません");break;case"spa-background":try{let e=F();e.style.backgroundImage="url(".concat(s,")"),e.style.backgroundSize="cover",e.style.backgroundPosition="center",tn("SPA内部背景を適用しました")}catch(e){throw Error("SPA内部背景の適用に失敗しました。画面を切り替えてみてください。")}break;default:let r=L();r.style.backgroundImage="url(".concat(s,")"),r.style.backgroundSize="cover",r.style.backgroundPosition="center",tn("SPA画面全体の背景を適用しました")}let i=e.cssStyleInfo||null;if(i){let e;e="container"===a&&(null==o?void 0:o.current)?o.current:"spa-background"===a?F():L(),Object.entries(i).forEach(t=>{let[a,n]=t;"backgroundImage"!==a&&"captureMode"!==a&&(e.style[a]=n)})}try{localStorage.setItem("isAdmin","true"),localStorage.setItem("savedBackgroundImage_".concat(a,"_").concat(n),s),i&&localStorage.setItem("savedBackgroundStyle_".concat(a,"_").concat(n),JSON.stringify(i));let t=JSON.parse(localStorage.getItem("activeBackgrounds")||"{}");t[a]||(t[a]={}),t[a][n]={id:e.id,timestamp:new Date().toISOString()},localStorage.setItem("activeBackgrounds",JSON.stringify(t)),tn("".concat(K(n),"用の").concat(U(a),"を適用しました"))}catch(e){ts("背景情報をlocalStorageに保存できませんでした:",e)}D(E)}catch(e){ts("背景の適用中にエラーが発生しました:",e),alert("背景の適用に失敗しました: ".concat(e.message))}},J=async e=>{if(window.confirm("この背景を本当に削除しますか？この操作は取り消せません。"))try{await eH.deleteBackgroundFromFirebase(e)&&(tn("背景を削除しました:",e),D(E),V())}catch(e){ts("背景の削除中にエラーが発生しました:",e)}},Y=async()=>{if(window.confirm("難易度「".concat(W(j),"」のランキングをすべて削除しますか？この操作は取り消せません。")))try{R(!0),await eH.deleteRankingsByDifficulty(j)&&(tn("難易度「".concat(j,"」のランキングを削除しました")),D(G))}catch(e){ts("ランキング削除中にエラーが発生しました:",e),alert("ランキングの削除に失敗しました: ".concat(e.message))}finally{R(!1)}},Z=async()=>{if(window.confirm("すべての難易度のランキングを削除しますか？この操作は取り消せません。"))try{R(!0),await eH.deleteAllRankings()&&(tn("すべてのランキングデータを削除しました"),D(G))}catch(e){ts("ランキング削除中にエラーが発生しました:",e),alert("ランキングの削除に失敗しました: ".concat(e.message))}finally{R(!1)}},W=e=>({easy:"かんたん",normal:"ふつう",hard:"むずかしい"})[e]||e,X=e=>_(e),Q=e=>N(e.target.value),$=e=>M(e);return t?(0,n.jsx)("div",{className:te().adminPopup__overlay,onClick:e=>{e.target.classList.contains(te().adminPopup__overlay)&&r()},children:(0,n.jsxs)("div",{className:te().adminPopup,children:[(0,n.jsxs)("div",{className:te().adminPopup__header,children:[(0,n.jsx)("h2",{className:te().adminPopup__title,children:"管理者設定"}),(0,n.jsx)("button",{className:te().adminPopup__closeButton,onClick:r,"aria-label":"閉じる",children:"\xd7"})]}),(0,n.jsxs)("div",{className:te().adminPopup__tabs,children:[(0,n.jsx)("button",{className:"".concat(te().adminPopup__tab," ").concat("settings"===m?te()["adminPopup__tab--active"]:""),onClick:()=>X("settings"),children:"設定"}),(0,n.jsx)("button",{className:"".concat(te().adminPopup__tab," ").concat("background"===m?te()["adminPopup__tab--active"]:""),onClick:()=>X("background"),children:"背景保存"}),(0,n.jsx)("button",{className:"".concat(te().adminPopup__tab," ").concat("gallery"===m?te()["adminPopup__tab--active"]:""),onClick:()=>X("gallery"),children:"着せ替え"}),(0,n.jsx)("button",{className:"".concat(te().adminPopup__tab," ").concat("rankings"===m?te()["adminPopup__tab--active"]:""),onClick:()=>X("rankings"),children:"ランキング"})]}),(0,n.jsxs)("div",{className:te().adminPopup__content,children:["settings"===m&&(0,n.jsxs)("div",{className:te().adminPopup__formGroup,children:[(0,n.jsx)("label",{className:te().adminPopup__label,htmlFor:"problemCount",children:"クリアに必要なお題数"}),(0,n.jsx)("input",{className:te().adminPopup__input,id:"problemCount",type:"number",min:"1",max:"20",value:d,onChange:e=>u(parseInt(e.target.value,10)||1)}),(0,n.jsx)("p",{className:te().adminPopup__info,children:"ゲームをクリアするために必要なお題の数を設定します（1〜20の範囲）"})]}),"background"===m&&(0,n.jsxs)("div",{className:te().adminPopup__backgroundSave,children:[(0,n.jsxs)("div",{className:te().adminPopup__formGroup,children:[(0,n.jsx)("label",{className:te().adminPopup__label,htmlFor:"playerName",children:"保存者名"}),(0,n.jsx)("input",{className:te().adminPopup__input,id:"playerName",type:"text",value:x,onChange:e=>b(e.target.value),placeholder:"名前を入力（例：マナビー）",maxLength:20})]}),(0,n.jsxs)("div",{className:te().adminPopup__formGroup,children:[(0,n.jsx)("label",{className:te().adminPopup__label,htmlFor:"screenSelector",children:"背景を適用する画面"}),(0,n.jsx)("select",{className:te().adminPopup__select,id:"screenSelector",value:C,onChange:Q,children:O.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))}),(0,n.jsx)("p",{className:te().adminPopup__info,children:"背景を適用する画面を選択します。「全ての画面」を選ぶとすべての画面に適用されます。"})]}),(0,n.jsxs)("div",{className:te().adminPopup__formGroup,children:[(0,n.jsx)("label",{className:te().adminPopup__label,children:"キャプチャする範囲"}),(0,n.jsxs)("div",{className:te().adminPopup__radioGroup,children:[(0,n.jsxs)("label",{className:te().adminPopup__radioLabel,children:[(0,n.jsx)("input",{type:"radio",name:"captureMode",value:"spa",checked:"spa"===I,onChange:()=>$("spa"),className:te().adminPopup__radio}),(0,n.jsx)("span",{children:"SPA画面全体"})]}),(0,n.jsxs)("label",{className:te().adminPopup__radioLabel,children:[(0,n.jsx)("input",{type:"radio",name:"captureMode",value:"container",checked:"container"===I,onChange:()=>$("container"),className:te().adminPopup__radio}),(0,n.jsx)("span",{children:"オレンジドット背景のみ"})]}),(0,n.jsxs)("label",{className:te().adminPopup__radioLabel,children:[(0,n.jsx)("input",{type:"radio",name:"captureMode",value:"spa-background",checked:"spa-background"===I,onChange:()=>$("spa-background"),className:te().adminPopup__radio}),(0,n.jsx)("span",{children:"SPA内部背景のみ"})]})]}),(0,n.jsxs)("p",{className:te().adminPopup__info,children:["「SPA画面全体」：ゲーム画面を含むページ全体をキャプチャします。",(0,n.jsx)("br",{}),"「オレンジドット背景のみ」：画面外側のドットパターン背景だけをキャプチャします。",(0,n.jsx)("br",{}),"「SPA内部背景のみ」：ゲーム画面内の背景部分だけをキャプチャします。"]})]}),(0,n.jsxs)("div",{className:te().adminPopup__formGroup,children:[(0,n.jsx)("button",{className:"".concat(te().adminPopup__button," ").concat(te()["adminPopup__button--special"]),onClick:H,disabled:g,children:g?"保存中...":"".concat(U(I),"を").concat(K(C),"用に保存")}),(0,n.jsx)("p",{className:te().adminPopup__info,children:"選択した範囲をキャプチャして保存します。保存した背景は後で再利用できます。"})]}),h&&(0,n.jsxs)("div",{className:te().adminPopup__successMessage,children:[(0,n.jsx)("span",{className:te().adminPopup__successIcon,children:"✓"})," ","背景を保存しました！"]})]}),"gallery"===m&&(0,n.jsxs)("div",{className:te().adminPopup__backgroundGallery,children:[(0,n.jsx)("h3",{className:te().adminPopup__subTitle,children:"着せ替えギャラリー"}),(0,n.jsxs)("div",{className:te().adminPopup__formGroup,children:[(0,n.jsx)("label",{className:te().adminPopup__label,htmlFor:"screenSelectorGallery",children:"表示する画面"}),(0,n.jsx)("select",{className:te().adminPopup__select,id:"screenSelectorGallery",value:C,onChange:Q,children:O.map(e=>(0,n.jsxs)("option",{value:e.id,children:[e.name,"用"]},e.id))})]}),(0,n.jsx)("div",{className:te().adminPopup__resetContainer,children:(0,n.jsxs)("button",{className:"".concat(te().adminPopup__button," ").concat(te()["adminPopup__button--reset"]),onClick:()=>{try{["spa","container","spa-background"].forEach(e=>{try{switch(e){case"container":(null==o?void 0:o.current)&&(o.current.style.backgroundImage="",tn("外側ドット背景をリセットしました"));break;case"spa-background":try{F().style.backgroundImage="",tn("SPA内部背景をリセットしました")}catch(e){tn("SPA内部背景のリセットをスキップしました（要素が見つかりません）")}break;default:L().style.backgroundImage="",tn("SPA画面全体の背景をリセットしました")}localStorage.removeItem("savedBackgroundImage_".concat(e,"_").concat(C)),localStorage.removeItem("savedBackgroundStyle_".concat(e,"_").concat(C));let t=JSON.parse(localStorage.getItem("activeBackgrounds")||"{}");t[e]&&delete t[e][C],localStorage.setItem("activeBackgrounds",JSON.stringify(t))}catch(t){ts("".concat(e,"モードの背景リセット中にエラーが発生しました:"),t)}}),D(E)}catch(e){ts("背景のリセット中にエラーが発生しました:",e)}},children:[K(C),"の全背景をリセット"]})}),k?(0,n.jsx)("div",{className:te().adminPopup__loading,children:"読み込み中..."}):0===S.length?(0,n.jsxs)("p",{className:te().adminPopup__info,children:[K(C),"用の保存された背景がありません"]}):(0,n.jsx)("div",{className:te().adminPopup__grid,children:S.map(e=>{var t;return(0,n.jsxs)("div",{className:te().adminPopup__backgroundItem,children:[(0,n.jsx)("div",{className:te().adminPopup__backgroundImageContainer,children:(0,n.jsx)("img",{src:e.imageData,alt:e.title||"保存された背景",className:te().adminPopup__backgroundImage})}),(0,n.jsxs)("div",{className:te().adminPopup__backgroundInfo,children:[(0,n.jsx)("p",{className:te().adminPopup__backgroundTitle,children:e.title||"無題の背景"}),(0,n.jsxs)("p",{className:te().adminPopup__backgroundMeta,children:[e.playerName||"匿名"," |",e.screenId?" ".concat(K(e.screenId),"用"):"全画面用"," ","|",U((null==(t=e.cssStyleInfo)?void 0:t.captureMode)||"spa")," |",new Date(e.timestamp).toLocaleDateString("ja-JP")]}),(0,n.jsxs)("div",{className:te().adminPopup__buttonGroup,children:[(0,n.jsx)("button",{className:"".concat(te().adminPopup__button," ").concat(te()["adminPopup__button--apply"]),onClick:()=>q(e),children:"適用"}),(0,n.jsx)("button",{className:"".concat(te().adminPopup__button," ").concat(te()["adminPopup__button--delete"]),onClick:()=>J(e.id),children:"削除"})]})]})]},e.id)})}),P&&(0,n.jsxs)("div",{className:te().adminPopup__successMessage,children:[(0,n.jsx)("span",{className:te().adminPopup__successIcon,children:"✓"})," ","背景を適用しました！"]}),(0,n.jsx)("div",{className:te().adminPopup__refreshContainer,children:(0,n.jsx)("button",{className:"".concat(te().adminPopup__button," ").concat(te()["adminPopup__button--refresh"]),onClick:V,disabled:k,children:k?"更新中...":"一覧を更新"})})]}),"rankings"===m&&(0,n.jsxs)("div",{className:te().adminPopup__rankingManagement,children:[(0,n.jsx)("h3",{className:te().adminPopup__subTitle,children:"ランキング管理"}),(0,n.jsxs)("div",{className:te().adminPopup__formGroup,children:[(0,n.jsx)("label",{className:te().adminPopup__label,htmlFor:"difficultySelector",children:"難易度を選択"}),(0,n.jsxs)("select",{className:te().adminPopup__select,id:"difficultySelector",value:j,onChange:e=>A(e.target.value),children:[(0,n.jsx)("option",{value:"easy",children:"かんたん"}),(0,n.jsx)("option",{value:"normal",children:"ふつう"}),(0,n.jsx)("option",{value:"hard",children:"むずかしい"})]}),(0,n.jsx)("p",{className:te().adminPopup__info,children:"削除する難易度を選択します。"})]}),(0,n.jsxs)("div",{className:te().adminPopup__buttonGroup,children:[(0,n.jsx)("button",{className:"".concat(te().adminPopup__button," ").concat(te()["adminPopup__button--delete"]),onClick:Y,disabled:w,children:w?"削除中...":"".concat(W(j),"のランキングを削除")}),(0,n.jsx)("button",{className:"".concat(te().adminPopup__button," ").concat(te()["adminPopup__button--danger"]),onClick:Z,disabled:w,children:w?"削除中...":"すべてのランキングを削除"})]}),(0,n.jsx)("div",{className:te().adminPopup__warningBox,children:(0,n.jsxs)("p",{className:te().adminPopup__warning,children:[(0,n.jsx)("span",{className:te().adminPopup__warningIcon,children:"⚠️"}),"注意: 削除したランキングデータは復元できません。"]})}),B&&(0,n.jsxs)("div",{className:te().adminPopup__successMessage,children:[(0,n.jsx)("span",{className:te().adminPopup__successIcon,children:"✓"})," ","ランキングデータを削除しました！"]})]})]}),(0,n.jsxs)("div",{className:te().adminPopup__footer,children:[(0,n.jsx)("button",{className:"".concat(te().adminPopup__button," ").concat(te()["adminPopup__button--secondary"]),onClick:r,children:"閉じる"}),"settings"===m&&(0,n.jsx)("button",{className:"".concat(te().adminPopup__button," ").concat(te()["adminPopup__button--primary"]),onClick:()=>{tn("[管理者設定] お題数を変更:",d),l({...i,requiredProblemCount:d});try{let e=a(2219).Ay;if(e&&"function"==typeof e.saveGameSettings){let t={...e.getGameSettings(),requiredProblemCount:d};e.saveGameSettings(t),tn("[管理者設定] 設定を永続化しました",t)}}catch(e){ts("設定の永続化中にエラーが発生しました:",e)}r()},children:"保存"})]})]})}):null},to=()=>h.Ay.isAdminMode(),ti=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;try{return await eH.getBackgroundsFromFirebase(e)}catch(e){return console.error("クラウド背景の取得中にエラーが発生しました:",e),[]}},tl=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;try{return await eH.getScreenBackgroundsFromFirebase(e,t)}catch(t){return console.error("画面用背景の取得中にエラーが発生しました (".concat(e,"):"),t),[]}},tc={enableAdminMode:()=>h.Ay.setAdminMode(!0),disableAdminMode:()=>h.Ay.setAdminMode(!1),isAdminMode:to},td=e=>{let{backgroundRef:t}=e,[a,r]=(0,s.useState)(!1);(0,s.useEffect)(()=>{console.log("[管理者モード] 現在の状態:",tc.isAdminMode()?"有効":"無効")},[]),(0,s.useEffect)(()=>{let e=e=>{(e.ctrlKey||e.metaKey)&&(64===e.keyCode||"@"===e.key)&&(e.preventDefault(),console.log("[管理者モード] Ctrl + @ キーが検出されました"),tc.enableAdminMode(),console.log("[管理者モード] 有効化されました"),r(!0))};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[]);let o=()=>{r(!1),console.log("[管理者モード] モーダルを閉じました")};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(tr,{isOpen:a,onClose:o,onDisable:()=>{tc.disableAdminMode(),console.log("[管理者モード] 無効化されました"),o()},backgroundRef:t})})};var tu=a(8326),tm=a.n(tu);(0,s.forwardRef)((e,t)=>{let{className:a=""}=e,r=(0,s.useRef)(null),o=(0,s.useRef)(null),i=(0,s.useRef)([]),[l,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(()=>({width:window.innerWidth||1024,height:window.innerHeight||768}));(0,s.useImperativeHandle)(t,()=>({captureBackground:async()=>r.current?(console.log("[StarfieldBackground] キャンバスのキャプチャを開始"),new Promise(e=>{let t=r.current.toDataURL("image/png");console.log("[StarfieldBackground] キャンバスのキャプチャが完了"),e(t)})):null,changeColorScheme:e=>{console.log("[StarfieldBackground] 色調を変更: ".concat(e)),"blue"===e?i.current.forEach(e=>{let t=.8*e.z+.2;e.color="rgba(100, 180, 255, ".concat(t,")")}):"red"===e?i.current.forEach(e=>{let t=.8*e.z+.2;e.color="rgba(255, 130, 100, ".concat(t,")")}):"purple"===e?i.current.forEach(e=>{let t=.8*e.z+.2;e.color="rgba(180, 120, 255, ".concat(t,")")}):"green"===e?i.current.forEach(e=>{let t=.8*e.z+.2;e.color="rgba(100, 220, 150, ".concat(t,")")}):i.current.forEach(e=>{let t=.8*e.z+.2,a=Math.min(255,200+Math.floor((1-e.z)*55));e.color="rgba(255, 255, ".concat(a,", ").concat(t,")")})},setSpeed:e=>{console.log("[StarfieldBackground] アニメーション速度を変更: ".concat(e)),_(e)},style:{get backgroundImage(){return""},set backgroundImage(value){console.log("[StarfieldBackground] 背景画像の設定は無視されます（Canvas使用中）")}}}));let[m,_]=(0,s.useState)(.5),g=(e,t,a)=>{if(t<=0||a<=0)return console.warn("[StarfieldBackground] 無効な寸法でのスター初期化をスキップします:",t,a),[];console.log("[StarfieldBackground] ".concat(e,"個の星を初期化中: ").concat(t,"x").concat(a));let n=[];for(let s=0;s<e;s++){let e,s=Math.random(),r=.9*Math.random()+.1,o=.8*r+.2,i=(s>.85?"rgba(120, 180, 255, %b)":s>.7?"rgba(180, 220, 255, %b)":"rgba(255, 255, 255, %b)").replace("%b",o.toString()),l=(Math.random()-.5)*t*1.5,c=(Math.random()-.5)*a*1.5;n.push({x:l,y:c,z:r,size:Math.floor(2.5*r)+1,color:i,hasTrail:Math.random()>.8-.3*r,trailLength:Math.floor(6*Math.random())+3,trailPositions:[],speedFactor:.8+.4*Math.random()})}return n},p=(e,t,a)=>{if(t<=0||a<=0||!e.length)return e;let n=t/2,s=a/2;return e.map(e=>{let r=e.speedFactor||1;if(e.z-=.01*m*e.z*r,e.z<=.1){let n,s,r=Math.random(),o=.9+.1*Math.random();if(.4>Math.random()){let e=Math.random()*Math.PI*2;n=240*Math.cos(e)*.5,s=240*Math.sin(e)*.5}else{let e=Math.random()*Math.PI*2,r=.6*Math.max(t,a);n=Math.cos(e)*r,s=Math.sin(e)*r}return{...e,x:n,y:s,z:o,size:Math.floor(2.5*o)+1,color:(r>.85?"rgba(120, 180, 255, %b)":r>.7?"rgba(180, 220, 255, %b)":"rgba(255, 255, 255, %b)").replace("%b",(.8*o+.2).toString()),hasTrail:Math.random()>.8-.3*o,trailLength:Math.floor(6*Math.random())+3,trailPositions:[],speedFactor:.8+.4*Math.random()}}if(e.hasTrail){let t=e.x/e.z+n,a=e.y/e.z+s,r=e.trailPositions[0];!r||50>Math.abs(t-r.x)&&50>Math.abs(a-r.y)?(e.trailPositions.unshift({x:t,y:a}),e.trailPositions.length>e.trailLength&&e.trailPositions.pop()):e.trailPositions=[{x:t,y:a}]}return e})},h=(e,t,a,n,s,r)=>{t.forEach(t=>{let o=t.x/t.z+s,i=t.y/t.z+r;if(o>=0&&o<=a&&i>=0&&i<=n){if(t.hasTrail&&t.trailPositions.length>1){e.beginPath(),e.moveTo(o,i);for(let a=0;a<t.trailPositions.length;a++){let n=t.trailPositions[a],s=1-a/t.trailPositions.length;e.strokeStyle=t.color.replace(")",", ".concat(s,")")),e.lineTo(n.x,n.y)}e.stroke()}e.fillStyle=t.color;let a=t.size;a<=1?e.fillRect(Math.floor(o),Math.floor(i),a,a):(e.fillRect(Math.floor(o)-Math.floor(a/2),Math.floor(i),a,1),e.fillRect(Math.floor(o),Math.floor(i)-Math.floor(a/2),1,a),e.fillRect(Math.floor(o),Math.floor(i),1,1))}})},y=(e,t,a,n)=>{e.clearRect(0,0,a,n);let s=a/2,r=n/2;e.save(),e.beginPath(),e.rect(0,0,a,n),e.rect(s-400,r-300,800,600);try{e.clip("evenodd")}catch(o){console.log("[StarfieldBackground] 高度なクリッピングがサポートされていないためフォールバックを使用します"),e.restore(),e.save(),e.beginPath(),e.rect(0,0,a,r-300),e.clip(),h(e,t,a,n,s,r),e.restore(),e.save(),e.beginPath(),e.rect(0,r+300,a,n-(r+300)),e.clip(),h(e,t,a,n,s,r),e.restore(),e.save(),e.beginPath(),e.rect(0,r-300,s-400,600),e.clip(),h(e,t,a,n,s,r),e.restore(),e.save(),e.beginPath(),e.rect(s+400,r-300,a-(s+400),600),e.clip();return}t.forEach(t=>{let o=t.x/t.z+s,i=t.y/t.z+r;if(o>=0&&o<=a&&i>=0&&i<=n){if(t.hasTrail&&t.trailPositions.length>1){e.beginPath(),e.moveTo(o,i);for(let a=0;a<t.trailPositions.length;a++){let n=t.trailPositions[a],s=1-a/t.trailPositions.length;e.strokeStyle=t.color.replace(")",", ".concat(s,")")),e.lineTo(n.x,n.y)}e.stroke()}e.fillStyle=t.color;let a=t.size;a<=1?e.fillRect(Math.floor(o),Math.floor(i),a,a):(e.fillRect(Math.floor(o)-Math.floor(a/2),Math.floor(i),a,1),e.fillRect(Math.floor(o),Math.floor(i)-Math.floor(a/2),1,a),e.fillRect(Math.floor(o),Math.floor(i),1,1))}}),e.restore()},f=(0,s.useRef)({lastTimestamp:0,frames:0,fps:0}),x=()=>{let e=performance.now(),t=e-f.current.lastTimestamp;f.current.frames++,t>1e3&&(f.current.fps=Math.round(1e3*f.current.frames/t),f.current.frames=0,f.current.lastTimestamp=e,.1>Math.random()&&console.log("[StarfieldBackground] 現在のFPS: ".concat(f.current.fps)))},b=()=>{if(!r.current)return;let e=r.current,t=window.innerWidth,a=window.innerHeight;console.log("[StarfieldBackground] キャンバスをリサイズします: ".concat(t,"x").concat(a));try{let n=window.devicePixelRatio||1;e.width=t*n,e.height=a*n,e.style.width="".concat(t,"px"),e.style.height="".concat(a,"px");let s=e.getContext("2d");if(!s)return void console.error("[StarfieldBackground] キャンバスコンテキストが取得できません");s.scale(n,n);let r=Math.min(Math.floor(t*a/3e3),300);console.log("[StarfieldBackground] 星を初期化します。数: ".concat(r)),i.current=g(r,t,a),u({width:t,height:a}),console.log("[StarfieldBackground] リサイズ処理が完了しました")}catch(e){console.error("[StarfieldBackground] リサイズ中にエラーが発生しました:",e)}};return((0,s.useEffect)(()=>{c(!0),console.log("[StarfieldBackground] マウントされました。初期化を開始します。"),b(),window.addEventListener("resize",b)},[]),(0,s.useEffect)(()=>{if(!l)return;let e=!1;console.log("[StarfieldBackground] アニメーションを開始します。","寸法: ".concat(d.width,"x").concat(d.height),"星の数: ".concat(i.current.length)),f.current={lastTimestamp:performance.now(),frames:0,fps:0,lastLog:performance.now()};let t=a=>{try{if(r.current&&d.width>0&&d.height>0){x();let a=r.current.getContext("2d");if(!a)return;if(f.current.fps>0&&f.current.fps<30&&(e=!e)){o.current=requestAnimationFrame(t);return}i.current=p(i.current,d.width,d.height),y(a,i.current,d.width,d.height)}0===i.current.length&&d.width>0&&d.height>0&&(console.log("[StarfieldBackground] 星がないため再初期化します"),i.current=g(Math.min(Math.floor(d.width*d.height/3e3),300),d.width,d.height))}catch(e){console.error("[StarfieldBackground] アニメーション中にエラーが発生しました:",e)}o.current=requestAnimationFrame(t)};return o.current=requestAnimationFrame(t),()=>{o.current&&(cancelAnimationFrame(o.current),console.log("[StarfieldBackground] アニメーションを停止しました。")),l||window.removeEventListener("resize",b)}},[d,l]),l)?(0,n.jsxs)("div",{className:"".concat(tm().starfieldBackground," ").concat(a),"aria-hidden":"true","data-testid":"starfield-background",children:[(0,n.jsx)("canvas",{ref:r,className:tm().canvas,"data-stars-count":i.current.length,style:{willChange:"transform",backfaceVisibility:"hidden"}}),(0,n.jsx)("div",{className:tm().gameMask}),!1]}):null}).displayName="StarfieldBackground";var t_=a(8450),tg=a.n(t_);let tp=(0,s.forwardRef)((e,t)=>{let{className:a=""}=e,[r,o]=(0,s.useState)([]),[i,l]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{l(!0);let e=["#FF8C00","#FFA500","#FFD700","#FF4500","#FF7F50","#551800"],t=[];for(let a=0;a<150;a++)t.push({id:a,left:100*Math.random(),top:100*Math.random(),size:3*Math.random()+2,color:e[Math.floor(Math.random()*e.length)],animationDuration:3*Math.random()+2,animationDelay:2*Math.random(),isRound:Math.random()>.5});o(t)},[]),i)?(0,n.jsxs)("div",{ref:t,className:"".concat(tg().retroBackground," ").concat(a),"aria-hidden":"true",children:[(0,n.jsx)("div",{className:tg().backgroundBase}),r.map(e=>(0,n.jsx)("div",{style:{position:"absolute",left:"".concat(e.left,"%"),top:"".concat(e.top,"%"),width:"".concat(e.size,"px"),height:"".concat(e.size,"px"),backgroundColor:e.color,borderRadius:e.isRound?"50%":"0",boxShadow:"0 0 4px currentColor",animation:"".concat(tg().blink," ").concat(e.animationDuration,"s infinite ").concat(e.animationDelay,"s")}},e.id)),(0,n.jsx)("div",{className:tg().gridOverlay})]}):null});tp.displayName="RetroBackgroundOriginal";let th=(0,s.forwardRef)((e,t)=>{let{className:a=""}=e,[r,o]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{o(!0),console.log("[RetroBackground] 背景タイプ: ".concat("オリジナルのドット背景"))},[]),r)?(0,n.jsx)(tp,{ref:t,className:a}):null});function ty(e){let{position:t="bottom-right"}=e;return(0,n.jsx)(Y.Pz,{position:t})}function tf(){let[e,t]=(0,s.useState)(!1),a=(0,s.useRef)(null);return((0,s.useEffect)(()=>{t(!0)},[]),e)?(0,n.jsx)(e9,{children:(0,n.jsxs)("div",{className:o().container,children:[(0,n.jsx)(th,{ref:a}),(0,n.jsxs)(v,{children:[(0,n.jsx)(e1,{}),(0,n.jsx)(td,{backgroundRef:a})]}),(0,n.jsx)(ty,{position:"bottom-right"})]})}):null}th.displayName="RetroBackground"},7643:e=>{e.exports={adminPopup__overlay:"AdminPopup_adminPopup__overlay__f7PR6",adminPopup:"AdminPopup_adminPopup__GNkgZ",popIn:"AdminPopup_popIn__vQ99v",adminPopup__header:"AdminPopup_adminPopup__header__I4gsd",adminPopup__title:"AdminPopup_adminPopup__title__Mzscv",adminPopup__closeButton:"AdminPopup_adminPopup__closeButton__BmZE9",adminPopup__content:"AdminPopup_adminPopup__content__o5Kxz",adminPopup__formGroup:"AdminPopup_adminPopup__formGroup__h_AOx",adminPopup__label:"AdminPopup_adminPopup__label__Wl6ky",adminPopup__input:"AdminPopup_adminPopup__input__rSFj8",adminPopup__info:"AdminPopup_adminPopup__info__IN1_k",adminPopup__footer:"AdminPopup_adminPopup__footer__xzIxg",adminPopup__button:"AdminPopup_adminPopup__button__ap1TR","adminPopup__button--primary":"AdminPopup_adminPopup__button--primary__5I6N6","adminPopup__button--secondary":"AdminPopup_adminPopup__button--secondary__h97xt",adminPopup__tabs:"AdminPopup_adminPopup__tabs__9bU9j",adminPopup__tab:"AdminPopup_adminPopup__tab__0I90P","adminPopup__tab--active":"AdminPopup_adminPopup__tab--active__ZqFJ7",adminPopup__backgroundSave:"AdminPopup_adminPopup__backgroundSave__ryMov","adminPopup__button--special":"AdminPopup_adminPopup__button--special__V8Zbq",adminPopup__successMessage:"AdminPopup_adminPopup__successMessage__APQHJ",fadeIn:"AdminPopup_fadeIn__yI8Pv",adminPopup__successIcon:"AdminPopup_adminPopup__successIcon__ugudh",adminPopup__backgroundGallery:"AdminPopup_adminPopup__backgroundGallery__wDVe_",adminPopup__subTitle:"AdminPopup_adminPopup__subTitle__GUQAt",adminPopup__loading:"AdminPopup_adminPopup__loading__uygEE",adminPopup__grid:"AdminPopup_adminPopup__grid__wfFxl",adminPopup__backgroundItem:"AdminPopup_adminPopup__backgroundItem__6p479",adminPopup__backgroundImageContainer:"AdminPopup_adminPopup__backgroundImageContainer__SPDBY",adminPopup__backgroundImage:"AdminPopup_adminPopup__backgroundImage__4Da4D",adminPopup__backgroundInfo:"AdminPopup_adminPopup__backgroundInfo__20fMV",adminPopup__backgroundTitle:"AdminPopup_adminPopup__backgroundTitle__qmJ7j",adminPopup__backgroundMeta:"AdminPopup_adminPopup__backgroundMeta__GsbHr","adminPopup__button--apply":"AdminPopup_adminPopup__button--apply__b3m1O",adminPopup__refreshContainer:"AdminPopup_adminPopup__refreshContainer__P3Uq7","adminPopup__button--refresh":"AdminPopup_adminPopup__button--refresh__KWJlJ",adminPopup__resetContainer:"AdminPopup_adminPopup__resetContainer__Ee149","adminPopup__button--reset":"AdminPopup_adminPopup__button--reset__TdYQ4","adminPopup__button--delete":"AdminPopup_adminPopup__button--delete__5NwA7",adminPopup__radioGroup:"AdminPopup_adminPopup__radioGroup__KdoGy",adminPopup__radioLabel:"AdminPopup_adminPopup__radioLabel__jntK2",adminPopup__radio:"AdminPopup_adminPopup__radio__ZHfQv"}},7785:e=>{e.exports={fade_in:"GameStatusBar_fade_in__kMBeU",fadeIn:"GameStatusBar_fadeIn__shU4R",logo_animation:"GameStatusBar_logo_animation__PD64f",logoFadeIn:"GameStatusBar_logoFadeIn__fSEJL",status_bar:"GameStatusBar_status_bar__JeGwC",empty_bar:"GameStatusBar_empty_bar__MM97W",logo_container:"GameStatusBar_logo_container__IiJqk",manaby_logo:"GameStatusBar_manaby_logo__Nn9Op",status_info:"GameStatusBar_status_info__imU2E",status_item:"GameStatusBar_status_item__elgdV",status_label:"GameStatusBar_status_label__ws42F",status_value:"GameStatusBar_status_value__lpYBC",status_rank:"GameStatusBar_status_rank__WzXS3",level_display:"GameStatusBar_level_display__rEibH",level_text:"GameStatusBar_level_text__8UN3U",progress_bar:"GameStatusBar_progress_bar__nbOcs",progress_fill:"GameStatusBar_progress_fill__W953B",combo_container:"GameStatusBar_combo_container__JslVE",combo_value:"GameStatusBar_combo_value__D7U0h",combo_label:"GameStatusBar_combo_label__sRM1p",stats_container:"GameStatusBar_stats_container__ct0MW",score_display:"GameStatusBar_score_display__9oKyN",score_label:"GameStatusBar_score_label__0VaT0",score_value:"GameStatusBar_score_value__Cvdk6",rank_display:"GameStatusBar_rank_display__CcjZv",rank_label:"GameStatusBar_rank_label__TjkJW",rank_value:"GameStatusBar_rank_value__AglP3",rank_s:"GameStatusBar_rank_s__1w62L",rank_a:"GameStatusBar_rank_a__zZEWC",rank_b:"GameStatusBar_rank_b__oWKZz",rank_c:"GameStatusBar_rank_c__1o4OX",rank_d:"GameStatusBar_rank_d__cYZJ4",rank_f:"GameStatusBar_rank_f__jmhY0",typing_stats:"GameStatusBar_typing_stats__ortLF",kpm_display:"GameStatusBar_kpm_display__aELFH",kpm_label:"GameStatusBar_kpm_label__YHTOW",kpm_value:"GameStatusBar_kpm_value__XuN4D",completion:"GameStatusBar_completion__WgZTz"}},8001:(e,t,a)=>{Promise.resolve().then(a.bind(a,7117))},8326:e=>{e.exports={starfieldBackground:"StarfieldBackground_starfieldBackground__X_UKc",canvas:"StarfieldBackground_canvas__VFjn8",gameMask:"StarfieldBackground_gameMask__GohQC",debugInfo:"StarfieldBackground_debugInfo__X99p3"}},8334:e=>{e.exports={container:"page_container__aoG4z"}},8450:e=>{e.exports={retroBackground:"RetroBackground_retroBackground___1dfX",backgroundBase:"RetroBackground_backgroundBase__3nFa_",dotsContainer:"RetroBackground_dotsContainer__ZojHT",dot:"RetroBackground_dot__8seEJ",blink:"RetroBackground_blink__h_mSH",gridOverlay:"RetroBackground_gridOverlay__PvIZk"}},8618:e=>{e.exports={rankingContainer:"RankingScreen_rankingContainer__5fh4X",rankingHeader:"RankingScreen_rankingHeader__3SyFQ",rankingTitle:"RankingScreen_rankingTitle__igbNU",difficultyNav:"RankingScreen_difficultyNav__lipCh",difficultyButton:"RankingScreen_difficultyButton__xzqEg",difficultyButton__active:"RankingScreen_difficultyButton__active__3pcds",rankingContent:"RankingScreen_rankingContent__LPH4z",tableContainer:"RankingScreen_tableContainer__8GFWz",rankingTable:"RankingScreen_rankingTable__c0E4S",noRecords:"RankingScreen_noRecords__yHgIp",onlineModeToggle:"RankingScreen_onlineModeToggle__ZYiUe",modeButton:"RankingScreen_modeButton__iYQFa",modeButton__active:"RankingScreen_modeButton__active__a_uaP",buttonContainer:"RankingScreen_buttonContainer__mtwyV",registerButton:"RankingScreen_registerButton__QkBHe",disabledButton:"RankingScreen_disabledButton__TF9OV",backButton:"RankingScreen_backButton__yF95g",mainMenuButton:"RankingScreen_mainMenuButton__mF4Ib",debugButton:"RankingScreen_debugButton__OYmTj",modalOverlay:"RankingScreen_modalOverlay__qi5nD",modalContent:"RankingScreen_modalContent__DtQPc",cornerDecoration:"RankingScreen_cornerDecoration__7DYV7",cornerTech:"RankingScreen_cornerTech__lNB_b",modalHeader:"RankingScreen_modalHeader__J3hMS",modalTitle:"RankingScreen_modalTitle__IAvZD",closeButton:"RankingScreen_closeButton__Zrh4C",modalBody:"RankingScreen_modalBody__BPdG5",scanlines:"RankingScreen_scanlines__X2Kgb",dotPattern:"RankingScreen_dotPattern__dvlBW",modalFooter:"RankingScreen_modalFooter__4ofb9",inputGroup:"RankingScreen_inputGroup__FzEUB",nameInput:"RankingScreen_nameInput__nkcpf",scorePreview:"RankingScreen_scorePreview__BTbnj",previewItem:"RankingScreen_previewItem__pjGYc",statusMessage:"RankingScreen_statusMessage__HaIu5",successMessage:"RankingScreen_successMessage__53TLe",errorMessage:"RankingScreen_errorMessage__1iitL",modalActions:"RankingScreen_modalActions__xEYr7",registerActionButton:"RankingScreen_registerActionButton__vwSPc",cancelButton:"RankingScreen_cancelButton__7y_Ly",loadingSpinner:"RankingScreen_loadingSpinner__7gdef",spin:"RankingScreen_spin__oYweb"}},8826:e=>{e.exports={canvas_typing_area:"CanvasTypingArea_canvas_typing_area__S2gfE",typing_canvas:"CanvasTypingArea_typing_canvas__NFZmq",typing_loading:"CanvasTypingArea_typing_loading__JAJ_w",debug_info:"CanvasTypingArea_debug_info__4K8lq"}},9254:e=>{e.exports={mainContainer:"MainMenu_mainContainer__12qmh",earlyAccessBadge:"MainMenu_earlyAccessBadge___OMwy",pulse:"MainMenu_pulse__GbdRa",titleContainer:"MainMenu_titleContainer__QIxi8",title:"MainMenu_title__Cei1U",subTitleContainer:"MainMenu_subTitleContainer__2ERhH",subTitle:"MainMenu_subTitle__6G1CQ",titleDecoration:"MainMenu_titleDecoration__o5UCq",menuContainer:"MainMenu_menuContainer__9ZLlc",logoContainer:"MainMenu_logoContainer__3CVXg",startButton:"MainMenu_startButton__46LI8",logoImage:"MainMenu_logoImage__Yok1d",difficultyToggleGroup:"MainMenu_difficultyToggleGroup__uqB3l",difficultyToggleButton:"MainMenu_difficultyToggleButton__iLQZ9",btnText:"MainMenu_btnText__VDOoL",active:"MainMenu_active__CsNux",instructions:"MainMenu_instructions__c2fXk",instructionText:"MainMenu_instructionText__jkD7I",pulsateText:"MainMenu_pulsateText__oNHCh",statusBar:"MainMenu_statusBar__SnyFY",statusItem:"MainMenu_statusItem__P5GVn",statusLabel:"MainMenu_statusLabel__IEJpz",statusValue:"MainMenu_statusValue__UjCkv",statusDivider:"MainMenu_statusDivider__KqyiF",shipIdBadge:"MainMenu_shipIdBadge__Ssz7q",shipIdLabel:"MainMenu_shipIdLabel__xuww2",shipIdValue:"MainMenu_shipIdValue__A2cFy",cornerButtons:"MainMenu_cornerButtons__37I9i",iconButton:"MainMenu_iconButton__YUba0",gearIcon:"MainMenu_gearIcon__fmBAW",gearInner:"MainMenu_gearInner__0YZXq",creditButton:"MainMenu_creditButton__2pr2g",mascotContainer:"MainMenu_mascotContainer__n4wU2",float:"MainMenu_float__k_B8t",mascotImage:"MainMenu_mascotImage__5cdjq",wiggle:"MainMenu_wiggle__cNoa1",cornerDecoration:"MainMenu_cornerDecoration__J17N_",cornerTech:"MainMenu_cornerTech__rbYD4",cornerLine:"MainMenu_cornerLine__T5S_k",techBorder:"MainMenu_techBorder__Dwk1l",techLights:"MainMenu_techLights___S_aj",techLightBlink:"MainMenu_techLightBlink__4woEL",scanlines:"MainMenu_scanlines__lquzv",dotPattern:"MainMenu_dotPattern__UGxSb",startButtonFrame:"MainMenu_startButtonFrame__ZR_9T",frameCorner:"MainMenu_frameCorner__BQdQw",keyboardShortcuts:"MainMenu_keyboardShortcuts__rLiaa",shortcutsHeader:"MainMenu_shortcutsHeader__fAxuY",shortcutsDecoration:"MainMenu_shortcutsDecoration__DL4Jh",shortcutsList:"MainMenu_shortcutsList__1S_y4",shortcutItem:"MainMenu_shortcutItem__hjZ3G",developerOptions:"MainMenu_developerOptions__j4_99",developerOptionTitle:"MainMenu_developerOptionTitle__vgujF",optionRow:"MainMenu_optionRow__5RV_M",optionLabel:"MainMenu_optionLabel__H8c7H",optionDescription:"MainMenu_optionDescription__G6w6a",versionInfo:"MainMenu_versionInfo__PJZTR",debugInfo:"MainMenu_debugInfo__oyp7f",devButton:"MainMenu_devButton__Fv7f4",devIcon:"MainMenu_devIcon__9R6hC",blink:"MainMenu_blink__SYv53",scanline:"MainMenu_scanline__EFGIm"}}},e=>{var t=t=>e(e.s=t);e.O(0,[371,788,316,507,740,406,55,599,427,529,344,441,684,358],()=>t(8001)),_N_E=e.O()}]);